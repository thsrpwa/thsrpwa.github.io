import{$ as a,H as n,i,k as o}from"./chunk-H5KATAC4.js";var c=class t{breadcrumb=a(["\u7AD9\u52D9\u54E1\u503C\u73ED"]);requestId=1;requests={};constructor(){globalThis.onClientSideMessage=this.onClientSideMessage.bind(this)}request(r={}){let e=globalThis.chrome?.webview;return e?.postMessage?(r.requestId=this.requestId++,i(new Promise(s=>{this.requests[r.requestId]=s,e.postMessage(JSON.stringify(r))}))):o(()=>new Error("WebView postMessage \u65B9\u6CD5\u4E0D\u53EF\u7528"))}onClientSideMessage(r){let e;try{e=JSON.parse(r)}catch(s){console.error("onClientSideMessage JSON parse error:",s);return}this.requests[e.requestId]?.(e)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};export{c as a};
