import{e as Oe}from"./chunk-FPHSEH65.js";import{a as Ae,f as Be,g as $e,i as le,j as B}from"./chunk-F4AZ2R32.js";import{b as ee,c as te,e as q,f as D,g as ne,i as j,j as ie,l as De,m as oe,n as Fe,o as Ne,p as ae,q as L,r as G,s as U,v as re,w as F,x as W}from"./chunk-TZ5BZHLV.js";import{$a as fe,Ab as Z,Ba as M,Ca as h,Da as v,Ea as o,Fa as i,Ga as x,Ha as T,I as ye,Ja as g,Jb as Me,Ka as m,Kb as P,M as y,Na as ue,Qb as Pe,R,S as E,T as I,Va as l,W as Ee,Wa as c,Xa as b,Z as Q,Za as V,_ as f,_a as _e,a as J,aa as w,ab as xe,b as K,bb as Ce,cb as be,da as r,db as ge,e as Se,hb as X,ib as he,ja as O,jb as H,ka as k,kb as ve,mb as Te,na as Ie,pa as _,ua as p,ub as C,va as ke,vb as we,wa as A,za as u}from"./chunk-O2LKXLAO.js";var Je=[{name:"\u6A19\u6E96\u8ECA\u5EC2",value:1,disabled:!1},{name:"\u5546\u52D9\u8ECA\u5EC2",value:2,disabled:!1},{name:"\u8F2A\u6905\u5EA7\u4F4D",value:3,disabled:!1}],se=class{data=w(null);profiles=C(()=>this.data()?.profile);departStationList=C(()=>this.data()?.departStationList);arrivalStationList=C(()=>this.data()?.arrivalStationList);classTypes=C(()=>{let n=this.data()?.classType||[];return Je.map(e=>K(J({},e),{disabled:!n.includes(e.name)}))});promotionTypeList=C(()=>this.data()?.promotionOfProjectData?.promotionTypeList);promotionDataList=C(()=>this.data()?.promotionOfProjectData?.promotionDataList)};var Ve=class t{reservation=new se;apiService=y(B);start(n){this.apiService.loading||this.apiService.execute(this.apiService.startReservation(n),e=>this.reservation.data.set(e.data))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})};var Re=(t,n)=>({"d-flex flex-column justify-content-start":t,"d-flex align-items-center":n}),Ke=(t,n)=>({"d-flex flex-column justify-content-start mt-4 pt-2":t,"d-flex align-items-center":n}),qe=class t{readonly=f(!1);personalIdDisabled=f(!1);coperateIdDisabled=f(!1);personalId=O("");coperateId=O("");showing=w(!1);rowStyle=f(!1);enabledPidCheck=C(()=>this.personalId()||this.coperateId());messageService=y(le);apiService=y(B);constructor(){we(()=>{if(this.coperateIdDisabled()&&this.coperateId()&&(this.coperateId.set(""),this.hidePid()),this.personalIdDisabled()){let n=this.coperateIdDisabled()?"0":"";this.personalId()!==n&&(this.personalId.set(n),this.hidePid())}})}onPidCheck(){this.showing()?this.hidePid():this.check()}hidePid(){this.showing()&&this.showing.set(!1)}check(){if(this.apiService.loading)return;let n={membership:{personalId:this.personalId(),coperateId:this.coperateId()}};this.apiService.execute(this.apiService.queryMembership(n),e=>{let a="",d="";this.coperateId()?(a="\u4F01\u696D\u6703\u54E1",d=e.corporateMember.companyName):(a=`\u500B\u4EBA\u6703\u54E1-${e.individualMember.membeLevel}`,d=`${e.individualMember.memberName} ${e.individualMember.memberGender}`),this.messageService.show({title:a,message:d}),this.showing.set(!0)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-member-code"]],inputs:{readonly:[1,"readonly"],personalIdDisabled:[1,"personalIdDisabled"],coperateIdDisabled:[1,"coperateIdDisabled"],personalId:[1,"personalId"],coperateId:[1,"coperateId"],rowStyle:[1,"rowStyle"]},outputs:{personalId:"personalIdChange",coperateId:"coperateIdChange"},decls:15,vars:18,consts:[[1,"w-100","d-flex","align-items-center"],[3,"ngClass"],["for","coperateId",1,"text-nowrap","m-1"],[1,"m-1"],["id","coperateId",1,"form-control","form-control-sm","fs-6",3,"ngModelChange","ngModel","disabled"],["for","personalId",1,"text-nowrap","m-1"],["id","personalId",1,"form-control","form-control-sm","fs-6",3,"ngModelChange","ngModel","disabled"],[1,"mb-1","me-1"],["type","button",1,"btn","btn-secondary","btn-sm","fs-6",3,"click","disabled"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"label",2),l(3,"\u4F01\u696D\u6703\u54E1\u7DE8\u865F"),i(),o(4,"div",3)(5,"input",4),g("ngModelChange",function(s){return a.coperateId.set(s)}),i()()(),o(6,"div",1)(7,"label",5),l(8,"\u500B\u4EBA\u6703\u54E1\u7DE8\u865F"),i(),o(9,"div",3)(10,"input",6),g("ngModelChange",function(s){return a.personalId.set(s)}),i()()(),o(11,"div",1)(12,"div",7)(13,"button",8),g("click",function(){return a.onPidCheck()}),l(14),i()()()()),e&2&&(r(),p("ngClass",X(9,Re,!a.rowStyle(),a.rowStyle())),r(4),p("ngModel",a.coperateId())("disabled",a.readonly()||a.coperateIdDisabled()||!!a.personalId()),r(),p("ngClass",X(12,Re,!a.rowStyle(),a.rowStyle())),r(4),p("ngModel",a.personalId())("disabled",a.readonly()||a.personalIdDisabled()||!!a.coperateId()),r(),p("ngClass",X(15,Ke,!a.rowStyle(),a.rowStyle())),r(2),p("disabled",!a.enabledPidCheck()),r(),b(" ",a.showing()?"\u986F\u793A\u4E2D":"PID\u6703\u54E1\u8CC7\u6599\u6AA2\u6838/\u986F\u793A"," "))},dependencies:[P,Z,F,te,D,j],encapsulation:2})};var Qe=(t,n)=>n.index,Xe=(t,n)=>n.name;function Ze(t,n){if(t&1&&(o(0,"span",5),l(1),i()),t&2){let e=m();r(),c(e.promotionText())}}function et(t,n){if(t&1&&(o(0,"option",9),l(1),i()),t&2){let e=n.$implicit;p("value",e),r(),c(e)}}function tt(t,n){if(t&1&&(o(0,"option",9),l(1),i()),t&2){let e=n.$implicit;p("value",e),r(),c(e)}}function nt(t,n){if(t&1&&(o(0,"span",26),l(1),i()),t&2){let e=n.$implicit;ke("background-color","#"+e.colorCode),r(),b(" ",e==null?null:e.name," ")}}function it(t,n){if(t&1){let e=T();o(0,"tr",21),g("click",function(){let d=E(e).$implicit,s=m();return I(s.index.set(d.index))}),o(1,"td")(2,"input",22),g("change",function(){let d=E(e).$implicit,s=m();return I(s.index.set(d.index))}),i()(),o(3,"td"),l(4),i(),o(5,"td"),l(6),i(),o(7,"td"),l(8),i(),o(9,"td"),l(10),i(),o(11,"td"),l(12),i(),o(13,"td"),l(14),i(),o(15,"td",23)(16,"div",24),h(17,nt,2,3,"span",25,Xe),i()()()}if(t&2){let e=n.$implicit,a=m();r(2),p("name",a.prefix()+"shift-index")("value",e.index)("checked",a.index()===e.index),r(2),c(e.trainNumber),r(2),c(e.departTime),r(2),c(e.arrivalTime),r(2),c(e.elapseTime),r(2),c(e.aVLSeatCount),r(2),c(e.trainDiscount),r(3),v(e.projects)}}var Le=class t{search=Q();query=f(null);records=f([]);outbound=f(!0);promotion=f(null);index=O(0);editing=f(!1);hours=w(Array.from({length:24},(n,e)=>e.toString().padStart(2,"0")));minutes=w(Array.from({length:60},(n,e)=>e.toString().padStart(2,"0")));prefix=C(()=>this.outbound()?"outbound":"inbound");timePrefix=C(()=>this.editing()?this.prefix():this.outbound()?"depart":"return");queryObj=C(()=>this.query()||{});fromStation=C(()=>this.queryObj()[this.outbound()?"departStation":"arrivalStation"]);toStation=C(()=>this.queryObj()[this.outbound()?"arrivalStation":"departStation"]);date=C(()=>new Date(this.queryObj()[`${this.timePrefix()}Date`]||0));time=C(()=>(this.queryObj()[`${this.timePrefix()}Time`]||"").split(":"));searchMethod=C(()=>this.queryObj()[`${this.timePrefix()}SearchMethod`]||1);hour=C(()=>this.time()[0]);minute=C(()=>this.time()[1]);promotionText=C(()=>{let n=this.promotion();if(!n)return"";let e=parseFloat(n.projectDiscount)>0?`\u6298\u6263\u7387${n.projectDiscount}%`:`\u6298\u50F9${n.projectDiscount}`;return`${n.code} - ${n.projectName} ${e}`});form;formBuilder=y(re);constructor(){this.form=this.formBuilder.group({hour:[this.hour()],minute:[this.minute()],searchMethod:[this.searchMethod()]})}ngOnChanges(n){if(n.query&&this.form.patchValue({hour:this.hour(),minute:this.minute(),searchMethod:this.searchMethod()}),n.records){let e=this.records();e.length&&setTimeout(()=>{this.index.set(e[0].index)},0)}}onSubmit(){let n=this.form.value;n.searchMethod=parseInt(n.searchMethod,10),this.search.emit(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-timetable"]],inputs:{query:[1,"query"],records:[1,"records"],outbound:[1,"outbound"],promotion:[1,"promotion"],index:[1,"index"],editing:[1,"editing"]},outputs:{search:"search",index:"indexChange"},features:[R],decls:56,vars:17,consts:[[1,"d-flex","flex-column","h-100"],[1,"d-flex","align-items-center","mb-1","fw-bold","p-2"],[1,"me-1","text-danger"],[1,"me-1"],[1,"me-2"],[1,"fw-bold","text-danger","me-1"],[1,"d-flex","align-items-center","flex-wrap","gap-2","ms-auto",3,"ngSubmit","formGroup"],[3,"for"],["formControlName","hour",1,"form-select","form-select-sm","w-auto",3,"id"],[3,"value"],["formControlName","minute",1,"form-select","form-select-sm","w-auto",3,"id"],["formControlName","searchMethod",1,"form-select","form-select-sm","w-auto","me-1","fw-bold",3,"id"],["value","1"],["value","2"],[1,"btn","btn-sm","btn-primary","fw-bold"],[1,"flex-1","overflow-auto"],[1,"table","table-sm","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],[1,"text-nowrap","w-25"],["role","button"],["role","button",3,"click"],["type","radio",1,"form-check-input","me-1",3,"change","name","value","checked"],[1,"w-25"],[1,"d-flex","flex-wrap","justify-content-start","w-100"],[1,"badge","me-1","mb-1",3,"backgroundColor"],[1,"badge","me-1","mb-1"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),l(3),i(),o(4,"span",3),l(5),i(),o(6,"span",3),l(7,"\u2192"),i(),o(8,"span",4),l(9),i(),o(10,"span",4),l(11),H(12,"date"),i(),_(13,Ze,2,1,"span",5),o(14,"form",6),g("ngSubmit",function(){return a.onSubmit()}),o(15,"label",7),l(16,"\u6642\u9593:"),i(),o(17,"select",8),h(18,et,2,2,"option",9,M),i(),o(20,"label",7),l(21,"\u6642"),i(),o(22,"select",10),h(23,tt,2,2,"option",9,M),i(),o(25,"label",7),l(26,"\u5206"),i(),o(27,"select",11)(28,"option",12),l(29,"\u4EE5\u51FA\u767C\u6642\u9593\u67E5\u8A62"),i(),o(30,"option",13),l(31,"\u4EE5\u5230\u9054\u6642\u9593\u67E5\u8A62"),i()(),o(32,"button",14),l(33,"\u67E5\u8A62"),i()()(),o(34,"div",15)(35,"table",16)(36,"thead",17)(37,"tr"),x(38,"th"),o(39,"th",18),l(40,"\u8ECA\u6B21"),i(),o(41,"th",18),l(42,"\u51FA\u767C\u6642\u9593"),i(),o(43,"th",18),l(44,"\u5230\u9054\u6642\u9593"),i(),o(45,"th",18),l(46,"\u884C\u8ECA\u6642\u9593"),i(),o(47,"th",18),l(48,"\u53EF\u552E\u5EA7\u4F4D\u6578"),i(),o(49,"th",18),l(50,"\u512A\u60E0*"),i(),o(51,"th",19),l(52,"\u5C08\u6848*"),i()()(),o(53,"tbody"),h(54,it,19,9,"tr",20,Qe),i()()()()),e&2&&(r(3),c(a.outbound()?"\u53BB\u7A0B\u5217\u8ECA":"\u56DE\u7A0B\u5217\u8ECA"),r(2),c(a.fromStation()),r(4),c(a.toStation()),r(2),c(Te(12,12,a.date(),"MM/dd (EEEEE)","","zh")),r(2),u(a.promotion()?13:-1),r(),p("formGroup",a.form),r(),p("for",a.prefix()+"hour"),r(2),p("id",a.prefix()+"hour"),r(),v(a.hours()),r(2),p("for",a.prefix()+"hour"),r(2),p("id",a.prefix()+"minute"),r(),v(a.minutes()),r(2),p("for",a.prefix()+"minute"),r(2),p("id",a.prefix()+"searchMethod"),r(27),v(a.records()))},dependencies:[P,Me,F,ie,G,U,L,D,ne,W,oe,ae],encapsulation:2})};var me=class t{transform([n,e,a,d]){return a.find(s=>s.carNumber===parseInt(d,10)&&s.col===e&&s.row===parseInt(n,10))}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=Ie({name:"seatPassenger",type:t,pure:!0})};var Ge=(t,n,e,a)=>[t,n,e,a],at=(t,n)=>n.passengerIndex;function rt(t,n){if(t&1&&(o(0,"div",34),l(1),i()),t&2){let e=n.$implicit;r(),b(" ",e," ")}}function lt(t,n){if(t&1){let e=T();Ce(0),H(1,"seatPassenger"),o(2,"a",39),g("click",function(){let d=E(e),s=d.$implicit,S=d.$index,z=ge(0),N=m().$implicit,pe=m(3);return I(pe.selectSeat(N[0],s,N[S+1],z))}),x(3,"i",16)(4,"i",25),l(5),i()}if(t&2){let e=n.$implicit,a=n.$index,d=m().$implicit,s=m(3),S=be(ve(1,4,he(7,Ge,d[0],e,s.passengers(),s.carNumber())));r(2),A("selected",S),p("ngClass",s.seatStatus[d[a+1]].class),r(3),b(" ",S==null?null:S.passengerIndex," ")}}function st(t,n){if(t&1&&(o(0,"div",35)(1,"div",37),l(2),i(),h(3,lt,6,12,"a",38,M),i()),t&2){let e=n.$implicit,a=m();r(2),c(e[0]),r(),v(a.columnName.slice(0,2))}}function dt(t,n){if(t&1&&(o(0,"div",34),l(1),i()),t&2){let e=n.$implicit;r(),b(" ",e," ")}}function mt(t,n){if(t&1){let e=T();Ce(0),H(1,"seatPassenger"),o(2,"a",39),g("click",function(){let d=E(e),s=d.$implicit,S=d.$index,z=ge(0),N=m().$implicit,pe=m(3);return I(pe.selectSeat(N[0],s,N[S+3],z))}),x(3,"i",16)(4,"i",25),l(5),i()}if(t&2){let e=n.$implicit,a=n.$index,d=m().$implicit,s=m(3),S=be(ve(1,4,he(7,Ge,d[0],e,s.passengers(),s.carNumber())));r(2),A("selected",S),p("ngClass",s.seatStatus[d[a+3]].class),r(3),b(" ",S==null?null:S.passengerIndex," ")}}function ct(t,n){if(t&1&&(o(0,"div",35),h(1,mt,6,12,"a",38,M),o(3,"div",37),l(4),i()()),t&2){let e=n.$implicit,a=m();r(),v(a.columnName.slice(2)),r(3),c(e[0])}}function pt(t,n){if(t&1&&(o(0,"div",7)(1,"div",31)(2,"div",32),x(3,"div",33),h(4,rt,2,1,"div",34,M),i(),h(6,st,5,1,"div",35,M),i(),o(8,"div",36),l(9," \u8D70\u9053 "),i(),o(10,"div",31)(11,"div",32),h(12,dt,2,1,"div",34,M),i(),h(14,ct,5,1,"div",35,M),i()()),t&2){let e=n;r(4),v(e.columnName.slice(0,2)),r(2),v(e.value),r(6),v(e.columnName.slice(2)),r(2),v(e.value)}}function ut(t,n){if(t&1&&(o(0,"option",12),l(1),i()),t&2){let e=n.$implicit;p("value",e),r(),b(" ",e," ")}}function _t(t,n){if(t&1&&(o(0,"div",9)(1,"span",40),l(2,"\u8ECA\u5EC2\u7A2E\u985E:"),i(),o(3,"span",41),l(4),i()(),o(5,"div",9)(6,"span",42),l(7,"\u5168\u8ECA\u5EA7\u4F4D\u6578:"),i(),o(8,"span"),l(9),i()(),o(10,"div",9)(11,"span",42),l(12,"\u672C\u8ECA\u5EC2\u5EA7\u4F4D:"),i(),o(13,"span"),l(14),i()()),t&2){let e=n;r(4),c(e.classType),r(5),c(e.regSeat),r(5),c(e.totalSeats)}}function ft(t,n){if(t&1&&(o(0,"tr")(1,"td",30),l(2),i(),o(3,"td",30),l(4),i(),o(5,"td",30),l(6),i()()),t&2){let e,a=n.$implicit;r(2),c(a.passengerIndex),r(2),c(a.profile),r(2),V(" ",a.carNumber==null||(e=a.carNumber.toString())==null?null:e.padStart(2,"0"),"/",a.col,"",a.row," ")}}function xt(t,n){if(t&1){let e=T();o(0,"div",0)(1,"p",1),l(2,"\u5EA7\u4F4D\u8868"),i(),o(3,"button",2),g("click",function(){E(e);let d=m();return I(d.ngbActiveModal.close(null))}),i()(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"span",6),l(8," \u65E5\u671F: "),o(9,"span"),l(10),i()(),o(11,"span",6),l(12),i(),o(13,"span",6),l(14),i(),o(15,"span",6),l(16),i()(),_(17,pt,16,0,"div",7),i(),o(18,"div",8)(19,"div",9)(20,"span",10),l(21,"\u8ECA\u5EC2:"),i(),o(22,"select",11),g("ngModelChange",function(d){E(e);let s=m();return I(s.carNumber.set(d))}),h(23,ut,2,2,"option",12,M),i()(),_(25,_t,15,3),o(26,"ul",13)(27,"li",9)(28,"span",14),l(29,"\u4E00\u822C\u5EA7\u4F4D"),i(),o(30,"div",15),x(31,"i",16),i(),o(32,"div",17),l(33," N "),i()(),o(34,"li",9)(35,"span",14),l(36,"\u4FDD\u7559\u5EA7\u4F4D"),i(),o(37,"div",18),x(38,"i",16),i(),x(39,"div",19),i(),o(40,"li",9)(41,"span",14),l(42,"\u656C\u8001\u611B\u5FC3\u5EA7"),i(),o(43,"div",20),x(44,"i",16),i(),o(45,"div",21),l(46," N "),i()(),o(47,"li",9)(48,"span",14),l(49,"\u7121\u969C\u7919\u5EA7\u4F4D"),i(),o(50,"div",22),x(51,"i",16),i(),o(52,"div",23),l(53," N "),i()(),o(54,"li",9)(55,"span",14),l(56,"\u5DF2\u88AB\u5360\u7528\u5EA7"),i(),o(57,"div",24),x(58,"i",25),i(),x(59,"div",19),i()(),o(60,"button",26),g("click",function(){E(e);let d=m();return I(d.reset())}),l(61,"\u5EA7\u4F4D\u91CD\u8A2D"),i(),o(62,"button",27),g("click",function(){E(e);let d=m();return I(d.confirm())}),l(63,"\u5EA7\u4F4D\u78BA\u8A8D"),i(),o(64,"table",28)(65,"thead",29)(66,"tr")(67,"th",30),l(68,"\u7DE8\u865F"),i(),o(69,"th",30),l(70,"\u8EAB\u5206\u5225"),i(),o(71,"th",30),l(72,"\u8ECA\u5EC2/\u5EA7\u4F4D"),i()()(),o(73,"tbody"),h(74,ft,7,5,"tr",null,at),i()()()()}if(t&2){let e,a,d=n,s=m();r(10),b("",d.date," "),r(2),b("\u8ECA\u6B21: ",d.trainNumber,""),r(2),b("\u51FA\u767C\u7AD9: ",d.departStation,""),r(2),b("\u5230\u9054\u7AD9: ",d.arrivalStation,""),r(),u((e=s.seat())?17:-1,e),r(5),p("ngModel",s.carNumber()),r(),v(s.carNumbers()),r(2),u((a=s.seat())?25:-1,a),r(37),p("disabled",!s.allSelected()),r(12),v(s.passengers())}}var Ue={};[{symbol:"",class:"invisible"},{symbol:"V",class:"seat-reserved"},{symbol:"$",class:"seat-taken"},{symbol:"@",class:"seat-available"},{symbol:"@C",class:"seat-priority"},{symbol:"@W",class:"seat-accessibility"}].forEach(t=>{Ue[t.symbol]=t});var ce=class t{seatStatus=Ue;mode=w(1);pnrId=w("");seatData=w(null);passengers=w([]);carNumber=w("");carNumbers=C(()=>this.seatData()?.seats.map(n=>n.carNumber)||[]);seat=C(()=>{let n=this.seatData()?.seats||[],e=this.carNumber();return n.find(d=>d.carNumber===e)});allSelected=C(()=>this.passengers().every(n=>n.col&&n.row));ngbActiveModal=y(Be);apiService=y(B);ngOnInit(){this.setCarNumber()}ngOnChanges(){this.setCarNumber()}selectSeat(n,e,a,d){if(d){d.col=void 0,d.row=void 0,d.carNumber=void 0,this.passengers.set([...this.passengers()]);return}a==="$"||a==="V"||(d=this.passengers().find(s=>!s.carNumber),d&&(d.col=e,d.row=parseInt(n,10),d.carNumber=parseInt(this.carNumber(),10),this.passengers.set([...this.passengers()])))}reset(){this.passengers.update(n=>n.map(e=>K(J({},e),{col:void 0,row:void 0,carNumber:void 0})))}confirm(){if(this.apiService.loading)return;let n={pnrId:this.pnrId(),trainNumber:this.seatData()?.trainNumber,newSeats:this.toRequestSeats(this.passengers())};this.apiService.execute(this.callApi(n),e=>{this.ngbActiveModal.close(e.data.trip)})}callApi(n){return this.mode()===1?this.apiService.bookSetSeat(n):this.apiService.changeSetSeat(n)}toRequestSeats(n){return n.map(e=>({passengerIndex:e.passengerIndex,carNumber:e.carNumber,row:e.row,col:e.col}))}setCarNumber(){let n=!1,e=this.passengers()[0];e?.carNumber&&(this.carNumber.set(e.carNumber.toString()),n=!0),n||this.carNumber.set(this.carNumbers()[0])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-seat-modal"]],features:[R],decls:1,vars:1,consts:[[1,"modal-header","bg-warning-subtle","align-items-center","justify-content-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","d-flex","align-items-start"],[1,"flex-grow-1"],[1,"fs-6"],[1,"ms-3"],[1,"d-flex","justify-content-start","ms-5"],[1,"mx-4","fs-6","w-30"],[1,"d-flex","text-nowrap","align-items-center","m-2","justify-content-between"],[1,"me-2"],[1,"form-select","form-select-sm","fs-7","ml-2",3,"ngModelChange","ngModel"],[3,"value"],[1,"list-unstyled"],[1,"legend-box"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","ms-auto"],[1,"fas","fa-chair"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-available","selected"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-reserved","ms-auto"],[1,"m-1","w-30-px"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-priority","ms-auto"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-priority","selected"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-accessibility","ms-auto"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-accessibility","selected"],[1,"d-flex","align-items-center","justify-content-center","m-1","border","w-30-px","seat","seat-taken","ms-auto"],[1,"fas","fa-ban"],[1,"btn","btn-secondary","btn-sm","me-1",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"table","mt-3","table-bordered","text-center","align-middle"],[1,"table-light"],[1,"text-nowrap"],[1,"mt-3"],[1,"d-flex","gap-3","mb-1"],[1,"text-center","fw-bold","w-30-px"],[1,"text-center","fw-bold","bg-warning-subtle","w-30-px"],[1,"d-flex","align-items-center","gap-3","mb-1"],[1,"w-5","container","my-3","mx-3","d-flex","align-items-center","justify-content-center","flex-column","bg-warning-subtle"],[1,"text-center","bg-warning-subtle","w-30-px"],["href","javascript:;",1,"d-flex","align-items-center","justify-content-center","border","w-30-px","seat","text-decoration-none",3,"ngClass","selected"],["href","javascript:;",1,"d-flex","align-items-center","justify-content-center","border","w-30-px","seat","text-decoration-none",3,"click","ngClass"],[1,"me-1","text-end"],[1,"text-start"],[1,"me-1"]],template:function(e,a){if(e&1&&_(0,xt,76,8),e&2){let d;u((d=a.seatData())?0:-1,d)}},dependencies:[P,Z,F,G,U,L,D,j,me],styles:[".seat[_ngcontent-%COMP%]{height:30px;border-radius:4px}.seat[_ngcontent-%COMP%]   .fa-ban[_ngcontent-%COMP%], .seat.selected[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{display:none}.seat-reserved[_ngcontent-%COMP%]{color:#0dcaf0}.seat-priority[_ngcontent-%COMP%]{color:#ffc107}.seat-priority.selected[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.seat-accessibility[_ngcontent-%COMP%]{color:#0d6efd}.seat-accessibility.selected[_ngcontent-%COMP%]{background-color:#0d6efd;color:#000}.seat-available[_ngcontent-%COMP%]{color:#000}.seat-available.selected[_ngcontent-%COMP%]{background-color:#d63384}.seat-taken[_ngcontent-%COMP%]{color:#000}.seat-taken[_ngcontent-%COMP%]   .fa-ban[_ngcontent-%COMP%]{display:inline}.seat-taken[_ngcontent-%COMP%]   .fa-chair[_ngcontent-%COMP%]{display:none}"]})};function Ct(t,n){t&1&&x(0,"th",2)}function bt(t,n){t&1&&(o(0,"th",2),l(1,"\u5EA7\u4F4D\u9078\u64C7"),i())}function gt(t,n){if(t&1){let e=T();o(0,"td")(1,"input",3),xe("ngModelChange",function(d){E(e);let s=m(3);return fe(s.outboundChecked,d)||(s.outboundChecked=d),I(d)}),i()()}if(t&2){let e=m(3);r(),_e("ngModel",e.outboundChecked)}}function ht(t,n){if(t&1){let e=T();o(0,"td")(1,"button",4),g("click",function(){E(e);let d=m(3);return I(d.selectSeat(!0))}),l(2," \u5EA7\u4F4D\u8868 "),i()()}if(t&2){let e=m(3);r(),p("disabled",e.activatedRoute.snapshot.data.unreserved)}}function vt(t,n){if(t&1&&(o(0,"tr"),_(1,gt,2,1,"td"),o(2,"td"),l(3),i(),o(4,"td"),l(5),i(),o(6,"td"),l(7),i(),o(8,"td"),l(9),i(),o(10,"td"),l(11),i(),o(12,"td"),l(13),i(),o(14,"td"),l(15),i(),o(16,"td"),l(17),i(),o(18,"td"),l(19),i(),o(20,"td"),l(21),i(),_(22,ht,3,1,"td"),i()),t&2){let e=n,a=m(2);r(),u(a.hasCheckbox()?1:-1),r(2),c(a.isShort()?"\u53BB":"\u53BB\u7A0B\u5217\u8ECA"),r(2),c(e.discount),r(2),c(e.trainNumber),r(2),c(e.departStation),r(2),c(e.arrivalStation),r(2),c(e.departDate),r(2),c(e.departTime),r(2),c(e.arrivalTime),r(2),c(e.elapseTime),r(2),c(e.carriage),r(),u(a.seatSelectable()?22:-1)}}function St(t,n){if(t&1){let e=T();o(0,"td")(1,"input",3),xe("ngModelChange",function(d){E(e);let s=m(4);return fe(s.inboundChecked,d)||(s.inboundChecked=d),I(d)}),i()()}if(t&2){let e=m(4);r(),_e("ngModel",e.inboundChecked)}}function yt(t,n){t&1&&(o(0,"td"),l(1,"\u56DE\u7A0B\u5217\u8ECA"),i())}function Et(t,n){if(t&1){let e=T();o(0,"td")(1,"button",5),g("click",function(){E(e);let d=m(4);return I(d.selectSeat(!1))}),l(2,"\u5EA7\u4F4D\u8868"),i()()}}function It(t,n){if(t&1&&(o(0,"tr"),_(1,St,2,1,"td"),o(2,"td"),l(3),i(),_(4,yt,2,0,"td"),o(5,"td"),l(6),i(),o(7,"td"),l(8),i(),o(9,"td"),l(10),i(),o(11,"td"),l(12),i(),o(13,"td"),l(14),i(),o(15,"td"),l(16),i(),o(17,"td"),l(18),i(),o(19,"td"),l(20),i(),o(21,"td"),l(22),i(),_(23,Et,3,0,"td"),i()),t&2){let e=n,a=m(3);r(),u(a.hasCheckbox()?1:-1),r(2),c(a.isShort()?"\u56DE":"\u56DE\u7A0B\u5217\u8ECA"),r(),u(a.isShort()?-1:4),r(2),c(e.discount),r(2),c(e.trainNumber),r(2),c(e.departStation),r(2),c(e.arrivalStation),r(2),c(e.departDate),r(2),c(e.departTime),r(2),c(e.arrivalTime),r(2),c(e.elapseTime),r(2),c(e.carriage),r(),u(a.seatSelectable()?23:-1)}}function kt(t,n){if(t&1&&_(0,It,24,13,"tr"),t&2){let e,a=m();u((e=a.inbound())?0:-1,e)}}function Tt(t,n){if(t&1&&(o(0,"table",0)(1,"thead",1)(2,"tr"),_(3,Ct,1,0,"th",2),x(4,"th",2),o(5,"th",2),l(6,"\u512A\u60E0*"),i(),o(7,"th",2),l(8,"\u8ECA\u6B21"),i(),o(9,"th",2),l(10,"\u51FA\u767C\u7AD9"),i(),o(11,"th",2),l(12,"\u5230\u9054\u7AD9"),i(),o(13,"th",2),l(14,"\u51FA\u767C\u65E5\u671F"),i(),o(15,"th",2),l(16,"\u51FA\u767C\u6642\u9593"),i(),o(17,"th",2),l(18,"\u5230\u9054\u6642\u9593"),i(),o(19,"th",2),l(20,"\u884C\u8ECA\u6642\u9593"),i(),o(21,"th",2),l(22,"\u5EC2\u7B49"),i(),_(23,bt,2,0,"th",2),i()(),o(24,"tbody"),_(25,vt,23,12,"tr")(26,kt,1,1),i()()),t&2){let e,a=n,d=m();r(3),u(d.hasCheckbox()?3:-1),r(20),u(d.seatSelectable()?23:-1),r(2),u((e=a.outbound())?25:-1,e),r(),u(a.roundTrip()?26:-1)}}var We=class t{order=f();seatSelectable=f(!0);isShort=f(!0);hasCheckbox=f(!0);seatChange=Q();mode=f(1);outboundChecked=!1;inboundChecked=!1;activatedRoute=y(Pe);ngbModal=y($e);apiService=y(B);data=null;selectSeat(n){if(this.apiService.loading)return;let e=n?this.order()?.outbound():this.order()?.inbound(),a=this.getPassengers(n),d={pnrId:this.order()?.trip()?.pnrId,trainNumber:e?.trainNumber,classType:e?.carriage==="\u6A19\u6E96\u8ECA\u5EC2"?"Y":"N",originalSeats:this.toRequestSeats(a)};this.apiService.execute(this.callApi(d),s=>{this.data=s.data,this.openSeatModal(a)})}callApi(n){return this.mode()===1?this.apiService.bookSeatMap(n):this.mode()===2?this.apiService.changeSeatMap(n):this.apiService.changeChangeSeat(n)}openSeatModal(n){return Se(this,null,function*(){let e=this.ngbModal.open(ce,{size:"lg",centered:!0,scrollable:!0,backdrop:"static"});e.componentInstance.seatData.set(this.data),e.componentInstance.passengers.set(n),e.componentInstance.pnrId.set(this.order()?.trip()?.pnrId),e.componentInstance.mode.set(this.mode());let a=yield e.result;a&&this.seatChange.emit(a)})}getPassengers(n){return(this.order()?.trip()?.passengers||[]).map(e=>{let a=n?"OUTBOUND":"INBOUND",d=e.tickets.find(s=>s.journey===a);return{profile:e.profile,passengerIndex:e.index,carNumber:d.car,row:d.seatRow,col:d.seatCol}})}toRequestSeats(n){return n.map(e=>({passengerIndex:e.passengerIndex,carNumber:e.carNumber,row:e.row,col:e.col}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-bound"]],inputs:{order:[1,"order"],seatSelectable:[1,"seatSelectable"],isShort:[1,"isShort"],hasCheckbox:[1,"hasCheckbox"],mode:[1,"mode"]},outputs:{seatChange:"seatChange"},decls:1,vars:1,consts:[[1,"table","table-sm","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],["type","checkbox",1,"form-check-input","me-1","flex-grow-1",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-primary",3,"click"]],template:function(e,a){if(e&1&&_(0,Tt,27,4,"table",0),e&2){let d;u((d=a.order())?0:-1,d)}},dependencies:[F,ee,D,j,P,W],encapsulation:2})};var wt=(t,n)=>n.index;function Mt(t,n){t&1&&x(0,"th",3)}function Pt(t,n){t&1&&(o(0,"th",7),l(1,"\u8A3B\u8A18"),i())}function Dt(t,n){t&1&&(o(0,"td"),x(1,"input",29),i())}function Ft(t,n){if(t&1&&(o(0,"select",11)(1,"option",30),l(2),i()()),t&2){let e=m().$implicit;r(),p("value",e.profile),r(),c(e.profile)}}function Nt(t,n){if(t&1&&l(0),t&2){let e=m().$implicit;b(" ",e.profile," ")}}function At(t,n){if(t&1&&l(0),t&2){let e=m().$implicit;b(" ",e.personalId," ")}}function Bt(t,n){if(t&1){let e=T();o(0,"input",33),g("change",function(){E(e);let d=m(2).$index,s=m();return I(s.onPersonalIdChange(d))}),i()}if(t&2){let e=m(2),a=e.$implicit,d=e.$index;A("invisible",d===0),p("id","personalIdCheck-"+a.index)}}function $t(t,n){t&1&&(o(0,"span",17),l(1,"*"),i())}function Ot(t,n){if(t&1&&(_(0,Bt,1,3,"input",31)(1,$t,2,0,"span",17),x(2,"input",32)),t&2){let e=m().$implicit,a=m();u(a.editing()?-1:0),r(),u(e.personalIdRequired?1:-1),r(),p("id","personalId-"+e.index)}}function Vt(t,n){if(t&1&&l(0),t&2){let e=m().$implicit;b(" ",e.expiryDate," ")}}function Rt(t,n){t&1&&(o(0,"span",17),l(1,"*"),i())}function qt(t,n){if(t&1&&(_(0,Rt,2,0,"span",17),x(1,"app-date-input",34)),t&2){let e=m().$implicit;u(e!=null&&e.expiryDateRequired?0:-1),r(),p("id","expiryDate-"+e.index)("inputClass","form-control-sm")("buttonClass","btn-sm fs-7 p-2")}}function jt(t,n){t&1&&(o(0,"span",17),l(1,"*"),i())}function Lt(t,n){if(t&1&&(o(0,"label",23),l(1,"\u53BB:"),i()),t&2){let e=m().$implicit;p("for","outboundCoupon-"+e.index)}}function Gt(t,n){if(t&1&&l(0),t&2){let e=m().$implicit;b(" ",e.outbound==null?null:e.outbound.coupon," ")}}function Ut(t,n){t&1&&(o(0,"span",17),l(1,"*"),i())}function Wt(t,n){if(t&1&&(_(0,Ut,2,0,"span",17),x(1,"input",35)),t&2){let e=m().$implicit;u(e.outboundCouponRequired?0:-1),r(),p("id","outboundCoupon-"+e.index)}}function Yt(t,n){if(t&1&&l(0),t&2){let e=m(2).$implicit;b(" ",e.inbound==null?null:e.inbound.coupon," ")}}function zt(t,n){t&1&&(o(0,"span",17),l(1,"*"),i())}function Ht(t,n){if(t&1&&(_(0,zt,2,0,"span",17),x(1,"input",36)),t&2){let e=m(2).$implicit;u(e.inboundCouponRequired?0:-1),r(),p("id","inboundCoupon-"+e.index)}}function Jt(t,n){if(t&1&&(o(0,"div",24)(1,"label",23),l(2,"\u56DE:"),i(),_(3,Yt,1,1)(4,Ht,2,2),i()),t&2){let e=m().$implicit,a=m();r(),p("for","inboundCoupon-"+e.index),r(2),u(a.readonly()?3:4)}}function Kt(t,n){if(t&1&&(o(0,"div",25)(1,"span"),l(2,"NT$"),i(),l(3),i()),t&2){let e=m().$implicit;r(3),c(e==null||e.inbound==null?null:e.inbound.fare)}}function Qt(t,n){if(t&1&&x(0,"input",26),t&2){let e=m().$implicit;p("id","outboundSeatCheck-"+e.index)}}function Xt(t,n){if(t&1&&x(0,"input",37),t&2){let e=m(2).$implicit;p("id","inboundSeatCheck-"+e.index)}}function Zt(t,n){if(t&1&&(o(0,"div",25),_(1,Xt,1,1,"input",37),o(2,"label",27),l(3),i()()),t&2){let e,a=m().$implicit,d=m();r(),u(d.editing()?1:-1),r(),ue("for","inboundSeatCheck-",a.index,""),r(),V("",a.inbound==null||a.inbound.car==null||(e=a.inbound.car.toString())==null?null:e.padStart(2,"0"),"/",a.inbound==null?null:a.inbound.seatRow,"",a.inbound==null?null:a.inbound.seatCol,"")}}function en(t,n){if(t&1&&(o(0,"div",25),l(1),i()),t&2){let e=m(2).$implicit;r(),c(e.inbound==null?null:e.inbound.mark)}}function tn(t,n){if(t&1&&(o(0,"td",28)(1,"div"),l(2),i(),_(3,en,2,1,"div",25),i()),t&2){let e=m().$implicit,a=m();r(2),c(e.outbound==null?null:e.outbound.mark),r(),u(a.roundTrip()?3:-1)}}function nn(t,n){if(t&1){let e=T();o(0,"tr",9),_(1,Dt,2,0,"td"),o(2,"td"),l(3),i(),o(4,"td",10),_(5,Ft,3,2,"select",11)(6,Nt,1,1),i(),o(7,"td",12)(8,"div",13),_(9,At,1,1)(10,Ot,3,3),i()(),o(11,"td",14)(12,"div",15),_(13,Vt,1,1)(14,qt,2,4),i()(),o(15,"td",16),_(16,jt,2,0,"span",17),x(17,"input",18),o(18,"label",19),l(19,"\u6709"),i(),x(20,"input",18),o(21,"label",20),l(22,"\u7121"),i()(),o(23,"td",16)(24,"div",13)(25,"input",21),g("change",function(){let d=E(e).$index,s=m();return I(s.onNoIdDocumentChange(d))}),i(),o(26,"label",19),l(27,"\u7121\u8B49\u4EF6"),i()()(),o(28,"td")(29,"div",22)(30,"div",13),_(31,Lt,2,1,"label",23)(32,Gt,1,1)(33,Wt,2,2),i(),_(34,Jt,5,2,"div",24),i()(),o(35,"td")(36,"div")(37,"span"),l(38,"NT$"),i(),l(39),i(),_(40,Kt,4,1,"div",25),i(),o(41,"td")(42,"div"),_(43,Qt,1,1,"input",26),o(44,"label",27),l(45),i()(),_(46,Zt,4,6,"div",25),i(),_(47,tn,4,2,"td",28),i()}if(t&2){let e,a=n.$implicit,d=n.$index,s=m();p("formGroupName",d),r(),u(s.editing()?1:-1),r(2),b(" ",a.index," "),r(2),u(s.editing()?5:6),r(4),u(s.readonly()?9:10),r(4),u(s.readonly()?13:14),r(3),u(!s.readonly()&&a.needCompanionRequired?16:-1),r(),A("disabled",s.readonly()),p("id","needCompanionYes-"+a.index)("readonly",s.readonly()?"true":null)("value",!0),r(),p("for","needCompanionYes-"+a.index),r(2),A("disabled",s.readonly()),p("id","needCompanionNo-"+a.index)("readonly",s.readonly()?"true":null)("value",!1),r(),p("for","needCompanionNo-"+a.index),r(4),A("disabled",s.readonly()),p("id","noIdDocument-"+a.index)("readonly",s.readonly()?"true":null),r(),p("for","noIdDocument-"+a.index),r(5),u(s.roundTrip()?31:-1),r(),u(s.readonly()?32:33),r(2),u(s.roundTrip()?34:-1),r(5),c(a==null||a.outbound==null?null:a.outbound.fare),r(),u(s.roundTrip()?40:-1),r(3),u(s.editing()?43:-1),r(),ue("for","outboundSeatCheck-",a.index,""),r(),V("",a.outbound==null||a.outbound.car==null||(e=a.outbound.car.toString())==null?null:e.padStart(2,"0"),"/",a.outbound==null?null:a.outbound.seatRow,"",a.outbound==null?null:a.outbound.seatCol,""),r(),u(s.roundTrip()?46:-1),r(),u(s.showMark()?47:-1)}}var Ye=class t{passengers=f();roundTrip=f(!1);readonly=f(!1);disabled=f(!1);promotion=f(null);needToCheck=O(!1);editing=f(!1);showMark=f(!1);form;formBuilder=y(re);destroyRef=y(Ee);messageService=y(le);constructor(){this.form=this.formBuilder.group({passengers:this.formBuilder.array([])}),this.form.valueChanges.pipe(Ae(this.destroyRef)).subscribe(()=>{let e=(this.form.get("passengers")?.value||[]).some(a=>(a.profile==="\u611B\u5FC3"||a.profile==="\u656C\u8001")&&!a.noIdDocument);this.needToCheck.set(e)})}ngOnChanges(n){if(n.passengers||"promotion"in n){let e=this.disabled(),a=n.promotion?.currentValue||this.promotion(),d=(n.passengers?.currentValue||this.passengers()).map(s=>{s.outbound=s.tickets.find(N=>N.journey==="OUTBOUND"),s.inbound=s.tickets.find(N=>N.journey==="INBOUND"),s.personalIdRequired=s.profile==="\u611B\u5FC3"||s.profile==="\u656C\u8001",a&&(s.profile==="\u6210\u4EBA"||s.profile==="\u5B69\u7AE5")&&(s.personalIdRequired=a.adultChildId),s.expiryDateRequired=s.profile==="\u611B\u5FC3",s.needCompanionRequired=s.profile==="\u611B\u5FC3";let S=s.profile==="\u7279\u60E0\u5168"||s.profile==="\u7279\u60E0\u534A"||a?.voucherNumberRequired;s.outboundCouponRequired=S,s.inboundCouponRequired=S;let z=s.profile==="\u611B\u5FC3"||s.profile==="\u656C\u8001";return this.formBuilder.group({index:[s.index],profile:[s.profile],personalIdCheck:[{value:!1,disabled:e||!s.personalIdRequired}],personalId:[{value:s.personalId||"",disabled:e||!s.personalIdRequired},s.personalIdRequired?[q.required]:[]],expiryDate:[{value:s.expiryDate||"",disabled:e||!s.expiryDateRequired},s.expiryDateRequired?[q.required]:[]],needCompanion:[{value:s.needCompanion,disabled:e||!s.needCompanionRequired},s.needCompanionRequired?[q.required]:[]],noIdDocument:[{value:s.noIdDocument||!1,disabled:e||!z}],outboundCoupon:[{value:s.outbound?.coupon||"",disabled:e},s.outboundCouponRequired?[q.required]:[]],inboundCoupon:[{value:s.inbound?.coupon||"",disabled:e},s.inboundCouponRequired?[q.required]:[]],outboundSeatCheck:[],inboundSeatCheck:[]})});this.form.setControl("passengers",this.formBuilder.array(d))}}onPersonalIdChange(n){let e=this.form.get(`passengers.${n-1}`),a=this.form.get(`passengers.${n}`);a.get("personalIdCheck")?.value?a.get("personalId")?.setValue(e.get("personalId")?.value):a.get("personalId")?.setValue("")}onNoIdDocumentChange(n){let e=this.form.get(`passengers.${n}`);e.get("profile")?.value==="\u611B\u5FC3"&&(e.get("noIdDocument").value?(e.get("needCompanion")?.disable(),e.get("expiryDate")?.disable()):(e.get("needCompanion")?.enable(),e.get("expiryDate")?.enable()))}getValues(){return this.form.value.passengers.map(e=>({index:e.index,profile:e.profile,personalId:e.personalId,expiryDate:e.expiryDate?.replaceAll("-","/"),needCompanion:e.needCompanion,noIdDocument:e.noIdDocument,outbound:{coupon:e.outboundCoupon},inbound:{coupon:e.inboundCoupon}}))}setPassengers(n){let e=this.getValues();for(let d of n)for(let s of e.filter(S=>S.personalId===d.personalId)){let S=this.form.get(`passengers.${s.index-1}`);S.get("expiryDate")?.enabled&&S.patchValue({expiryDate:d.expiryDate.replaceAll("/","-"),needCompanion:d.needCompanion})}let a=[];for(let d of(this.passengers()||[]).filter(s=>s.expiryDateRequired))this.form.get(`passengers.${d.index-1}`).get("expiryDate")?.value||a.push(`\u4E58\u5BA2${d.index}\u8CC7\u6599\u4E0D\u5B58\u5728\u65BC\u7CFB\u7D71\uFF0C\u8ACB\u4F9D\u65C5\u5BA2\u8B49\u4EF6\u8FA6\u7406\u8CC7\u6599\u767B\u9304`);this.form.markAllAsTouched(),this.messageService.setErrors(a)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-passengers"]],inputs:{passengers:[1,"passengers"],roundTrip:[1,"roundTrip"],readonly:[1,"readonly"],disabled:[1,"disabled"],promotion:[1,"promotion"],needToCheck:[1,"needToCheck"],editing:[1,"editing"],showMark:[1,"showMark"]},outputs:{needToCheck:"needToCheckChange"},features:[R],decls:27,vars:3,consts:[[3,"formGroup"],[1,"table","table-sm","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],[1,"text-nowrap","profile-col"],[1,"text-nowrap","id-col"],[1,"text-nowrap","expiry-col"],[1,"text-nowrap","mark-col"],["formArrayName","passengers",1,"fs-7"],[3,"formGroupName"],[1,"profile-col"],["formControlName","profile",1,"form-select","form-select-sm","fs-7"],[1,"id-col"],[1,"d-flex","align-items-center"],[1,"expiry-col"],[1,"d-flex","align-items-center","justify-content-center"],[1,"align-items-center","text-nowrap"],[1,"m-1","text-danger"],["type","radio","formControlName","needCompanion",1,"form-check-input","me-1",3,"id","readonly","value"],[1,"form-check-label","me-2",3,"for"],[1,"form-check-label",3,"for"],["type","checkbox","formControlName","noIdDocument",1,"form-check-input","me-1","fs-7",3,"change","id","readonly"],[1,"d-flex","flex-column","justify-content-start"],[1,"me-1",3,"for"],[1,"d-flex","align-items-center","mt-1"],[1,"mt-2"],["type","checkbox","formControlName","outboundSeatCheck",1,"form-check-input","me-1",3,"id"],[3,"for"],[1,"mark-col","fs-7"],["type","checkbox","id","select-1",1,"form-check-input","me-1","flex-grow-1"],[3,"value"],["type","checkbox","formControlName","personalIdCheck",1,"form-check-input","me-1","fs-7","flex-grow-1",3,"id","invisible"],["type","text","formControlName","personalId",1,"fs-7","form-control","form-control-sm","flex-grow-1",3,"id"],["type","checkbox","formControlName","personalIdCheck",1,"form-check-input","me-1","fs-7","flex-grow-1",3,"change","id"],["formControlName","expiryDate",1,"fs-7","flex-1",3,"id","inputClass","buttonClass"],["type","text","formControlName","outboundCoupon",1,"fs-7","form-control","form-control-sm","flex-grow-1",3,"id"],["type","text","formControlName","inboundCoupon",1,"fs-7","form-control","form-control-sm","flex-grow-1",3,"id"],["type","checkbox","formControlName","inboundSeatCheck",1,"form-check-input","me-1",3,"id"]],template:function(e,a){e&1&&(o(0,"form",0)(1,"table",1)(2,"thead",2)(3,"tr"),_(4,Mt,1,0,"th",3),o(5,"th",3),l(6,"\u7DE8\u865F"),i(),o(7,"th",4),l(8,"\u8EAB\u5206\u5225"),i(),o(9,"th",5),l(10,"\u8EAB\u5206\u8B49\u865F/\u8B77\u7167\u865F\u78BC"),i(),o(11,"th",6),l(12,"\u6548\u671F"),i(),o(13,"th",3),l(14,"\u966A\u4F34\u8CC7\u683C"),i(),o(15,"th",3),l(16,"\u7121\u8B49\u4EF6"),i(),o(17,"th",3),l(18,"\u514C\u63DB\u5238\u865F\u78BC"),i(),o(19,"th",3),l(20,"\u7968\u50F9"),i(),o(21,"th",3),l(22,"\u8ECA\u5EC2/\u5EA7\u4F4D"),i(),_(23,Pt,2,0,"th",7),i()(),o(24,"tbody",8),h(25,nn,48,37,"tr",9,wt),i()()()),e&2&&(p("formGroup",a.form),r(4),u(a.editing()?4:-1),r(19),u(a.showMark()?23:-1),r(2),v(a.passengers()))},dependencies:[F,ie,G,U,te,ee,L,De,D,ne,P,W,oe,ae,Fe,Ne,Oe],styles:[".profile-col[_ngcontent-%COMP%]{min-width:78px}.id-col[_ngcontent-%COMP%]{max-width:144px}.expiry-col[_ngcontent-%COMP%]{max-width:139px}.expiry-col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:0}.mark-col[_ngcontent-%COMP%]{max-width:100px;word-break:break-all}"]})};var on=(t,n)=>n.profile;function an(t,n){if(t&1&&(o(0,"div",3),l(1),i()),t&2){let e=n.$implicit;r(),V("(",e.promotionName,"V ",e.profile," ",e.count,"\u5F35)")}}function rn(t,n){if(t&1&&(o(0,"div",0)(1,"div",1),l(2),i(),o(3,"div",2),h(4,an,2,3,"div",3,on),i()()),t&2){let e=n;r(2),c(e.code),r(2),v(e.tickets)}}var ze=class t{promotionTickets=f(null);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-promotion-tickets"]],inputs:{promotionTickets:[1,"promotionTickets"]},decls:1,vars:1,consts:[[1,"d-flex","flex-1"],[1,"me-2"],[1,"text-danger"],[1,"float-start","me-1"]],template:function(e,a){if(e&1&&_(0,rn,6,1,"div",0),e&2){let d;u((d=a.promotionTickets())?0:-1,d)}},encapsulation:2})};function ln(t,n){if(t&1&&(o(0,"span"),l(1),i()),t&2){let e=n.$implicit;r(),c(e)}}function sn(t,n){if(t&1&&(l(0),h(1,ln,2,1,"span",null,M),l(3,` )
`)),t&2){let e=n;b(" ",e.totalPeople(),"\u4EBA ( "),r(),v(e.passengerProfiles())}}var He=class t{order=f();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-people-counter"]],inputs:{order:[1,"order"]},decls:1,vars:1,template:function(e,a){if(e&1&&_(0,sn,4,1),e&2){let d;u((d=a.order())?0:-1,d)}},encapsulation:2})};export{Ve as a,qe as b,Le as c,We as d,Ye as e,ze as f,He as g};
