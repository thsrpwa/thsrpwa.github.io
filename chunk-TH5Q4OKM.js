import{A as He,a as Mt,b as kt,c as Ce,d as W,e as oe,f as ve,h as Ft,i as Se,j as Bt,k as At,l as xe,m as Nt,n as Pe,o as _e,p as Ye,q as Oe,r as Re,s as $t,t as ge,u as j,v as Q,w as ye,x as Ee,y as jt,z as qe}from"./chunk-HFASKEAS.js";import{Aa as t,Ba as S,C as bt,Ca as K,Da as x,Ea as _,G as ht,H as Ct,Ha as ot,J as vt,La as i,Ma as f,Na as X,Oa as ke,P as Le,Pa as gt,Q as O,Qa as Fe,R,Ra as he,Sa as Be,U as Ve,Va as yt,X as J,Y as P,Ya as Et,_ as F,a as ce,aa as l,b as ft,c as zt,cb as D,d as Ut,da as M,ea as ie,fa as E,ga as St,i as fe,ka as w,l as je,nb as Tt,oa as xt,ob as k,pa as c,qa as _t,ra as se,sb as Dt,tb as It,ua as T,wa as Z,x as be,xa as N,xb as wt,ya as $,za as n}from"./chunk-FCVKCJWF.js";var Lt=zt((rt,at)=>{"use strict";(function(a,o){typeof rt=="object"&&typeof at<"u"?at.exports=o():typeof define=="function"&&define.amd?define(o):(a=typeof globalThis<"u"?globalThis:a||self).dayjs=o()})(rt,function(){"use strict";var a=1e3,o=6e4,e=36e5,r="millisecond",m="second",s="minute",L="hour",U="day",de="week",H="month",dt="quarter",te="year",pe="date",pt="Invalid Date",Ht=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Gt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Wt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(h){var u=["th","st","nd","rd"],d=h%100;return"["+h+(u[(d-20)%10]||u[d]||u[0])+"]"}},nt=function(h,u,d){var b=String(h);return!b||b.length>=u?h:""+Array(u+1-b.length).join(d)+h},Qt={s:nt,z:function(h){var u=-h.utcOffset(),d=Math.abs(u),b=Math.floor(d/60),p=d%60;return(u<=0?"+":"-")+nt(b,2,"0")+":"+nt(p,2,"0")},m:function h(u,d){if(u.date()<d.date())return-h(d,u);var b=12*(d.year()-u.year())+(d.month()-u.month()),p=u.clone().add(b,H),C=d-p<0,v=u.clone().add(b+(C?-1:1),H);return+(-(b+(d-p)/(C?p-v:v-p))||0)},a:function(h){return h<0?Math.ceil(h)||0:Math.floor(h)},p:function(h){return{M:H,y:te,w:de,d:U,D:pe,h:L,m:s,s:m,ms:r,Q:dt}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(h){return h===void 0}},Ie="en",ae={};ae[Ie]=Wt;var ut="$isDayjsObject",it=function(h){return h instanceof Ne||!(!h||!h[ut])},Ae=function h(u,d,b){var p;if(!u)return Ie;if(typeof u=="string"){var C=u.toLowerCase();ae[C]&&(p=C),d&&(ae[C]=d,p=C);var v=u.split("-");if(!p&&v.length>1)return h(v[0])}else{var y=u.name;ae[y]=u,p=y}return!b&&p&&(Ie=p),p||!b&&Ie},B=function(h,u){if(it(h))return h.clone();var d=typeof u=="object"?u:{};return d.date=h,d.args=arguments,new Ne(d)},g=Qt;g.l=Ae,g.i=it,g.w=function(h,u){return B(h,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var Ne=function(){function h(d){this.$L=Ae(d.locale,null,!0),this.parse(d),this.$x=this.$x||d.x||{},this[ut]=!0}var u=h.prototype;return u.parse=function(d){this.$d=function(b){var p=b.date,C=b.utc;if(p===null)return new Date(NaN);if(g.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var v=p.match(Ht);if(v){var y=v[2]-1||0,I=(v[7]||"0").substring(0,3);return C?new Date(Date.UTC(v[1],y,v[3]||1,v[4]||0,v[5]||0,v[6]||0,I)):new Date(v[1],y,v[3]||1,v[4]||0,v[5]||0,v[6]||0,I)}}return new Date(p)}(d),this.init()},u.init=function(){var d=this.$d;this.$y=d.getFullYear(),this.$M=d.getMonth(),this.$D=d.getDate(),this.$W=d.getDay(),this.$H=d.getHours(),this.$m=d.getMinutes(),this.$s=d.getSeconds(),this.$ms=d.getMilliseconds()},u.$utils=function(){return g},u.isValid=function(){return this.$d.toString()!==pt},u.isSame=function(d,b){var p=B(d);return this.startOf(b)<=p&&p<=this.endOf(b)},u.isAfter=function(d,b){return B(d)<this.startOf(b)},u.isBefore=function(d,b){return this.endOf(b)<B(d)},u.$g=function(d,b,p){return g.u(d)?this[b]:this.set(p,d)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(d,b){var p=this,C=!!g.u(b)||b,v=g.p(d),y=function(me,Y){var ne=g.w(p.$u?Date.UTC(p.$y,Y,me):new Date(p.$y,Y,me),p);return C?ne:ne.endOf(U)},I=function(me,Y){return g.w(p.toDate()[me].apply(p.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(Y)),p)},A=this.$W,V=this.$M,G=this.$D,ue="set"+(this.$u?"UTC":"");switch(v){case te:return C?y(1,0):y(31,11);case H:return C?y(1,V):y(0,V+1);case de:var le=this.$locale().weekStart||0,we=(A<le?A+7:A)-le;return y(C?G-we:G+(6-we),V);case U:case pe:return I(ue+"Hours",0);case L:return I(ue+"Minutes",1);case s:return I(ue+"Seconds",2);case m:return I(ue+"Milliseconds",3);default:return this.clone()}},u.endOf=function(d){return this.startOf(d,!1)},u.$set=function(d,b){var p,C=g.p(d),v="set"+(this.$u?"UTC":""),y=(p={},p[U]=v+"Date",p[pe]=v+"Date",p[H]=v+"Month",p[te]=v+"FullYear",p[L]=v+"Hours",p[s]=v+"Minutes",p[m]=v+"Seconds",p[r]=v+"Milliseconds",p)[C],I=C===U?this.$D+(b-this.$W):b;if(C===H||C===te){var A=this.clone().set(pe,1);A.$d[y](I),A.init(),this.$d=A.set(pe,Math.min(this.$D,A.daysInMonth())).$d}else y&&this.$d[y](I);return this.init(),this},u.set=function(d,b){return this.clone().$set(d,b)},u.get=function(d){return this[g.p(d)]()},u.add=function(d,b){var p,C=this;d=Number(d);var v=g.p(b),y=function(V){var G=B(C);return g.w(G.date(G.date()+Math.round(V*d)),C)};if(v===H)return this.set(H,this.$M+d);if(v===te)return this.set(te,this.$y+d);if(v===U)return y(1);if(v===de)return y(7);var I=(p={},p[s]=o,p[L]=e,p[m]=a,p)[v]||1,A=this.$d.getTime()+d*I;return g.w(A,this)},u.subtract=function(d,b){return this.add(-1*d,b)},u.format=function(d){var b=this,p=this.$locale();if(!this.isValid())return p.invalidDate||pt;var C=d||"YYYY-MM-DDTHH:mm:ssZ",v=g.z(this),y=this.$H,I=this.$m,A=this.$M,V=p.weekdays,G=p.months,ue=p.meridiem,le=function(Y,ne,Me,$e){return Y&&(Y[ne]||Y(b,C))||Me[ne].slice(0,$e)},we=function(Y){return g.s(y%12||12,Y,"0")},me=ue||function(Y,ne,Me){var $e=Y<12?"AM":"PM";return Me?$e.toLowerCase():$e};return C.replace(Gt,function(Y,ne){return ne||function(Me){switch(Me){case"YY":return String(b.$y).slice(-2);case"YYYY":return g.s(b.$y,4,"0");case"M":return A+1;case"MM":return g.s(A+1,2,"0");case"MMM":return le(p.monthsShort,A,G,3);case"MMMM":return le(G,A);case"D":return b.$D;case"DD":return g.s(b.$D,2,"0");case"d":return String(b.$W);case"dd":return le(p.weekdaysMin,b.$W,V,2);case"ddd":return le(p.weekdaysShort,b.$W,V,3);case"dddd":return V[b.$W];case"H":return String(y);case"HH":return g.s(y,2,"0");case"h":return we(1);case"hh":return we(2);case"a":return me(y,I,!0);case"A":return me(y,I,!1);case"m":return String(I);case"mm":return g.s(I,2,"0");case"s":return String(b.$s);case"ss":return g.s(b.$s,2,"0");case"SSS":return g.s(b.$ms,3,"0");case"Z":return v}return null}(Y)||v.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(d,b,p){var C,v=this,y=g.p(b),I=B(d),A=(I.utcOffset()-this.utcOffset())*o,V=this-I,G=function(){return g.m(v,I)};switch(y){case te:C=G()/12;break;case H:C=G();break;case dt:C=G()/3;break;case de:C=(V-A)/6048e5;break;case U:C=(V-A)/864e5;break;case L:C=V/e;break;case s:C=V/o;break;case m:C=V/a;break;default:C=V}return p?C:g.a(C)},u.daysInMonth=function(){return this.endOf(H).$D},u.$locale=function(){return ae[this.$L]},u.locale=function(d,b){if(!d)return this.$L;var p=this.clone(),C=Ae(d,b,!0);return C&&(p.$L=C),p},u.clone=function(){return g.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},h}(),ct=Ne.prototype;return B.prototype=ct,[["$ms",r],["$s",m],["$m",s],["$H",L],["$W",U],["$M",H],["$y",te],["$D",pe]].forEach(function(h){ct[h[1]]=function(u){return this.$g(u,h[0],h[1])}}),B.extend=function(h,u){return h.$i||(h(u,Ne,B),h.$i=!0),B},B.locale=Ae,B.isDayjs=it,B.unix=function(h){return B(1e3*h)},B.en=ae[Ie],B.Ls=ae,B.p={},B})});var Ge=class a{constructor(o){this.router=o}goToBookingRecord(){this.router.navigate(["/mmi/tickets/new"],{queryParams:{test:1}})}exit(){this.router.navigate(["/mmi/main"])}static \u0275fac=function(e){return new(e||a)(M(It))};static \u0275cmp=E({type:a,selectors:[["app-tickets-head-buttons"]],decls:13,vars:0,consts:[[1,"bg-secondary","text-white","text-nowrap","d-flex","p-3"],["tabindex","-1",1,"btn","btn-primary","btn-lg","flex-1","fs-6"],["tabindex","-1",1,"btn","btn-dark","btn-lg","flex-1","fs-6","ms-2",3,"click"],["tabindex","-1",1,"btn","btn-dark","btn-lg","flex-1","fs-6","ms-2"],["tabindex","-1",1,"btn","btn-outline-primary","btn-lg","flex-1","fs-6","ms-4",3,"click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"button",1),i(2,"\u4E00\u822C\u8A02\u4F4D"),t(),n(3,"button",2),x("click",function(){return r.goToBookingRecord()}),i(4," \u8A02\u4F4D\u7D00\u9304\u4FEE\u6539\uFF0F\u53D6\u7968 "),t(),n(5,"button",3),i(6,"\u81EA\u7531\u5EA7(\u6307\u5B9A\u8ECA\u6B21)"),t(),n(7,"button",3),i(8,"\u6642\u523B\u8868"),t(),n(9,"button",3),i(10,"\u958B\u653E\u8A02\u4F4D\u65E5\u671F\u67E5\u8A62"),t(),n(11,"button",4),x("click",function(){return r.exit()}),i(12,"\u56DE\u4E3B\u756B\u9762"),t()())},styles:[".flex-1[_ngcontent-%COMP%]{flex:1}"]})};var We=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-tickets"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,r){e&1&&(S(0,"app-tickets-head-buttons"),n(1,"main",0),S(2,"router-outlet"),t())},dependencies:[Dt,Ge],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};var ee=Ut(Lt());var lt=(e=>(e[e.general=1]="general",e[e.group=2]="group",e))(lt||{});var Vt={code:null,message:null,data:{departStationList:["\u5357\u6E2F","\u53F0\u5317","\u677F\u6A4B","\u6843\u5712","\u65B0\u7AF9","\u82D7\u6817","\u53F0\u4E2D","\u5F70\u5316","\u96F2\u6797","\u5609\u7FA9","\u53F0\u5357","\u5DE6\u71DF"],arrivalStationList:["\u5357\u6E2F","\u53F0\u5317","\u677F\u6A4B","\u6843\u5712","\u65B0\u7AF9","\u82D7\u6817","\u53F0\u4E2D","\u5F70\u5316","\u96F2\u6797","\u5609\u7FA9","\u53F0\u5357","\u5DE6\u71DF"],profile:[{content:"\u6210\u4EBA",code:"F",isEnable:!0},{content:"\u5B69\u7AE5",code:"H",isEnable:!0},{content:"\u611B\u5FC3",code:"W",isEnable:!0},{content:"\u656C\u8001",code:"E",isEnable:!0},{content:"\u5B78\u751F",code:"P",isEnable:!0},{content:"\u7279\u60E0\u5168",code:"S",isEnable:!0},{content:"\u7279\u60E0\u534A",code:"M",isEnable:!0}],classType:["\u6A19\u6E96\u8ECA\u5EC2","\u5546\u52D9\u8ECA\u5EC2","\u8F2A\u6905\u5EA7\u4F4D"],sellingDate:{},promotionOfProjectData:{promotionTypeList:[{id:0,name:"\u6240\u6709\u5206\u985E"},{id:1,name:"\u516C\u52D9\u4E58\u8ECA"},{id:2,name:"\u4F01\u696D\u6703\u54E1"},{id:3,name:"\u5176\u4ED6"}],promotionDataList:[{promotionCode:"P001",projectName:"\u516C\u52D9\u4E58\u8ECA",projectDiscount:"0%",promotionTypeId:1,stdClassToGroupBook:!0,bizClassToGroupBook:!1,tweList:!0},{promotionCode:"P115",projectName:"\u4F01\u696D\u6703\u54E1",projectDiscount:"\u6298100",promotionTypeId:2,stdClassToGroupBook:!0,bizClassToGroupBook:!1,tweList:!1}]}}};var Pt={code:null,message:null,data:{outbound:[{index:1,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:2,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]}],inbound:[{index:1,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",avlSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"}]},{index:2,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",avlSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"}]},{index:3,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:4,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:5,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:6,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:7,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:8,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:9,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:10,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:11,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]},{index:12,isTick:!0,available:!0,trainNumber:"2855",departDate:"11/08",departTime:"07:00",arrivalDate:"11/08",arrivalTime:"09:00",elapseTime:"00:54",aVLSeatCount:"Y8",trainDiscount:"Y",projects:[{name:"\u5B78\u751F88",colorCode:"C1BE45"},{name:"\u5C11\u5E7488",colorCode:"C1BE45"}]}],promotion:{code:"P001",projectName:"\u516C\u52D9\u4E58\u8ECA",projectDiscount:"-100"}}};var re=class a{disabled=P(!1);personalId=ie("");coperateId=ie("");enabledPidCheck=D(()=>!this.disabled()&&(this.personalId()||this.coperateId()));onPidCheck(){console.log("onPidCheck")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-member-code"]],inputs:{disabled:[1,"disabled"],personalId:[1,"personalId"],coperateId:[1,"coperateId"]},outputs:{personalId:"personalIdChange",coperateId:"coperateIdChange"},decls:12,vars:5,consts:[[1,"w-100","d-flex","align-items-center"],["for","coperateId",1,"text-nowrap","m-1"],[1,"m-1"],["id","coperateId",1,"form-control","form-control-sm","fs-6",3,"ngModelChange","ngModel","disabled"],["for","personalId",1,"text-nowrap","m-1"],["id","personalId",1,"form-control","form-control-sm","fs-6",3,"ngModelChange","ngModel","disabled"],["type","button",1,"btn","btn-secondary","btn-sm","fs-6",3,"click","disabled"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"label",1),i(2,"\u4F01\u696D\u6703\u54E1\u7DE8\u865F"),t(),n(3,"div",2)(4,"input",3),x("ngModelChange",function(s){return r.coperateId.set(s)}),t()(),n(5,"label",4),i(6,"\u500B\u4EBA\u6703\u54E1\u7DE8\u865F"),t(),n(7,"div",2)(8,"input",5),x("ngModelChange",function(s){return r.personalId.set(s)}),t()(),n(9,"div",2)(10,"button",6),x("click",function(){return r.onPidCheck()}),i(11," PID\u6703\u54E1\u8CC7\u6599\u6AA2\u6838/\u986F\u793A "),t()()()),e&2&&(l(4),c("ngModel",r.coperateId())("disabled",r.disabled()||!!r.personalId()),l(4),c("ngModel",r.personalId())("disabled",r.disabled()||!!r.coperateId()),l(2),c("disabled",!r.enabledPidCheck()))},dependencies:[k,j,Ce,oe,Ft],encapsulation:2})};var Qe=class a{constructor(o){this.ngbActiveModal=o}title="";message="";static \u0275fac=function(e){return new(e||a)(M(jt))};static \u0275cmp=E({type:a,selectors:[["app-message-modal"]],inputs:{title:"title",message:"message"},decls:9,vars:2,consts:[[1,"modal-header","bg-warning-subtle"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h5",1),i(2),t()(),n(3,"div",2)(4,"p"),i(5),t()(),n(6,"div",3)(7,"button",4),x("click",function(){return r.ngbActiveModal.dismiss()}),i(8,"\u78BA\u8A8D"),t()()),e&2&&(l(2),f(r.title),l(3),f(r.message))},encapsulation:2})};var ze=class a{constructor(o){this.ngbModal=o}show(o,e){let r=this.ngbModal.open(Qe,{size:"sm",centered:!0,backdrop:"static"});r.componentInstance.title=o,r.componentInstance.message=e}static \u0275fac=function(e){return new(e||a)(vt(qe))};static \u0275prov=ht({token:a,factory:a.\u0275fac,providedIn:"root"})};var en=(a,o)=>o.code,tn=(a,o)=>o.name,nn=(a,o)=>o.id,on=(a,o)=>o.promotionCode;function rn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function an(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function ln(a,o){if(a&1&&(n(0,"div",16)(1,"label",51),i(2),t(),S(3,"input",52),t()),a&2){let e=o.$implicit,r=o.$index;l(),c("for","profile-"+e.code),l(),f(e.content),l(),c("id","profile-"+e.code)("formControlName",r)}}function mn(a,o){if(a&1&&(n(0,"div",7),S(1,"input",53),n(2,"label",54),i(3),t()()),a&2){let e=o.$implicit;l(),ot("id","classType-",e.value,""),c("formControlName","classType")("value",e.value),xt("disabled",e.disabled?"true":null),l(),ot("for","classType-",e.value,""),l(),f(e.name)}}function sn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function dn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function pn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function un(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function cn(a,o){if(a&1&&(n(0,"div",19),i(1,"\u56DE\u7A0B"),t(),n(2,"div",20)(3,"label",55),i(4,"\u51FA\u767C\u65E5\u671F"),t(),n(5,"div",22),S(6,"input",56),t(),n(7,"div",24)(8,"label",57),i(9,"\u51FA\u767C\u6642\u9593"),t(),n(10,"select",58),N(11,pn,2,2,"option",6,Z),t(),n(13,"label",59),i(14,"\u6642"),t(),n(15,"select",60),N(16,un,2,2,"option",6,Z),t(),n(18,"label",61),i(19,"\u5206"),t()(),n(20,"select",62)(21,"option",31),i(22,"\u4EE5\u51FA\u767C\u6642\u9593\u67E5\u8A62"),t(),n(23,"option",32),i(24,"\u4EE5\u5230\u9054\u6642\u9593\u67E5\u8A62"),t()(),n(25,"label",63),i(26,"\u6307\u5B9A\u8ECA\u6B21"),t(),S(27,"input",64),t()),a&2){let e=_();l(11),$(e.hours()),l(5),$(e.minutes())}}function fn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e.id),l(),f(e.name)}}function bn(a,o){if(a&1&&(n(0,"option",6),i(1),t()),a&2){let e=o.$implicit;c("value",e.promotionCode),l(),f(e.projectName)}}var Ot=[{content:"\u6210\u4EBA",code:"F",isEnable:!0},{content:"\u5B69\u7AE5",code:"H",isEnable:!0},{content:"\u611B\u5FC3",code:"W",isEnable:!0},{content:"\u656C\u8001",code:"E",isEnable:!0},{content:"\u5B78\u751F",code:"P",isEnable:!0},{content:"\u7279\u60E0\u5168",code:"S",isEnable:!0},{content:"\u7279\u60E0\u534A",code:"M",isEnable:!0}],Rt=[{name:"\u6A19\u6E96\u8ECA\u5EC2",value:1,disabled:!1},{name:"\u5546\u52D9\u8ECA\u5EC2",value:2,disabled:!1},{name:"\u8F2A\u6905\u5EA7\u4F4D",value:3,disabled:!1}],Ue=class a{constructor(o,e,r,m){this.formBuilder=o;this.loadingService=e;this.messageService=r;this.destroyRef=m;this.form=this.formBuilder.group({profiles:this.formBuilder.array(Ot.map(()=>this.formBuilder.control(null))),departStation:[null,W.required],arrivalStation:[null,W.required],classType:[Rt[0].value,W.required],roundTrip:[!1],departDate:[(0,ee.default)().format("YYYY-MM-DD"),W.required],departHour:[(0,ee.default)().format("HH"),W.required],departMinute:[(0,ee.default)().format("mm"),W.required],departSearchMethod:[1],departApointTrainNumber:[null],returnDate:[(0,ee.default)().add(1,"day").format("YYYY-MM-DD"),W.required],returnHour:[(0,ee.default)().format("HH"),W.required],returnMinute:[(0,ee.default)().format("mm"),W.required],returnSearchMethod:[1],returnApointTrainNumber:[null],promotionType:[0],promotionCodeList:[null],promotionCode:[null]}),this.promotionType=Ee(this.form.get("promotionType").valueChanges.pipe(je(s=>parseInt(s,10)),bt(()=>this.form.patchValue({promotionCodeList:null}))),{initialValue:0}),this.totalPeople=Ee(this.form.valueChanges.pipe(je(()=>this.form.get("profiles").controls.reduce((s,L)=>s+(L.value||0),0))),{initialValue:0}),this.roundTrip=Ee(this.form.get("roundTrip").valueChanges),this.classType=Ee(this.form.get("classType").valueChanges),this.error=Ee(this.form.valueChanges.pipe(je(()=>this.validate())),{initialValue:""}),this.loadingService.start(),this.request().pipe(ye(this.destroyRef)).subscribe({next:s=>{this.loadingService.stop(),this.departStationList.set(s.data.departStationList),this.arrivalStationList.set(s.data.arrivalStationList),this.promotionTypeList.set(s.data.promotionOfProjectData.promotionTypeList),this.promotionDataList.set(s.data.promotionOfProjectData.promotionDataList),this.profiles.set(s.data.profile),this.form.setControl("profiles",this.formBuilder.array(s.data.profile.map(()=>this.formBuilder.control(null)))),this.classTypes.update(L=>(L.forEach(U=>{let de=s.data.classType.find(H=>H===U.name);U.disabled=!de}),L)),this.form.patchValue({departStation:this.departStationList()[0],arrivalStation:this.arrivalStationList()[1]})},error:s=>{console.error(s),this.loadingService.stop()},complete:()=>{this.loadingService.stop()}})}confirm=J();bookingType=lt;form;profiles=F(Ot);departStationList=F([]);arrivalStationList=F([]);totalPeople;classType;classTypes=F(Rt);promotionTypeList=F([]);promotionDataList=F([]);hours=F(Array.from({length:24},(o,e)=>e.toString().padStart(2,"0")));minutes=F(Array.from({length:60},(o,e)=>e.toString().padStart(2,"0")));promotionType;roundTrip;personalId=F("");coperateId=F("");error;filteredPromotionDataList=D(()=>{let o=this.promotionType();return this.promotionDataList().filter(e=>e.promotionTypeId===o)});disableGernalBook=D(()=>this.totalPeople()>10);disableGroupBook=D(()=>this.roundTrip()||this.classType()===3||this.totalPeople()<=10);swapStation(){let o=this.form.get("departureStation")?.value,e=this.form.get("arrivalStation")?.value;this.form.get("departureStation")?.setValue(e),this.form.get("arrivalStation")?.setValue(o)}validate(){if(this.form.get("departStation")?.value===this.form.get("arrivalStation")?.value)return"\u51FA\u767C\u7AD9\u8207\u5230\u9054\u7AD9\u9700\u4E0D\u540C";let o=this.form.get("profiles")?.value,e=o.filter(L=>!!L).length;if(e>4)return"\u6700\u591A\u53EA\u80FD\u540C\u6642\u8CFC\u8CB7\u56DB\u7A2E\u8EAB\u5206\u5225";if(e<1)return"\u81F3\u5C11\u9700\u8F38\u5165\u4E00\u500B\u8EAB\u5206\u5225\u7684\u5F35\u6578";let r=Math.max(...o.map(L=>L));if(this.form.get("roundTrip")?.value&&r>5)return"\u4E00\u822C\u8A02\u4F4D\u53BB\u56DE\u7A0B\u6700\u591A\u50C5\u80FD\u9078\u64C75\u5F35\u7968";let m=(0,ee.default)(`${this.form.get("departDate")?.value} ${this.form.get("departHour")?.value}:${this.form.get("departMinute")?.value}`),s=(0,ee.default)(`${this.form.get("returnDate")?.value} ${this.form.get("returnHour")?.value}:${this.form.get("returnMinute")?.value}`);return s.isBefore(m)||s.isSame(m)?"\u8A02\u8CFC\u53BB\u56DE\u7A0B\uFF0C\u56DE\u7A0B\u6642\u9593\u65E9\u65BC\u53BB\u7A0B\u6642\u9593":""}onSubmit(o){let e=this.validate();if(e){this.messageService.show("\u932F\u8AA4",e);return}let r=ft(ce({},this.form.value),{bookingType:o});r.tripType=r.roundTrip?2:1;let m=this.profiles();r.profile=r.profiles.map((s,L)=>({code:m[L].code,quantity:s})).filter(s=>s.quantity),r.membership={personalId:r.personalId,coperateId:r.coperateId},r.departTime=`${r.departHour}:${r.departMinute}`,r.returnTime=`${r.returnHour}:${r.returnMinute}`,r.promoCode=r.promotionCode||r.promotionCodeList,r.allTrain=0,r.requeryTrain=!1,r.personalId=this.personalId(),r.coperateId=this.coperateId(),["profiles","promotionCodeList","promotionCode","roundTrip","departHour","departMinute","returnHour","returnMinute"].forEach(s=>{delete r[s]}),this.loadingService.start(),this.request2(r).pipe(ye(this.destroyRef)).subscribe({next:s=>{this.loadingService.stop(),this.confirm.emit({query:r,data:s.data})},error:s=>{console.error(s),this.loadingService.stop()},complete:()=>{this.loadingService.stop()}})}request(){return fe(Vt).pipe(be(300))}request2(o){return console.log(o),fe(Pt).pipe(be(300))}static \u0275fac=function(e){return new(e||a)(M(ge),M(He),M(ze),M(Ve))};static \u0275cmp=E({type:a,selectors:[["app-step1"]],outputs:{confirm:"confirm"},decls:95,vars:6,consts:[[1,"py-2",3,"formGroup"],[1,"border","rounded","p-3","shadow-sm","bg-white","fs-6","m-0","w-100"],[1,"row","mb-2","align-items-center","w-100"],["for","departStation",1,"col-auto"],[1,"col"],["id","departStation","formControlName","departStation",1,"form-select","form-select-sm","fs-6"],[3,"value"],[1,"col-auto"],["href","javascript:;",3,"click"],[1,"fa-solid","fa-right-left"],["for","arrivalStation",1,"col-auto"],["id","arrivalStation","formControlName","arrivalStation",1,"form-select","form-select-sm","fs-6"],["type","checkbox","id","roundTrip","formControlName","roundTrip",1,"form-check-input","me-1","fs-6"],["for","roundTrip",1,"form-check-label"],[1,"col-auto","text-end","text-warning"],["formArrayName","profiles",1,"row","mb-2","align-items-center","w-100"],[1,"col","d-flex","align-items-center","p-0","me-3"],[1,"row","mb-2","w-100"],[3,"personalIdChange","coperateIdChange"],[1,"w-100","border","rounded-top","bg-warning-subtle","mt-2","p-1"],[1,"border","rounded","p-3","shadow-sm","fs-6","m-0","w-100","d-flex","align-items-center"],["for","departDate",1,"text-nowrap","m-1"],[1,"w-25","d-flex","align-items-center","justify-content-start"],["type","date","id","departDate","formControlName","departDate",1,"form-control","fs-6"],[1,"d-flex","align-items-center"],["for","departHour",1,"text-nowrap","m-1"],["id","departHour","formControlName","departHour",1,"form-select","form-select-sm","fs-6","w-auto"],["for","departHour",1,"m-1"],["id","departMinute","formControlName","departMinute",1,"form-select","form-select-sm","fs-6","w-auto"],["for","departMinute",1,"m-1"],["formControlName","departSearchMethod",1,"form-select","form-select-sm","fs-6"],["value","1"],["value","2"],["for","departApointTrainNumber",1,"text-center","m-1","text-nowrap"],["type","text","id","departApointTrainNumber","formControlName","departApointTrainNumber",1,"fs-6","form-control","form-control-sm","flex-grow-1"],[1,"border","rounded","shadow-sm","mt-2","p-3","fs-6"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"border","rounded","d-flex","align-items-center","px-2","py-1","flex-grow-1","me-2"],[1,"d-flex","align-items-center","me-3","w-50"],["for","promotionType",1,"me-2","text-nowrap"],["id","promotionType","formControlName","promotionType",1,"form-select","form-select-sm","w-100"],[1,"d-flex","align-items-center","w-50"],["for","promotionCodeList",1,"me-2","text-nowrap"],["id","promotionCodeList","formControlName","promotionCodeList",1,"form-select","form-select-sm","w-100"],[1,"mx-2"],[1,"border","rounded","d-flex","align-items-center","px-2","py-1",2,"min-width","250px"],["for","promotionCode",1,"me-2","text-nowrap"],["type","text","id","promotionCode","formControlName","promotionCode",1,"form-control","form-control-sm"],[1,"d-flex","align-items-center","gap-2","fs-6","w-100","justify-content-center","mt-2"],["type","button",1,"btn","bg-primary","text-white","px-4",3,"click","disabled"],["type","button",1,"btn","btn-secondary","px-4",3,"click","disabled"],[1,"text-center","text-nowrap","me-1",3,"for"],["type","number","min","0",1,"fs-6","form-control","form-control-sm",3,"id","formControlName"],["type","radio",1,"form-check-input","me-1",3,"id","formControlName","value"],[1,"form-check-label",3,"for"],["for","returnDate",1,"text-nowrap","m-1"],["type","date","id","returnDate","formControlName","returnDate",1,"form-control","fs-6"],["for","returnHour",1,"text-nowrap","m-1"],["id","returnHour","formControlName","returnHour",1,"form-select","form-select-sm","fs-6","w-auto"],["for","returnHour",1,"m-1"],["id","returnMinute","formControlName","returnMinute",1,"form-select","form-select-sm","fs-6","w-auto"],["for","returnMinute",1,"m-1"],["formControlName","returnSearchMethod",1,"form-select","form-select-sm","fs-6"],["for","returnApointTrainNumber",1,"text-center","m-1","text-nowrap"],["type","text","id","returnApointTrainNumber","formControlName","returnApointTrainNumber",1,"fs-6","form-control","form-control-sm","flex-grow-1"]],template:function(e,r){e&1&&(n(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),i(4,"\u51FA\u767C\u7AD9"),t(),n(5,"div",4)(6,"select",5),N(7,rn,2,2,"option",6,Z),t()(),n(9,"div",7)(10,"a",8),x("click",function(){return r.swapStation()}),S(11,"i",9),t()(),n(12,"label",10),i(13,"\u5230\u9054\u7AD9"),t(),n(14,"div",4)(15,"select",11),N(16,an,2,2,"option",6,Z),t()(),n(18,"div",7),S(19,"input",12),n(20,"label",13),i(21,"\u53BB\u56DE\u7968"),t()(),n(22,"div",14)(23,"span"),i(24,"\u7E3D\u4EBA\u6578 "),t(),n(25,"strong"),i(26),t()()(),n(27,"div",15)(28,"div",4),i(29,"\u8EAB\u5206\u5225/\u5F35\u6578"),t(),N(30,ln,4,4,"div",16,en),t(),n(32,"div",17)(33,"div",7),i(34,"\u8ECA\u5EC2\u7A2E\u985E"),t(),N(35,mn,4,8,"div",7,tn),t(),n(37,"app-member-code",18),x("personalIdChange",function(s){return r.personalId.set(s)})("coperateIdChange",function(s){return r.coperateId.set(s)}),t()(),n(38,"div",19),i(39,"\u53BB\u7A0B"),t(),n(40,"div",20)(41,"label",21),i(42,"\u51FA\u767C\u65E5\u671F"),t(),n(43,"div",22),S(44,"input",23),t(),n(45,"div",24)(46,"label",25),i(47,"\u51FA\u767C\u6642\u9593"),t(),n(48,"select",26),N(49,sn,2,2,"option",6,Z),t(),n(51,"label",27),i(52,"\u6642"),t(),n(53,"select",28),N(54,dn,2,2,"option",6,Z),t(),n(56,"label",29),i(57,"\u5206"),t()(),n(58,"select",30)(59,"option",31),i(60,"\u4EE5\u51FA\u767C\u6642\u9593\u67E5\u8A62"),t(),n(61,"option",32),i(62,"\u4EE5\u5230\u9054\u6642\u9593\u67E5\u8A62"),t()(),n(63,"label",33),i(64,"\u6307\u5B9A\u8ECA\u6B21"),t(),S(65,"input",34),t(),w(66,cn,28,0),n(67,"div",35)(68,"div",36)(69,"div",37)(70,"div",38)(71,"label",39),i(72,"\u5C08\u6848\u5206\u985E"),t(),n(73,"select",40),N(74,fn,2,2,"option",6,nn),t()(),n(76,"div",41)(77,"label",42),i(78,"\u4FC3\u92B7\u4EE3\u78BC"),t(),n(79,"select",43)(80,"option",6),i(81,"\u8ACB\u9078\u64C7"),t(),N(82,bn,2,2,"option",6,on),t()()(),n(84,"span",44),i(85,"\u6216"),t(),n(86,"div",45)(87,"label",46),i(88,"\u4FC3\u92B7\u4EE3\u78BC"),t(),S(89,"input",47),t()()(),n(90,"div",48)(91,"button",49),x("click",function(){return r.onSubmit(r.bookingType.general)}),i(92," \u4E00\u822C\u8A02\u4F4D "),t(),n(93,"button",50),x("click",function(){return r.onSubmit(r.bookingType.group)}),i(94," \u5718\u9AD4\u8A02\u4F4D "),t()()()),e&2&&(c("formGroup",r.form),l(7),$(r.departStationList()),l(9),$(r.arrivalStationList()),l(10),f(r.totalPeople()),l(4),$(r.profiles()),l(5),$(r.classTypes()),l(14),$(r.hours()),l(5),$(r.minutes()),l(12),T(r.roundTrip()?66:-1),l(8),$(r.promotionTypeList()),l(6),c("value",null),l(2),$(r.filteredPromotionDataList()),l(9),c("disabled",r.disableGernalBook()),l(2),c("disabled",r.disableGroupBook()))},dependencies:[k,j,Se,Oe,Re,Ce,Bt,kt,Ye,At,oe,ve,$t,Q,xe,_e,Pe,re],encapsulation:2})};var hn=(a,o)=>o.index,Cn=(a,o)=>o.name;function vn(a,o){if(a&1&&(n(0,"span",5),i(1),t()),a&2){let e=_();l(),gt("",e.promotion().code," - ",e.promotion().projectName," ",e.promotion().projectDiscount,"%")}}function Sn(a,o){if(a&1&&(n(0,"option",9),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function xn(a,o){if(a&1&&(n(0,"option",9),i(1),t()),a&2){let e=o.$implicit;c("value",e),l(),f(e)}}function _n(a,o){if(a&1&&(n(0,"span",26),i(1),t()),a&2){let e=o.$implicit;_t("background-color","#"+e.colorCode),l(),X(" ",e==null?null:e.name," ")}}function gn(a,o){if(a&1){let e=K();n(0,"tr",21),x("click",function(){let m=O(e).$implicit,s=_();return R(s.index.set(m.index))}),n(1,"td")(2,"input",22),x("change",function(){let m=O(e).$implicit,s=_();return R(s.index.set(m.index))}),t()(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t(),n(11,"td"),i(12),t(),n(13,"td"),i(14),t(),n(15,"td",23)(16,"div",24),N(17,_n,2,3,"span",25,Cn),t()()()}if(a&2){let e=o.$implicit,r=_();l(2),c("name",r.prefix()+"shift-index")("value",e.index)("checked",r.index()===e.index),l(2),f(e.trainNumber),l(2),f(e.departTime),l(2),f(e.arrivalTime),l(2),f(e.elapseTime),l(2),f(e.aVLSeatCount),l(2),f(e.trainDiscount),l(3),$(e.projects)}}var Je=class a{constructor(o){this.formBuilder=o;this.form=this.formBuilder.group({hour:[this.hour()],minute:[this.minute()],searchMethod:[this.searchMethod()]})}search=J();query=P(null);records=P([]);outbound=P(!0);promotion=P(null);index=ie(0);hours=F(Array.from({length:24},(o,e)=>e.toString().padStart(2,"0")));minutes=F(Array.from({length:60},(o,e)=>e.toString().padStart(2,"0")));prefix=D(()=>this.outbound()?"outbound":"inbound");queryObj=D(()=>this.query()||{});fromStation=D(()=>this.queryObj()[this.outbound()?"departStation":"arrivalStation"]);toStation=D(()=>this.queryObj()[this.outbound()?"arrivalStation":"departStation"]);date=D(()=>new Date(this.queryObj()[this.outbound()?"departDate":"returnDate"]||0));time=D(()=>(this.queryObj()[this.outbound()?"departTime":"returnTime"]||"").split(":"));searchMethod=D(()=>this.queryObj()[this.outbound()?"departSearchMethod":"returnSearchMethod"]||1);hour=D(()=>this.time()[0]);minute=D(()=>this.time()[1]);form;ngOnChanges(o){if(o.query&&this.form.patchValue({hour:this.hour(),minute:this.minute(),searchMethod:this.searchMethod()}),o.records){let e=this.records();e.length&&setTimeout(()=>{this.index.set(e[0].index)},0)}}onSubmit(){this.search.emit(this.form.value)}static \u0275fac=function(e){return new(e||a)(M(ge))};static \u0275cmp=E({type:a,selectors:[["app-shifts"]],inputs:{query:[1,"query"],records:[1,"records"],outbound:[1,"outbound"],promotion:[1,"promotion"],index:[1,"index"]},outputs:{search:"search",index:"indexChange"},features:[Le],decls:56,vars:17,consts:[[1,"d-flex","flex-column","h-100"],[1,"d-flex","align-items-center","mb-1","fw-bold","p-2"],[1,"me-1","text-danger"],[1,"me-1"],[1,"me-2"],[1,"fw-bold","text-danger","me-1"],[1,"d-flex","align-items-center","flex-wrap","gap-2","ms-auto",3,"ngSubmit","formGroup"],[3,"for"],["formControlName","hour",1,"form-select","form-select-sm","w-auto",3,"id"],[3,"value"],["formControlName","minute",1,"form-select","form-select-sm","w-auto",3,"id"],["formControlName","searchMethod",1,"form-select","form-select-sm","w-auto","me-1","fw-bold",3,"id"],["value","1"],["value","2"],[1,"btn","btn-sm","btn-primary","fw-bold"],[1,"flex-1","overflow-auto"],[1,"table","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],[1,"text-nowrap","w-25"],["role","button"],["role","button",3,"click"],["type","radio",1,"form-check-input","me-1",3,"change","name","value","checked"],[1,"w-25"],[1,"d-flex","flex-wrap","justify-content-start","w-100"],[1,"badge","me-1","mb-1",3,"backgroundColor"],[1,"badge","me-1","mb-1"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),i(3),t(),n(4,"span",3),i(5),t(),n(6,"span",3),i(7,"\u2192"),t(),n(8,"span",4),i(9),t(),n(10,"span",4),i(11),yt(12,"date"),t(),w(13,vn,2,3,"span",5),n(14,"form",6),x("ngSubmit",function(){return r.onSubmit()}),n(15,"label",7),i(16,"\u6642\u9593:"),t(),n(17,"select",8),N(18,Sn,2,2,"option",9,Z),t(),n(20,"label",7),i(21,"\u6642"),t(),n(22,"select",10),N(23,xn,2,2,"option",9,Z),t(),n(25,"label",7),i(26,"\u5206"),t(),n(27,"select",11)(28,"option",12),i(29,"\u4EE5\u51FA\u767C\u6642\u9593\u67E5\u8A62"),t(),n(30,"option",13),i(31,"\u4EE5\u5230\u9054\u6642\u9593\u67E5\u8A62"),t()(),n(32,"button",14),i(33,"\u67E5\u8A62"),t()()(),n(34,"div",15)(35,"table",16)(36,"thead",17)(37,"tr"),S(38,"th"),n(39,"th",18),i(40,"\u8ECA\u6B21"),t(),n(41,"th",18),i(42,"\u51FA\u767C\u6642\u9593"),t(),n(43,"th",18),i(44,"\u5230\u9054\u6642\u9593"),t(),n(45,"th",18),i(46,"\u884C\u8ECA\u6642\u9593"),t(),n(47,"th",18),i(48,"\u53EF\u552E\u5EA7\u4F4D\u6578"),t(),n(49,"th",18),i(50,"\u512A\u60E0*"),t(),n(51,"th",19),i(52,"\u5C08\u6848*"),t()()(),n(53,"tbody"),N(54,gn,19,9,"tr",20,hn),t()()()()),e&2&&(l(3),f(r.outbound()?"\u53BB\u7A0B\u5217\u8ECA":"\u56DE\u7A0B\u5217\u8ECA"),l(2),f(r.fromStation()),l(4),f(r.toStation()),l(2),f(Et(12,12,r.date(),"MM/dd (EEEEE)","","zh")),l(2),T(r.promotion()?13:-1),l(),c("formGroup",r.form),l(),c("for",r.prefix()+"hour"),l(2),c("id",r.prefix()+"hour"),l(),$(r.hours()),l(2),c("for",r.prefix()+"hour"),l(2),c("id",r.prefix()+"minute"),l(),$(r.minutes()),l(2),c("for",r.prefix()+"minute"),l(2),c("id",r.prefix()+"searchMethod"),l(27),$(r.records()))},dependencies:[k,Tt,j,Se,Oe,Re,Ye,oe,ve,Q,xe,_e],encapsulation:2})};var st={code:null,message:null,data:{tripType:2,isGroup:!1,trainInfo:{outbound:{discount:"Y",trainNumber:"0567",departStation:"\u677F\u6A4B",departDate:"11/08",departTime:"09:00",departDay:"FAR",arrivalStation:"\u53F0\u4E2D",arrivalDate:"11/08",arrivalTime:"11:00",arrivalDay:"FAR",elapseTime:"00:51",classType:"\u6A19\u6E96\u8ECA\u5EC2"},inbound:{discount:"Y",trainNumber:"0888",departStation:"\u53F0\u4E2D",departDate:"11/09",departTime:"17:00",departDay:"SAT",arrivalStation:"\u677F\u6A4B",arrivalDate:"11/09",arrivalTime:"19:00",arrivalDay:"SAT",elapseTime:"00:55",classType:"\u6A19\u6E96\u8ECA\u5EC2"}},membership:{personalId:"",coperateId:""},passengerInfo:[{index:"1",profile:"\u6210\u4EBA",outbound:{fare:"700",car:"05",seat:"2E"},inbound:{fare:"700",car:"02",seat:"1A"}},{index:"2",profile:"\u5B69\u7AE5",outbound:{fare:"700",car:"05",seat:"2E"},inbound:{fare:"700",car:"02",seat:"1A"}},{index:"3",profile:"\u611B\u5FC3",outbound:{fare:"700",car:"05",seat:"2E"},inbound:{fare:"700",car:"02",seat:"1A"}},{index:"4",profile:"\u656C\u8001",outbound:{fare:"700",car:"05",seat:"2E"},inbound:{fare:"700",car:"02",seat:"1A"}}],promotion:{code:"P001",projectName:"\u516C\u52D9\u4E58\u8ECA",projectDiscount:"-100"}}};function yn(a,o){if(a&1){let e=K();n(0,"div",3)(1,"app-shifts",7),Be("indexChange",function(m){O(e);let s=_();return he(s.inboundIndex,m)||(s.inboundIndex=m),R(m)}),x("search",function(m){O(e);let s=_();return R(s.onInboundSearch(m))}),t()()}if(a&2){let e=_();l(),c("records",e.inbound())("promotion",e.promotion())("query",e.query()),Fe("index",e.inboundIndex),c("outbound",!1)}}var Ze=class a{constructor(o,e){this.loadingService=o;this.destroyRef=e}confirm=J();back=J();query=ie(null);data=ie(null);inbound=D(()=>this.data()?.inbound||[]);outbound=D(()=>this.data()?.outbound||[]);promotion=D(()=>this.data()?.promotion);showAll=D(()=>this.query()?.allTrain===1);roundTrip=D(()=>this.query()?.tripType===2);outboundIndex=0;inboundIndex=0;onOutboundSearch(o){this.query.update(e=>(e.departTime=`${o.hour}:${o.minute}`,e.departSearchMethod=o.searchMethod,ce({},e))),this.updateQuery()}onInboundSearch(o){this.query.update(e=>(e.returnTime=`${o.hour}:${o.minute}`,e.returnSearchMethod=o.searchMethod,ce({},e))),this.updateQuery()}onShowAll(){this.query.update(o=>(o.allTrain=o.allTrain===0?1:0,ce({},o))),this.updateQuery()}onConfirm(){let o={outboundTrainIndex:this.outboundIndex,inboundTrainIndex:this.inboundIndex};this.loadingService.start(),this.request(o).pipe(ye(this.destroyRef)).subscribe({next:e=>{this.loadingService.stop(),this.confirm.emit(e.data)},error:e=>{console.error(e),this.loadingService.stop()},complete:()=>{this.loadingService.stop()}})}request(o){return console.log(o),fe(st).pipe(be(300))}updateQuery(){console.log(this.query()),this.loadingService.start(),fe(st).pipe(be(300),ye(this.destroyRef)).subscribe({next:()=>{this.loadingService.stop()},error:o=>{console.error(o),this.loadingService.stop()},complete:()=>{this.loadingService.stop()}})}static \u0275fac=function(e){return new(e||a)(M(He),M(Ve))};static \u0275cmp=E({type:a,selectors:[["app-step2"]],inputs:{query:[1,"query"],data:[1,"data"]},outputs:{confirm:"confirm",back:"back",query:"queryChange",data:"dataChange"},decls:11,vars:8,consts:[[1,"d-flex","flex-column","h-100","py-2"],[1,"border","rounded","shadow-sm","p-0","overflow-hidden"],[3,"indexChange","search","records","promotion","query","index"],[1,"flex-1","border","rounded","shadow-sm","p-0","overflow-hidden","mt-2"],[1,"d-flex","gap-3","justify-content-center","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-dark",3,"click"],[3,"indexChange","search","records","promotion","query","index","outbound"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"app-shifts",2),Be("indexChange",function(s){return he(r.outboundIndex,s)||(r.outboundIndex=s),s}),x("search",function(s){return r.onOutboundSearch(s)}),t()(),w(3,yn,2,5,"div",3),n(4,"div",4)(5,"button",5),x("click",function(){return r.onConfirm()}),i(6,"\u958B\u59CB\u8A02\u4F4D"),t(),n(7,"button",5),x("click",function(){return r.onShowAll()}),i(8),t(),n(9,"button",6),x("click",function(){return r.back.emit(null)}),i(10,"\u91CD\u8A2D\u67E5\u8A62\u689D\u4EF6"),t()()()),e&2&&(l(),se("flex-1",r.roundTrip()),l(),c("records",r.outbound())("promotion",r.promotion())("query",r.query()),Fe("index",r.outboundIndex),l(),T(r.roundTrip()?3:-1),l(5),X(" ",r.showAll()?"\u50C5\u986F\u793A\u53EF\u552E\u8ECA\u6B21":"\u986F\u793A\u6700\u8FD1\u6240\u6709\u8ECA\u6B21"," "))},dependencies:[j,k,Je],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};var Xe=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-seat-modal"]],decls:5,vars:0,consts:[[1,"modal-header","bg-warning-subtle"],[1,"modal-title"],[1,"modal-body"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h5",1),i(2,"\u5EA7\u4F4D\u8868"),t()(),n(3,"div",2),i(4,"Seat"),t())},encapsulation:2})};function En(a,o){a&1&&(n(0,"th",2),i(1,"\u5EA7\u4F4D\u9078\u64C7"),t())}function Tn(a,o){if(a&1){let e=K();n(0,"td")(1,"button",3),x("click",function(){O(e);let m=_(2);return R(m.selectSeat())}),i(2,"\u5EA7\u4F4D\u8868"),t()()}}function Dn(a,o){if(a&1&&(n(0,"tr")(1,"td"),i(2,"\u53BB\u7A0B\u5217\u8ECA"),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t(),n(11,"td"),i(12),t(),n(13,"td"),i(14),t(),n(15,"td"),i(16),t(),n(17,"td"),i(18),t(),n(19,"td"),i(20),t(),w(21,Tn,3,0,"td"),t()),a&2){let e=o,r=_();l(4),f(e.discount),l(2),f(e.trainNumber),l(2),f(e.departStation),l(2),f(e.arrivalStation),l(2),f(e.departDate),l(2),f(e.departTime),l(2),f(e.arrivalTime),l(2),f(e.elapseTime),l(2),f(e.classType),l(),T(r.seatSelectable()?21:-1)}}function In(a,o){if(a&1){let e=K();n(0,"td")(1,"button",3),x("click",function(){O(e);let m=_(2);return R(m.selectSeat())}),i(2,"\u5EA7\u4F4D\u8868"),t()()}}function wn(a,o){if(a&1&&(n(0,"tr")(1,"td"),i(2,"\u56DE\u7A0B\u5217\u8ECA"),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t(),n(11,"td"),i(12),t(),n(13,"td"),i(14),t(),n(15,"td"),i(16),t(),n(17,"td"),i(18),t(),n(19,"td"),i(20),t(),w(21,In,3,0,"td"),t()),a&2){let e=o,r=_();l(4),f(e.discount),l(2),f(e.trainNumber),l(2),f(e.departStation),l(2),f(e.arrivalStation),l(2),f(e.departDate),l(2),f(e.departTime),l(2),f(e.arrivalTime),l(2),f(e.elapseTime),l(2),f(e.classType),l(),T(r.seatSelectable()?21:-1)}}var Te=class a{constructor(o){this.ngbModal=o}outbound=P();inbound=P();seatSelectable=P(!0);selectSeat(){this.ngbModal.open(Xe,{size:"lg",centered:!0,scrollable:!0})}static \u0275fac=function(e){return new(e||a)(M(qe))};static \u0275cmp=E({type:a,selectors:[["app-bound"]],inputs:{outbound:[1,"outbound"],inbound:[1,"inbound"],seatSelectable:[1,"seatSelectable"]},decls:26,vars:3,consts:[[1,"table","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],[1,"btn","btn-primary",3,"click"]],template:function(e,r){if(e&1&&(n(0,"table",0)(1,"thead",1)(2,"tr"),S(3,"th",2),n(4,"th",2),i(5,"\u512A\u60E0*"),t(),n(6,"th",2),i(7,"\u8ECA\u6B21"),t(),n(8,"th",2),i(9,"\u51FA\u767C\u7AD9"),t(),n(10,"th",2),i(11,"\u5230\u9054\u7AD9"),t(),n(12,"th",2),i(13,"\u51FA\u767C\u65E5\u671F"),t(),n(14,"th",2),i(15,"\u51FA\u767C\u6642\u9593"),t(),n(16,"th",2),i(17,"\u5230\u9054\u6642\u9593"),t(),n(18,"th",2),i(19,"\u884C\u8ECA\u6642\u9593"),t(),n(20,"th",2),i(21,"\u5EC2\u7B49"),t(),w(22,En,2,0,"th",2),t()(),n(23,"tbody"),w(24,Dn,22,10,"tr")(25,wn,22,10,"tr"),t()()),e&2){let m,s;l(22),T(r.seatSelectable()?22:-1),l(2),T((m=r.outbound())?24:-1,m),l(),T((s=r.inbound())?25:-1,s)}},dependencies:[j,k,Q],encapsulation:2})};var Mn=(a,o)=>o.index;function kn(a,o){if(a&1&&i(0),a&2){let e=_().$implicit;X(" ",e.personalId," ")}}function Fn(a,o){a&1&&(n(0,"span",8),i(1,"*"),t())}function Bn(a,o){if(a&1&&(S(0,"input",19),w(1,Fn,2,0,"span",8),S(2,"input",20)),a&2){let e=_().$implicit;c("id","personalIdCheck-"+e.index),l(),T(e.profile==="\u611B\u5FC3"||e.profile==="\u656C\u8001"?1:-1),l(),c("id","personalId-"+e.index)}}function An(a,o){if(a&1&&i(0),a&2){let e=_().$implicit;X(" ",e.expiryDate," ")}}function Nn(a,o){a&1&&(n(0,"span",8),i(1,"*"),t())}function $n(a,o){if(a&1&&(w(0,Nn,2,0,"span",8),S(1,"input",16)),a&2){let e=_().$implicit;T(e.profile==="\u611B\u5FC3"?0:-1),l(),c("id","expiryDate-"+e.index)}}function jn(a,o){a&1&&(n(0,"span",8),i(1,"*"),t())}function Ln(a,o){if(a&1&&i(0),a&2){let e=_().$implicit;X(" ",e.outbound.coupon," ")}}function Vn(a,o){if(a&1&&S(0,"input",16),a&2){let e=_().$implicit;c("id","outboundCoupon-"+e.index)}}function Pn(a,o){if(a&1&&i(0),a&2){let e=_().$implicit;X(" ",e.inbound.coupon," ")}}function Yn(a,o){if(a&1&&S(0,"input",16),a&2){let e=_().$implicit;c("id","inboundCoupon-"+e.index)}}function On(a,o){if(a&1&&(n(0,"tr",5)(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td")(6,"div",6),w(7,kn,1,1)(8,Bn,3,3),t()(),n(9,"td")(10,"div",6),w(11,An,1,1)(12,$n,2,2),t()(),n(13,"td",7),w(14,jn,2,0,"span",8),S(15,"input",9),n(16,"label",10),i(17,"\u6709"),t(),S(18,"input",9),n(19,"label",11),i(20,"\u7121"),t()(),n(21,"td",7)(22,"div",6),S(23,"input",12),n(24,"label",10),i(25,"\u7121\u8B49\u4EF6"),t()()(),n(26,"td")(27,"div",13)(28,"div",14)(29,"label",15),i(30,"\u53BB:"),t(),w(31,Ln,1,1)(32,Vn,1,1,"input",16),t(),n(33,"div",14)(34,"label",15),i(35,"\u56DE:"),t(),w(36,Pn,1,1)(37,Yn,1,1,"input",16),t()()(),n(38,"td")(39,"div",13)(40,"span",17)(41,"span"),i(42,"NT$"),t(),i(43),t(),n(44,"span",18)(45,"span"),i(46,"NT$"),t(),i(47),t()()(),n(48,"td")(49,"div",13)(50,"span",17),i(51),t(),n(52,"span",18),i(53),t()()()()),a&2){let e=o.$implicit,r=o.$index,m=_();c("formGroupName",r),l(2),X(" ",e.index," "),l(2),f(e.profile),l(3),T(m.readonly()?7:8),l(4),T(m.readonly()?11:12),l(3),T(!m.readonly()&&e.profile==="\u611B\u5FC3"?14:-1),l(),c("name","accompany-"+e.index)("id","accompanyYes-"+e.index)("disabled",m.readonly()),l(),c("for","accompanyYes-"+e.index),l(2),c("name","accompany-"+e.index)("id","accompanyNo-"+e.index)("disabled",m.readonly()),l(),c("for","accompanyNo-"+e.index),l(4),c("id","noIdDocument-"+e.index)("disabled",m.readonly()),l(),c("for","noIdDocument-"+e.index),l(5),c("for","outboundCoupon-"+e.index),l(2),T(m.readonly()?31:32),l(3),c("for","inboundCoupon-"+e.index),l(2),T(m.readonly()?36:37),l(7),f(e.outbound.fare),l(4),f(e.inbound.fare),l(4),ke("",e.outbound.car,"/",e.outbound.seat,""),l(2),ke("",e.inbound.car,"/",e.inbound.seat,"")}}var De=class a{constructor(o){this.formBuilder=o;this.form=this.formBuilder.group({passengers:this.formBuilder.array([])})}passengers=P();readonly=P(!1);form;ngOnChanges(o){if(o.passengers){let e=o.passengers.currentValue.map(r=>{let m=r.profile==="\u611B\u5FC3"||r.profile==="\u656C\u8001";return this.formBuilder.group({personalId:[r.personalId,m?[W.required]:[]]})});this.form.setControl("passengers",this.formBuilder.array(e))}}static \u0275fac=function(e){return new(e||a)(M(ge))};static \u0275cmp=E({type:a,selectors:[["app-role"]],inputs:{passengers:[1,"passengers"],readonly:[1,"readonly"]},features:[Le],decls:25,vars:1,consts:[[3,"formGroup"],[1,"table","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"text-nowrap"],["formArrayName","passengers"],[3,"formGroupName"],[1,"d-flex","align-items-center"],[1,"align-items-center","text-nowrap"],[1,"m-1","text-danger"],["type","radio",1,"form-check-input","me-1",3,"name","id","disabled"],[1,"form-check-label","me-2",3,"for"],[1,"form-check-label",3,"for"],["type","checkbox",1,"form-check-input","me-1","fs-6",3,"id","disabled"],[1,"d-flex","flex-column","justify-content-start"],[1,"d-flex","align-items-center","mb-1"],[1,"me-1",3,"for"],["type","text",1,"fs-6","form-control","form-control-sm","flex-grow-1",3,"id"],[1,"me-1","mb-2"],[1,"me-1","mb-1"],["type","checkbox",1,"form-check-input","me-1","fs-6","flex-grow-1",3,"id"],["type","text","formControlName","personalId",1,"fs-6","form-control","form-control-sm","flex-grow-1",3,"id"]],template:function(e,r){e&1&&(n(0,"form",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),i(5,"\u7DE8\u865F"),t(),n(6,"th",3),i(7,"\u8EAB\u5206\u5225"),t(),n(8,"th",3),i(9,"\u8EAB\u5206\u8B49\u865F / \u8B77\u7167\u865F\u78BC"),t(),n(10,"th",3),i(11,"\u6548\u671F"),t(),n(12,"th",3),i(13,"\u966A\u4F34\u8CC7\u683C"),t(),n(14,"th",3),i(15,"\u7121\u8B49\u4EF6"),t(),n(16,"th",3),i(17,"\u514C\u63DB\u5238\u865F\u78BC"),t(),n(18,"th",3),i(19,"\u7968\u50F9"),t(),n(20,"th",3),i(21,"\u8ECA\u5EC2/\u5EA7\u4F4D"),t()()(),n(22,"tbody",4),N(23,On,54,27,"tr",5,Mn),t()()()),e&2&&(c("formGroup",r.form),l(23),$(r.passengers()))},dependencies:[j,Se,Ce,oe,ve,k,Q,xe,_e,Nt,Pe],encapsulation:2})};function Rn(a,o){if(a&1){let e=K();n(0,"div",0),S(1,"app-bound",1),n(2,"app-member-code",2),Be("personalIdChange",function(m){let s=O(e);return he(s.membership.personalId,m)||(s.membership.personalId=m),R(m)})("coperateIdChange",function(m){let s=O(e);return he(s.membership.coperateId,m)||(s.membership.coperateId=m),R(m)}),t(),n(3,"div",3),S(4,"app-role",4),t(),n(5,"div",5)(6,"div"),i(7,"\u4FC3\u92B7\u4EE3\u78BC"),t(),n(8,"div"),i(9),t(),n(10,"div",6),S(11,"input",7),n(12,"label",8),i(13,"\u4FDD\u7559\u7968\u6839\u4F5C\u70BA\u4F9D\u64DA"),t()()(),n(14,"div",9)(15,"button",10),x("click",function(){O(e);let m=_();return R(m.confirm.emit(null))}),i(16,"\u78BA\u8A8D"),t(),n(17,"button",11),i(18,"\u8CC7\u683C\u6AA2\u6838"),t(),n(19,"button",12),x("click",function(){O(e);let m=_();return R(m.back.emit(null))}),i(20,"\u91CD\u65B0\u9078\u64C7\u8ECA\u6B21"),t()()()}if(a&2){let e=o;l(),c("outbound",e.trainInfo.outbound)("inbound",e.trainInfo.inbound),l(),Fe("personalId",e.membership.personalId)("coperateId",e.membership.coperateId),l(2),c("passengers",e.passengerInfo),l(5),f(e.promotion.code)}}var Ke=class a{confirm=J();back=J();data=P(null);static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-step3"]],inputs:{data:[1,"data"]},outputs:{confirm:"confirm",back:"back"},decls:1,vars:1,consts:[[1,"d-flex","flex-column","h-100","py-2"],[3,"outbound","inbound"],[1,"mt-2",3,"personalIdChange","coperateIdChange","personalId","coperateId"],[1,"mt-2","overflow-auto"],[3,"passengers"],[1,"d-flex","gap-3","justify-content-start","mt-2"],[1,"ms-auto"],["type","checkbox","id","retain",1,"form-check-input","me-1","fs-6"],["for","retain"],[1,"d-flex","gap-3","justify-content-center","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-dark"],[1,"btn","btn-dark",3,"click"]],template:function(e,r){if(e&1&&w(0,Rn,21,6,"div",0),e&2){let m;T((m=r.data())?0:-1,m)}},dependencies:[j,k,Te,Q,De,re],encapsulation:2})};var et=class a{data={pnrId:"02408026",tripType:2,isGroup:!1,trainInfo:{outbound:{discount:"Y",trainNumber:"0567",departStation:"\u677F\u6A4B",departDate:"11/08",departTime:"09:00",departDay:"FAR",arrivalStation:"\u53F0\u4E2D",arrivalDate:"11/08",arrivalTime:"11:00",arrivalDay:"FAR",elapseTime:"00:51",classType:"\u6A19\u6E96\u8ECA\u5EC2"},inbound:{discount:"Y",trainNumber:"0888",departStation:"\u53F0\u4E2D",departDate:"11/09",departTime:"17:00",departDay:"SAT",arrivalStation:"\u677F\u6A4B",arrivalDate:"11/09",arrivalTime:"19:00",arrivalDay:"SAT",elapseTime:"00:55",classType:"\u6A19\u6E96\u8ECA\u5EC2"}},membership:{personalId:"",coperateId:""},groupInfo:{groupName:"",personId:"",firstName:"",lastName:"",phoneNumber:""},passengerInfo:[{index:"1",profile:"\u6210\u4EBA",personalId:"A123456789",expiryDate:"",needCompanion:null,noIdDocument:!1,outbound:{coupon:"",fare:"700",car:"05",seat:"2E",mark:""},inbound:{coupon:"",ticketNumber:"",fare:"700",car:"02",seat:"1A",eCoupon:"CROXHC2E1E",mark:""}}],profile:[{code:"F",quantity:2},{code:"W",quantity:1}],totalFare:"",promotion:{code:"P001",projectName:"\u516C\u52D9\u4E58\u8ECA",projectDiscount:"-100"}};static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-step4"]],decls:36,vars:9,consts:[[1,"d-flex","flex-column","h-100","py-2"],[3,"outbound","inbound","seatSelectable"],[1,"mt-2",3,"disabled"],[1,"mt-2","overflow-auto"],[3,"passengers","readonly"],[1,"bg-warning-subtle","mt-2","p-2","w-50"],[1,"d-flex","gap-3","justify-content-start","mt-2"],[1,"d-flex","gap-3","justify-content-center","mt-2"],[1,"btn","btn-primary"],[1,"btn","btn-dark"]],template:function(e,r){e&1&&(n(0,"div",0),S(1,"app-bound",1)(2,"app-member-code",2),n(3,"div",3),S(4,"app-role",4),t(),n(5,"div",5)(6,"div"),i(7," \u7E3D\u4EBA\u6578\xA0 "),n(8,"span"),i(9,"3\u4EBA("),n(10,"span"),i(11,"\xA0\u6210\u4EBA2\u5F35"),t(),i(12,"\xA0"),n(13,"span"),i(14,"\u611B\u5FC32\u5F35"),t(),i(15,"\xA0"),n(16,"span"),i(17,"\u656C\u80012\u5F35"),t(),i(18,"\xA0)"),t()(),n(19,"div"),i(20," \u7E3D\u7968\u50F9\xA0 "),n(21,"span"),i(22,"2,800"),t()()(),n(23,"div",6)(24,"div"),i(25,"\u4FC3\u92B7\u4EE3\u78BC"),t(),n(26,"div"),i(27),t(),n(28,"div")(29,"div"),i(30),t()()(),n(31,"div",7)(32,"button",8),i(33,"\u4ED8\u6B3E\u53D6\u7968"),t(),n(34,"button",9),i(35,"\u53D6\u6D88"),t()()()),e&2&&(l(),c("outbound",r.data.trainInfo.outbound)("inbound",r.data.trainInfo.inbound)("seatSelectable",!1),l(),c("disabled",!0),l(2),c("passengers",r.data.passengerInfo)("readonly",!0),l(23),f(r.data.promotion.code),l(3),ke("(",r.data.promotion.projectName,"\u2714 ",r.data.promotion.projectDiscount," )"))},dependencies:[k,j,Q,Te,De,re],encapsulation:2})};var tt=class a{constructor(o){this.mmiService=o;this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21"])}step=F(1);step1Query=F(null);step1Data=F(null);step2Data=F(null);onStep1Confirm(o){this.step1Query.set(o.query),this.step1Data.set(o.data),this.step.set(2),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21","\u9078\u64C7\u8ECA\u6B21"])}onStep2Back(){this.step.set(1),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21"])}onStep2Confirm(o){this.step2Data.set(o),this.step.set(3),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21","\u9078\u64C7\u8ECA\u6B21","\u9078\u64C7\u5EA7\u4F4D/\u586B\u5BEB\u4E58\u5BA2\u8CC7\u6599"])}onStep3Confirm(o){console.log(o),this.step.set(4)}onStep3Back(){this.step.set(2),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21","\u9078\u64C7\u8ECA\u6B21"])}static \u0275fac=function(e){return new(e||a)(M(Mt))};static \u0275cmp=E({type:a,selectors:[["app-new"]],decls:4,vars:11,consts:[[3,"confirm"],[3,"confirm","back","query","data"],[3,"confirm","back","data"]],template:function(e,r){e&1&&(n(0,"app-step1",0),x("confirm",function(s){return r.onStep1Confirm(s)}),t(),n(1,"app-step2",1),x("confirm",function(s){return r.onStep2Confirm(s)})("back",function(){return r.onStep2Back()}),t(),n(2,"app-step3",2),x("confirm",function(s){return r.onStep3Confirm(s)})("back",function(){return r.onStep3Back()}),t(),S(3,"app-step4")),e&2&&(se("d-none",r.step()!==1),l(),se("d-none",r.step()!==2),c("query",r.step1Query())("data",r.step1Data()),l(),se("d-none",r.step()!==3),c("data",r.step2Data()),l(),se("d-none",r.step()!==4))},dependencies:[k,j,Ue,Ze,Ke,et],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};var qn=[{path:"",component:We,children:[{path:"new",component:tt},{path:"**",redirectTo:"new"}]}],qt=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=St({type:a});static \u0275inj=Ct({imports:[k,wt.forChild(qn)]})};export{qt as TicketsModule};
