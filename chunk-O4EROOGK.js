import{a as Le,b as H,c as He,d as R,e as W,f as V,g as z}from"./chunk-XAPNK74H.js";import{b as je,c as Ue,d as Ye,f as Ge,g as We}from"./chunk-FPHSEH65.js";import{b as Y,f as ae,g as pe,j as I}from"./chunk-F4AZ2R32.js";import{c as te,e as ye,f as ie,g as U,h as Ne,j as L,k as Pe,l as Re,m as ne,o as Ve,p as oe,q as qe,r as Qe,s as Oe,u as $e,v as re,w as P,x as G}from"./chunk-TZ5BZHLV.js";import{a as Me}from"./chunk-LW3WONP3.js";import{$a as ge,Ba as K,Ca as M,Da as N,Ea as i,Fa as t,Ga as d,Ha as y,J as Ie,Ja as u,Ka as s,Kb as w,M as C,Na as Se,S as f,Sa as X,Sb as Ae,T as b,Ta as Z,Ua as we,Va as r,Wa as T,Wb as Fe,Xa as F,Ya as ee,Z as g,_ as E,_a as he,a as Q,aa as k,ab as xe,bb as O,cb as $,d as Xe,da as p,db as j,ga as Be,ia as J,j as Ee,ja as _e,ka as v,la as De,pa as S,ua as m,ub as _,vb as D,wa as x,z as ke,za as h}from"./chunk-O2LKXLAO.js";var le=class l{ngbActiveModal=C(ae);static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-booking-modal"]],decls:25,vars:1,consts:[["bookingForm","ngForm"],[1,"modal-header","bg-warning-subtle","align-items-center","justify-content-between"],[1,"modal-title"],[1,"text-danger"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","w-100"],[1,"d-flex","align-items-center"],[1,"fas","fa-circle-exclamation","text-warning","me-2","fs-3"],[1,"w-100"],[1,"mb-3","d-flex","align-items-center"],["for","idNumber",1,"form-label","text-nowrap"],["type","text","id","idNumber","name","idNumber","required","",1,"form-control","ms-2","w-25"],["for","bookingCode",1,"form-label","text-nowrap"],["type","text","id","bookingCode","name","bookingCode","required","",1,"form-control","ms-2","w-25"],[1,"d-flex","justify-content-end","w-100"],["type","button",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary","ms-2",3,"disabled"]],template:function(e,o){if(e&1){let a=y();i(0,"div",1)(1,"p",2)(2,"span"),r(3,"\u67E5\u7121290001111\u8A02\u4F4D\u7D00\u9304\uFF0C\u8ACB\u91CD\u65B0\u8F38\u5165"),t(),i(4,"span",3),r(5,"\u6B63\u78BA\u4E4B\u300C\u8A02\u4F4D\u4EE3\u865F\u300D\u6216\u7528\u300C\u8EAB\u4EFD\u8B49\u865F(ID)/\u8B77\u7167\u865F\u78BC\u300D\u53CD\u67E5\u8A02\u4F4D/QR code\u81EA\u7531\u5EA7\u8ECA\u7968\u3002"),t()(),i(6,"button",4),u("click",function(){return f(a),b(o.ngbActiveModal.close(null))}),t()(),i(7,"div",5)(8,"div",6),d(9,"i",7),i(10,"form",8,0)(12,"div",9)(13,"label",10),r(14,"\u8EAB\u4EFD\u8B49\u865F(ID)/\u8B77\u7167\u865F\u78BC"),t(),d(15,"input",11),t(),i(16,"div",9)(17,"label",12),r(18,"\u8A02\u4F4D\u4EE3\u865F"),t(),d(19,"input",13),t()()(),i(20,"div",14)(21,"button",15),r(22,"\u53D6\u6D88"),t(),i(23,"button",16),r(24,"\u78BA\u8A8D"),t()()()}if(e&2){let a=we(11);p(23),m("disabled",!a.form.valid)}},dependencies:[w,P,L,U,Ne],styles:[".seat[_ngcontent-%COMP%]{height:30px;border-radius:4px}.seat[_ngcontent-%COMP%]   .fa-ban[_ngcontent-%COMP%], .seat.selected[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{display:none}.seat-reserved[_ngcontent-%COMP%]{color:#0dcaf0}.seat-priority[_ngcontent-%COMP%]{color:#ffc107}.seat-priority.selected[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.seat-accessibility[_ngcontent-%COMP%]{color:#0d6efd}.seat-accessibility.selected[_ngcontent-%COMP%]{background-color:#0d6efd;color:#000}.seat-available[_ngcontent-%COMP%]{color:#000}.seat-available.selected[_ngcontent-%COMP%]{background-color:#d63384}.seat-taken[_ngcontent-%COMP%]{color:#000}.seat-taken[_ngcontent-%COMP%]   .fa-ban[_ngcontent-%COMP%]{display:inline}.seat-taken[_ngcontent-%COMP%]   .fa-chair[_ngcontent-%COMP%]{display:none}"]})};function Ze(l,n){if(l&1&&(i(0,"div",25)(1,"label",26),r(2),t(),d(3,"input",27),t()),l&2){let e=n.$implicit;p(),m("for","ticket"+(e+1)),p(),F("\u7968\u865F",e+1,":"),p(),m("id","ticket"+(e+1))("formControlName",e)}}function et(l,n){if(l&1&&(i(0,"div",17)(1,"div",2)(2,"div",23),r(3,"QR-Code \u7968\u8B49\u689D\u78BC\u8CC7\u8A0A\u8B80\u53D6"),t(),i(4,"div",24),r(5,"\u8ACB\u4F9D\u5E8F\u8B80\u53D6"),t(),i(6,"div",11),M(7,Ze,4,4,"div",25,K),t()()()),l&2){let e=s();p(7),N(e.ptTicketCountArray())}}var me=class l{confirm=g();result=g();form;readStatus=k(0);pnrId;personId;mtTicketCount;ptTicketCount;pnrIdDisabled=_(()=>this.personId()||this.readStatus()!==0);personIdDisabled=_(()=>this.pnrId());ptTicketCountDisabled=_(()=>this.personId());needToReadMtTicket=_(()=>this.pnrId()&&this.mtTicketCount());mtTicketCompleted=_(()=>this.needToReadMtTicket()?this.readStatus()===2:!0);confirmEnabled=_(()=>this.personId()||this.pnrId()&&!this.mtTicketCount()&&!this.ptTicketCount());readMtTicketEnabled=_(()=>this.needToReadMtTicket()&&this.readStatus()===0);completeReadEnabled=_(()=>this.mtTicketCount()?this.mtTicketCompleted():this.ptTicketCount());ptTicketCountArray=_(()=>Array.from({length:this.ptTicketCount()},(n,e)=>e));ngbModal=C(pe);formBuilder=C(re);apiService=C(I);constructor(){this.form=this.formBuilder.group({pnrId:["",[ye.minLength(8),ye.maxLength(8)]],personId:[""],mtTicketCount:[""],ptTicketCount:[""],ptTicketNumbers:this.formBuilder.array([])}),this.pnrId=Y(this.form.get("pnrId").valueChanges),this.personId=Y(this.form.get("personId").valueChanges),this.mtTicketCount=Y(this.form.get("mtTicketCount").valueChanges),this.ptTicketCount=Y(this.form.get("ptTicketCount").valueChanges),D(()=>{this.pnrIdDisabled()?(this.form.get("pnrId")?.disable(),this.form.get("mtTicketCount")?.disable()):(this.form.get("pnrId")?.enable(),this.form.get("mtTicketCount")?.enable())}),D(()=>{this.personIdDisabled()?this.form.get("personId")?.disable():this.form.get("personId")?.enable()}),D(()=>{this.ptTicketCountDisabled()?this.form.get("ptTicketCount")?.disable():this.form.get("ptTicketCount")?.enable()}),D(()=>{this.pnrId()||this.form.patchValue({mtTicketCount:"",ptTicketCount:""})}),D(()=>{let n=this.ptTicketCountArray().map(()=>this.formBuilder.control(""));this.form.setControl("ptTicketNumbers",this.formBuilder.array(n))})}read(){this.readStatus.set(1),setTimeout(()=>{this.readStatus.set(2)},100)}onSubmit(){let n={pnrId:this.pnrId(),personId:this.personId(),mtTicketNumbers:null,ptTicketNumbers:null};this.queryTrip(n)}reset(){this.readStatus.set(0)}readComplete(){console.log("readComplete")}test(){this.ngbModal.open(le,{size:"lg",centered:!0,scrollable:!0,backdrop:"static"})}queryTrip(n){this.apiService.loading||this.apiService.execute(this.apiService.queryTrip(n),e=>{e.data.trip?this.confirm.emit(e.data.trip):e.data.bookingRecords?.length===1?this.queryTrip({pnrId:e.data.bookingRecords[0].pnrId,personId:"",mtTicketNumbers:null,ptTicketNumbers:null}):this.result.emit([n.personId,e.data.bookingRecords])})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step1"]],outputs:{confirm:"confirm",result:"result"},decls:37,vars:5,consts:[[3,"reset","formGroup"],[1,"py-2"],[1,"border","rounded","p-3","shadow-sm","bg-white","fs-6","m-0","w-100"],[1,"mb-3"],[1,"form-label"],[1,"mb-3","d-flex","align-items-center"],["for","personId",1,"form-label","text-nowrap","m-0"],["type","text","id","personId","formControlName","personId",1,"form-control","form-control-sm","ms-2","w-25"],[1,"form-text","text-danger","mt-1"],["for","pnrId",1,"form-label","text-nowrap","m-0"],["type","text","id","pnrId","formControlName","pnrId","maxlength","8",1,"form-control","form-control-sm","ms-2","w-25"],[1,"row"],[1,"col-6","mb-3","d-flex","align-items-center"],["for","magneticTicketCount",1,"form-label","text-nowrap","m-0"],["type","number","id","magneticTicketCount","formControlName","mtTicketCount",1,"form-control","form-control-sm","ms-2","w-50"],["for","paperMobileTicketCount",1,"form-label","text-nowrap","m-0"],["type","number","id","paperMobileTicketCount","formControlName","ptTicketCount",1,"form-control","form-control-sm","ms-2","w-50"],["formArrayName","ptTicketNumbers",1,"py-2"],[1,"d-flex","justify-content-between","mt-2"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],["type","button",1,"btn","btn-secondary","me-2",3,"click","disabled"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","reset",1,"btn","btn-secondary"],[1,"mb-2"],[1,"text-muted"],[1,"col-3","align-items-center","d-flex","mt-2"],[1,"me-2",3,"for"],["type","text",1,"form-control","flex-1",3,"id","formControlName"]],template:function(e,o){if(e&1&&(i(0,"form",0),u("reset",function(){return o.reset()}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"\u8ACB\u8F38\u5165\u8A02\u4F4D\u4EE3\u865F\u6216\u8EAB\u5206\u8B49\u865F/\u8B77\u7167\u865F\u78BC"),t()(),i(6,"div",5)(7,"label",6),r(8,"\u8EAB\u5206\u8B49\u865F/\u8B77\u7167\u865F\u78BC"),t(),d(9,"input",7),t(),i(10,"div",3)(11,"div",8),r(12,"\u4EE5\u8EAB\u5206\u8B49\u865F/\u8B77\u7167\u865F\u78BC\u67E5\u8A62\u50C5\u986F\u793A\u6709\u6548\u4E4B\u8A02\u4F4D\u7D00\u9304"),t()(),i(13,"div",5)(14,"label",9),r(15,"\u8A02\u4F4D\u4EE3\u865F"),t(),d(16,"input",10),t(),i(17,"div",11)(18,"div",12)(19,"label",13),r(20,"\u8B80\u53D6\u78C1\u7968\u5F35\u6578"),t(),d(21,"input",14),t(),i(22,"div",12)(23,"label",15),r(24,"\u8B80\u53D6\u7D19\u7968/\u624B\u6A5F\u5F35\u6578"),t(),d(25,"input",16),t()()()(),S(26,et,9,0,"div",17),i(27,"div",18)(28,"div")(29,"button",19),u("click",function(){return o.onSubmit()}),r(30," \u78BA\u8A8D "),t(),i(31,"button",20),u("click",function(){return o.read()}),r(32," \u78C1\u7968\u8B80\u53D6\u958B\u59CB "),t(),i(33,"button",21),u("click",function(){return o.readComplete()}),r(34," \u8B80\u7968\u5B8C\u6210 "),t()(),i(35,"button",22),r(36,"\u91CD\u8A2D"),t()()()),e&2){let a;m("formGroup",o.form),p(26),h((a=o.ptTicketCount()>0)?26:-1,a),p(3),m("disabled",o.form.invalid||!o.confirmEnabled()),p(2),m("disabled",!o.readMtTicketEnabled()),p(2),m("disabled",!o.completeReadEnabled())}},dependencies:[P,L,te,Pe,ie,U,$e,w,G,ne,oe,Ve],encapsulation:2})};var de=class l{ngbActiveModal=C(ae);static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-query-booking-history"]],decls:6,vars:0,consts:[[1,"modal-header","bg-warning-subtle","align-items-center","justify-content-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","w-100"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"p",1)(2,"span"),r(3,"\u67E5\u8A62\u8A02\u4F4D\u6B77\u53F2\u7D00\u9304"),t()(),i(4,"button",2),u("click",function(){return o.ngbActiveModal.close(null)}),t()(),d(5,"div",3))},dependencies:[w,P],encapsulation:2})};function tt(l,n){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"p",2)(3,"strong"),r(4,"\u8A02\u4F4D\u4EE3\u865F\uFF1A"),t(),r(5),t(),i(6,"p",2)(7,"strong"),r(8,"\u8A02\u4F4D\u901A\u8DEF\uFF1A"),t(),r(9),t()(),i(10,"div",1)(11,"p",2)(12,"strong"),r(13,"\u4ED8\u6B3E\u671F\u9650\uFF1A"),t(),i(14,"span",3),r(15),t()(),i(16,"p",2)(17,"strong"),r(18,"\u4ED8\u6B3E\u65B9\u5F0F\uFF1A"),t(),i(19,"span"),r(20),t()()()()),l&2){let e=n;p(5),T(e.pnrId),p(4),ee("",e.channel," - ",e.cityCode,""),p(5),x("text-danger",e.holdLimitDate==="\u5DF2\u4ED8\u6B3E"),p(),T(e.holdLimitDate),p(5),T(e.paymentType)}}var q=class l{trip=E();static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-ticket-info"]],inputs:{trip:[1,"trip"]},decls:1,vars:1,consts:[[1,"row"],[1,"col-md-6"],[1,"mb-1"],[1,"text-danger"]],template:function(e,o){if(e&1&&S(0,tt,21,7,"div",0),e&2){let a;h((a=o.trip())?0:-1,a)}},encapsulation:2})};function it(l,n){l&1&&(i(0,"button",6),r(1,"\u53D6\u6D88\u884C\u7A0B\uFF0C\u514D\u6536\u624B\u7E8C\u8CBB"),t())}function nt(l,n){l&1&&(i(0,"button",30),r(1,"\u8B8A\u66F4\u8EAB\u4EFD"),t(),i(2,"button",31),r(3,"\u8B8A\u66F4\u5EA7\u4F4D"),t())}function ot(l,n){l&1&&(i(0,"button",6),r(1,"\u6E1B\u5C11\u4EBA\u6578\uFF0C\u514D\u6536\u624B\u7E8C\u8CBB"),t())}function rt(l,n){if(l&1&&(i(0,"button",6),r(1,"\u6E1B\u5C11\u4EBA\u6578"),t(),S(2,ot,2,0,"button",6)),l&2){let e=s(3);p(2),h(e.status()===e.orderStatus.paid?2:-1)}}function at(l,n){if(l&1&&(i(0,"button",30),r(1,"\u8CC7\u6599\u4FEE\u6539"),t(),S(2,rt,3,1),i(3,"button",6),r(4,"\u8B8A\u66F4\u5EA7\u4F4D"),t()),l&2){let e=s();p(2),h(e.passengers.length>1?2:-1)}}function pt(l,n){if(l&1){let e=y();i(0,"button",32),u("click",function(){f(e);let a=s(2);return b(a.back.emit())}),r(1,"\u8FD4\u56DE\u8A02\u4F4D\u5217\u8868"),t()}}function lt(l,n){if(l&1){let e=y();i(0,"div",1),d(1,"app-ticket-info",2),i(2,"div",3)(3,"div",4),r(4,"\u5217\u8ECA\u8CC7\u8A0A"),t(),i(5,"button",5),u("click",function(){f(e);let a=s();return b(a.changeTrain())}),r(6,"\u8B8A\u66F4\u884C\u7A0B"),t(),i(7,"button",6),r(8,"\u53D6\u6D88\u884C\u7A0B"),t(),S(9,it,2,0,"button",6),t(),d(10,"app-bound",7),i(11,"div",8)(12,"div",9)(13,"label",10),r(14,"\u53D6\u7968\u4EBA\u8EAB\u4EFD\u8B49\u865F"),t(),i(15,"div",11),d(16,"input",12),t()(),i(17,"div",9)(18,"label",13),r(19,"\u806F\u7D61\u96FB\u8A71"),t(),i(20,"div",11),d(21,"input",14),t()(),d(22,"app-member-code",15),t(),i(23,"div",16)(24,"div",17)(25,"div",4),r(26,"\u4E58\u5BA2\u8CC7\u8A0A"),t(),S(27,nt,4,0)(28,at,5,1),t(),i(29,"div")(30,"button",18),r(31,"\u660E\u78BC\u986F\u793A"),t()()(),i(32,"div",19),d(33,"app-passengers",20,0),t(),i(35,"div",21)(36,"div",22),r(37,"\u7E3D\u4EBA\u6578:"),t(),i(38,"div",23),d(39,"app-people-counter",24),t()(),i(40,"div",21)(41,"div",25)(42,"div",22),r(43,"\u7E3D\u7968\u50F9:"),t(),i(44,"div"),r(45),t()(),i(46,"div",25)(47,"div",22),r(48,"\u4FC3\u92B7\u4EE3\u78BC:"),t(),d(49,"app-promotion-tickets",26),t()(),i(50,"div",27)(51,"button",18),r(52,"\u4ED8\u6B3E\u53D6\u7968"),t(),i(53,"div",28),S(54,pt,2,0,"button",18),i(55,"button",29),r(56,"\u8CC7\u683C\u6AA2\u6838"),t(),i(57,"button",5),u("click",function(){f(e);let a=s();return b(a.queryBookingHistory())}),r(58,"\u67E5\u8A62\u8A02\u4F4D\u6B77\u53F2\u7D00\u9304"),t()()()()}if(l&2){let e=n,o=s(),a=j(0);p(),m("trip",e),p(8),h(o.status()!==o.orderStatus.unpaid?9:-1),p(),m("order",a)("isShort",!0)("hasCheckbox",!0)("seatSelectable",!1),p(6),m("value",e.pickUpInfo.personalId),p(5),m("value",e.pickUpInfo.phoneNumber),p(),m("readonly",!0)("personalId",e.membership.personalId)("coperateId",e.membership.coperateId)("rowStyle",!1),p(5),h(o.status()===o.orderStatus.picked?27:28),p(6),m("roundTrip",a.roundTrip())("passengers",e.passengers)("promotion",a.selectedPromotion())("editing",!0)("showMark",!0)("readonly",!1),p(6),m("order",a),p(6),F("NT$",a.totalFare(),""),p(4),m("promotionTickets",a.promotionTickets()),p(5),h(o.fromResult()?54:-1)}}var Je=(o=>(o[o.unpaid=0]="unpaid",o[o.paid=1]="paid",o[o.picked=2]="picked",o))(Je||{}),ue=class l{order=E();fromResult=E(!1);back=g();trainChange=g();orderStatus=Je;status=k(0);bound=J(R);ngbModal=C(pe);apiService=C(I);reservationService=C(Le);constructor(){this.reservationService.start(!1),D(()=>{this.order()?.promotions?.set(this.reservationService.reservation.promotionDataList())})}queryBookingHistory(){this.apiService.loading||this.apiService.execute(this.request({}),()=>{this.ngbModal.open(de,{size:"lg",centered:!0,scrollable:!0,backdrop:"static"})})}changeTrain(){if(this.apiService.loading)return;let n={tripType:this.getTripType(),pnrId:this.order()?.trip()?.pnrId};this.apiService.execute(this.apiService.changeTripBegin(n),e=>{this.trainChange.emit(e.data)})}request(n){return console.log(n),Ee({}).pipe(ke(100))}getTripType(){let n=0;return this.order()?.roundTrip()?this.bound()?.outboundChecked?n=this.bound()?.inboundChecked?2:3:this.bound()?.inboundChecked&&(n=4):this.bound()?.outboundChecked&&(n=1),n}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step2"]],viewQuery:function(e,o){e&1&&X(o.bound,R,5),e&2&&Z()},inputs:{order:[1,"order"],fromResult:[1,"fromResult"]},outputs:{back:"back",trainChange:"trainChange"},decls:2,vars:2,consts:[["passengers",""],[1,"d-flex","flex-column","h-100","py-2"],[3,"trip"],[1,"d-flex","align-items-center","mb-1"],[1,"me-2"],["type","button",1,"btn","btn-sm","btn-dark",3,"click"],["type","button",1,"btn","btn-sm","btn-dark","ms-2"],[3,"order","isShort","hasCheckbox","seatSelectable"],[1,"w-100","d-flex","align-items-center","flex-wrap"],[1,"d-flex","flex-column","justify-content-start"],["for","pickUpInfoPersonalId",1,"text-nowrap","m-1"],[1,"m-1"],["id","pickUpInfoPersonalId","name","pickUpInfoPersonalId","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],["for","pickUpInfoPhoneNumber",1,"text-nowrap","m-1"],["id","pickUpInfoPhoneNumber","name","pickUpInfoPhoneNumber","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],[3,"readonly","personalId","coperateId","rowStyle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-sm","btn-primary"],[1,"mt-1","overflow-auto"],[3,"roundTrip","passengers","promotion","editing","showMark","readonly"],[1,"d-flex","mt-1"],[1,"me-5"],[1,"d-flex","gap-2"],[3,"order"],[1,"d-flex","w-50"],[1,"flex-1",3,"promotionTickets"],[1,"d-flex","gap-3","justify-content-center","mt-1"],[1,"ms-auto","d-flex","gap-2"],["type","button",1,"btn","btn-sm","btn-secondary"],["type","button",1,"btn","btn-sm","btn-dark"],["type","button","disabled","",1,"btn","btn-sm","btn-dark","ms-2"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"]],template:function(e,o){if(e&1&&(O(0),S(1,lt,59,23,"div",1)),e&2){let a,c=$(o.order());p(),h((a=c.trip())?1:-1,a)}},dependencies:[P,w,G,R,H,W,V,z,q],encapsulation:2})};var Te=Xe(Ye());var dt=["departTripSection"],ut=["returnTripSection"],st=(l,n)=>n.code;function ct(l,n){if(l&1&&(i(0,"option",9),r(1),t()),l&2){let e=n.$implicit;m("value",e.code),p(),T(e.name)}}function ft(l,n){if(l&1&&(i(0,"option",9),r(1),t()),l&2){let e=n.$implicit;m("value",e.code),p(),T(e.name)}}function bt(l,n){if(l&1&&(i(0,"div",10),d(1,"input",29),i(2,"label",30),r(3),t()()),l&2){let e=n.$implicit;p(),Se("id","classType-",e.code,""),m("value",e.code),p(),Se("for","classType-",e.code,""),p(),T(e.name)}}function Ct(l,n){if(l&1&&d(0,"app-trip-section",17,1),l&2){let e=s(2);m("time",e.inboundDepartTime())("hasTitle",!0)("hasBorder",!0)("hasTrainNumber",!0)}}function vt(l,n){if(l&1){let e=y();i(0,"form",3),u("ngSubmit",function(){f(e);let a=s();return b(a.onSubmit())}),i(1,"div",4)(2,"div",5)(3,"label",6),r(4,"\u51FA\u767C\u7AD9"),t(),i(5,"div",7)(6,"select",8),M(7,ct,2,2,"option",9,K),t()(),i(9,"div",10)(10,"a",11),u("click",function(){f(e);let a=s();return b(a.swapStation())}),d(11,"i",12),t()(),i(12,"label",13),r(13,"\u5230\u9054\u7AD9"),t(),i(14,"div",7)(15,"select",14),M(16,ft,2,2,"option",9,K),t()()(),i(18,"div",15)(19,"div",10),r(20,"\u8ECA\u5EC2\u7A2E\u985E"),t(),M(21,bt,4,6,"div",10,st),t()(),d(23,"app-trip-section",16,0),S(25,Ct,2,4,"app-trip-section",17),i(26,"div",18)(27,"div",19)(28,"div",20),r(29,"\u4FC3\u92B7\u4EE3\u78BC"),t(),i(30,"div",21),d(31,"input",22),i(32,"label",23),r(33," \u65B0\u7968\u9069\u7528\u539F\u4FC3\u92B7\u4EE3\u78BC "),t()(),d(34,"app-promotion-tickets",24),t(),i(35,"div",19)(36,"div",21),d(37,"input",25),i(38,"label",26),r(39,"\u65B0\u7968\u4E0D\u4F7F\u7528"),t()()()(),i(40,"div",27)(41,"button",28),u("click",function(){return f(e),b(null)}),r(42,"\u78BA\u8A8D"),t()()()}if(l&2){let e,o=n,a=s();m("formGroup",a.form),p(7),N(a.departStationList()),p(9),N(a.arrivalStationList()),p(5),N(a.classTypes()),p(2),m("time",a.outboundDepartTime())("hasTitle",!0)("hasBorder",!0)("hasTrainNumber",!0),p(2),h((e=a.order())!=null&&e.roundTrip()?25:-1),p(6),x("disabled",!(o!=null&&o.applicablePcodeIsEnable)),m("value",!0)("readonly",!(o!=null&&o.applicablePcodeIsEnable)),p(3),m("promotionTickets",a.order().promotionTickets()),p(3),x("disabled",!(o!=null&&o.notApplicablePcodeIsEnable)),m("value",!1)("readonly",!(o!=null&&o.notApplicablePcodeIsEnable))}}var se=class l{constructor(n){this.fb=n;this.form=this.fb.group({departStation:[""],arrivalStation:[""],carriage:[""],useOriginalPromo:[!0]}),D(()=>{let e=this.data();e&&(this.form.patchValue({departStation:e.departStations.find(o=>o.name===e.departStation)?.code,arrivalStation:e.arrivalStations.find(o=>o.name===e.arrivalStation)?.code,carriage:e.classes.find(o=>o.name===e.carriage)?.code}),e.departStationIsEnable?this.form.get("departStation")?.enable():this.form.get("departStation")?.disable(),e.arrivalStationIsEnable?this.form.get("arrivalStation")?.enable():this.form.get("arrivalStation")?.disable())})}order=E();data=E(null);confirm=g();departStationList=_(()=>this.data().departStations);arrivalStationList=_(()=>this.data().arrivalStations);classTypes=_(()=>this.data().classes);outboundDepartTime=_(()=>(0,Te.default)(`${this.data().outboundDepartDate} ${this.data().outboundDepartTime}`));inboundDepartTime=_(()=>(0,Te.default)(`${this.data().inboundDepartDate} ${this.data().inboundDepartTime}`));departTripSection=J("departTripSection");returnTripSection=J("returnTripSection");form;apiService=C(I);swapStation(){if(!this.data()?.cnaSwitchStation)return;let n=this.form.get("departStation")?.value,e=this.form.get("arrivalStation")?.value;this.form.patchValue({departStation:e,arrivalStation:n})}onSubmit(){if(this.apiService.loading)return;let n={allTrain:0,pnrId:this.order()?.trip()?.pnrId,departStation:this.form.get("departStation")?.value,arrivalStation:this.form.get("arrivalStation")?.value,carriage:this.form.get("carriage")?.value,useOriginalPromo:this.form.get("useOriginalPromo")?.value};this.departTripSection()?.mergeValues(n,"outbound"),this.returnTripSection()?.mergeValues(n,"inbound"),n.outboundDateTime=`${n.outboundDate} ${n.outboundTime}`,n.inboundDateTime=`${n.inboundDate} ${n.inboundTime}`;let e=Q({},n);delete e.outboundDate,delete e.outboundTime,delete e.inboundDate,delete e.inboundTime,this.apiService.execute(this.apiService.changeTripQuery(e),o=>{this.confirm.emit([n,o.data])})}static \u0275fac=function(e){return new(e||l)(Be(re))};static \u0275cmp=v({type:l,selectors:[["app-step3"]],viewQuery:function(e,o){e&1&&(X(o.departTripSection,dt,5),X(o.returnTripSection,ut,5)),e&2&&Z(2)},inputs:{order:[1,"order"],data:[1,"data"]},outputs:{confirm:"confirm"},decls:1,vars:1,consts:[["departTripSection",""],["returnTripSection",""],[1,"py-2",3,"formGroup"],[1,"py-2",3,"ngSubmit","formGroup"],[1,"border","rounded","p-3","shadow-sm"],[1,"row","mb-2","align-items-center","w-100"],["for","departStation",1,"col-auto"],[1,"col"],["id","departStation","formControlName","departStation",1,"form-select","form-select-sm","fs-6"],[3,"value"],[1,"col-auto"],["href","javascript:;",3,"click"],[1,"fa-solid","fa-right-left"],["for","arrivalStation",1,"col-auto"],["id","arrivalStation","formControlName","arrivalStation",1,"form-select","form-select-sm","fs-6"],[1,"row","mb-2","w-100"],["title","\u53BB\u7A0B",1,"mt-2",3,"time","hasTitle","hasBorder","hasTrainNumber"],["title","\u56DE\u7A0B",1,"mt-2",3,"time","hasTitle","hasBorder","hasTrainNumber"],[1,"d-flex","mt-2"],[1,"d-flex","w-50"],[1,"me-3","text-nowrap"],[1,"form-check","form-check-inline"],["type","radio","name","useOriginalPromo","id","useOriginalPromo1","formControlName","useOriginalPromo",1,"form-check-input",3,"value","readonly"],["for","useOriginalPromo1",1,"form-check-label","text-nowrap"],[3,"promotionTickets"],["type","radio","name","useOriginalPromo","id","useOriginalPromo2","formControlName","useOriginalPromo",1,"form-check-input",3,"value","readonly"],["for","useOriginalPromo2",1,"form-check-label"],[1,"mt-2"],[1,"btn","btn-primary",3,"click"],["type","radio","formControlName","carriage",1,"form-check-input","me-1",3,"id","value"],[1,"form-check-label",3,"for"]],template:function(e,o){if(e&1&&S(0,vt,43,15,"form",2),e&2){let a;h((a=o.data())?0:-1,a)}},dependencies:[G,L,Qe,Oe,te,qe,Re,ie,U,ne,oe,Ge,V],encapsulation:2})};var _t=(l,n)=>n.index;function St(l,n){if(l&1){let e=y();i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td"),r(10),t(),i(11,"td"),r(12),t(),i(13,"td"),r(14),t(),i(15,"td"),r(16),t(),i(17,"td"),r(18),t(),i(19,"td")(20,"button",5),u("click",function(){let a=f(e).$implicit,c=s();return b(c.queryTrip(a.pnrId))}),r(21,"\u67E5\u8A62"),t()()()}if(l&2){let e=n.$implicit,o=n.$index;p(2),F(" ",o+1," "),p(2),T(e.status),p(2),T(e.pnrId),p(2),ee("",e.firstName," ",e.lastName,""),p(2),T(e.trainNumber),p(2),T(e.departStation),p(2),T(e.arrivalStation),p(2),T(e.departDate),p(2),T(e.departTime)}}var ce=class l{personId=E("");records=E([]);confirm=g();apiService=C(I);queryTrip(n){this.apiService.loading||this.apiService.execute(this.apiService.queryTrip({pnrId:n}),e=>{this.confirm.emit(e.data.trip)})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step1-result"]],inputs:{personId:[1,"personId"],records:[1,"records"]},outputs:{confirm:"confirm"},decls:30,vars:1,consts:[[1,"d-flex","flex-column","h-100","pt-2"],[1,"mb-2"],[1,"flex-1","overflow-auto"],[1,"table","table-sm","table-striped","table-hover","table-bordered","table-sticky-header","text-center","align-middle","m-0"],[1,"table-warning","backdrop-blur"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),r(2),t(),i(3,"div",2)(4,"table",3)(5,"thead",4)(6,"tr")(7,"th"),r(8,"\u6A19\u865F"),t(),i(9,"th"),r(10,"\u5DF2\u4ED8\u6B3E/\u4EE5\u958B\u7968"),t(),i(11,"th"),r(12,"\u8A02\u4F4D\u4EE3\u865F"),t(),i(13,"th"),r(14,"\u59D3\u540D"),t(),i(15,"th"),r(16,"\u8ECA\u6B21"),t(),i(17,"th"),r(18,"\u51FA\u767C\u7AD9"),t(),i(19,"th"),r(20,"\u5230\u9054\u7AD9"),t(),i(21,"th"),r(22,"\u65E5\u671F"),t(),i(23,"th"),r(24,"\u51FA\u767C\u6642\u9593"),t(),i(25,"th"),r(26,"\u9078\u64C7\u7D00\u9304"),t()()(),i(27,"tbody"),M(28,St,22,10,"tr",null,_t),t()()()()),e&2&&(p(2),F("\u8A02\u4F4D\u7D00\u9304\u5217\u8868\uFF1A",o.personId(),""),p(26),N(o.records()))},encapsulation:2})};function ht(l,n){if(l&1){let e=y();i(0,"div",4)(1,"app-timetable",8),xe("indexChange",function(a){f(e);let c=s(2);return ge(c.inboundIndex,a)||(c.inboundIndex=a),b(a)}),u("search",function(a){f(e);let c=s(2);return b(c.onInboundSearch(a))}),t()()}if(l&2){let e=s(2);p(),m("records",e.inbound())("promotion",e.promotion())("query",e.query()),he("index",e.inboundIndex),m("outbound",!1)("editing",!0)}}function gt(l,n){if(l&1){let e=y();i(0,"div",1)(1,"div",2)(2,"app-timetable",3),xe("indexChange",function(a){f(e);let c=s();return ge(c.outboundIndex,a)||(c.outboundIndex=a),b(a)}),u("search",function(a){f(e);let c=s();return b(c.onOutboundSearch(a))}),t()(),S(3,ht,2,6,"div",4),i(4,"div",5)(5,"button",6),u("click",function(){f(e);let a=s();return b(a.onConfirm())}),r(6,"\u958B\u59CB\u8A02\u4F4D"),t(),i(7,"button",6),u("click",function(){f(e);let a=s();return b(a.onShowAll())}),r(8),t(),i(9,"button",7),u("click",function(){f(e);let a=s();return b(a.back.emit())}),r(10,"\u91CD\u8A2D\u67E5\u8A62\u689D\u4EF6"),t()()()}if(l&2){let e=s();x("h-100",e.roundTrip()),p(),x("flex-1",e.roundTrip()),p(),m("records",e.outbound())("promotion",e.promotion())("query",e.query()),he("index",e.outboundIndex),m("editing",!0),p(),h(e.roundTrip()?3:-1),p(5),F(" ",e.showAll()?"\u50C5\u986F\u793A\u53EF\u552E\u8ECA\u6B21":"\u986F\u793A\u6700\u8FD1\u6240\u6709\u8ECA\u6B21"," ")}}var fe=class l{confirm=g();back=g();query=_e(null);data=_e(null);inbound=_(()=>this.data()?.inbound||[]);outbound=_(()=>this.data()?.outbound||[]);promotion=_(()=>this.data()?.promotion||null);showAll=_(()=>this.query()?.allTrain===1);roundTrip=_(()=>!!this.data()?.inbound);outboundIndex=0;inboundIndex=0;apiService=C(I);onOutboundSearch(n){this.query.update(e=>(e.outboundTime=`${n.hour}:${n.minute}`,e.outboundSearchMethod=n.searchMethod,Q({},e))),this.updateQuery()}onInboundSearch(n){this.query.update(e=>(e.inboundTime=`${n.hour}:${n.minute}`,e.inboundSearchMethod=n.searchMethod,Q({},e))),this.updateQuery()}onShowAll(){this.query.update(n=>(n.allTrain=n.allTrain===0?1:0,Q({},n))),this.updateQuery()}onConfirm(){if(this.apiService.loading)return;let n={pnrId:this.query()?.pnrId,outboundTrain:this.outbound()[this.outboundIndex]?.trainNumber,inboundTrain:this.inbound()[this.inboundIndex]?.trainNumber};this.apiService.execute(this.apiService.changeTripChoose(n),e=>{this.confirm.emit(e.data.trip)})}updateQuery(){if(this.apiService.loading)return;let n=this.query();n.outboundDateTime=`${n.outboundDate} ${n.outboundTime}`,n.inboundDateTime=`${n.inboundDate} ${n.inboundTime}`;let e=Q({},n);delete e.outboundDate,delete e.outboundTime,delete e.inboundDate,delete e.inboundTime,this.apiService.execute(this.apiService.changeTripQuery(e),o=>{this.data.set(o.data)})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step4"]],inputs:{query:[1,"query"],data:[1,"data"]},outputs:{confirm:"confirm",back:"back",query:"queryChange",data:"dataChange"},decls:1,vars:1,consts:[[1,"d-flex","flex-column","py-2",3,"h-100"],[1,"d-flex","flex-column","py-2"],[1,"border","rounded","shadow-sm","p-0","overflow-hidden"],[3,"indexChange","search","records","promotion","query","index","editing"],[1,"flex-1","border","rounded","shadow-sm","p-0","overflow-hidden","mt-2"],[1,"d-flex","gap-3","justify-content-center","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-dark",3,"click"],[3,"indexChange","search","records","promotion","query","index","outbound","editing"]],template:function(e,o){e&1&&S(0,gt,11,11,"div",0),e&2&&h(o.data()?0:-1)},dependencies:[He],encapsulation:2})};function xt(l,n){if(l&1){let e=y();i(0,"div",0),d(1,"app-ticket-info",1),i(2,"div",2)(3,"div",3),r(4,"\u5217\u8ECA\u8CC7\u8A0A"),t()(),d(5,"app-bound",4),i(6,"div",5)(7,"div",6)(8,"label",7),r(9,"\u53D6\u7968\u4EBA\u8EAB\u4EFD\u8B49\u865F"),t(),i(10,"div",8),d(11,"input",9),t()(),i(12,"div",6)(13,"label",10),r(14,"\u806F\u7D61\u96FB\u8A71"),t(),i(15,"div",8),d(16,"input",11),t()(),d(17,"app-member-code",12),t(),i(18,"div",13)(19,"div",14)(20,"div",3),r(21,"\u4E58\u5BA2\u8CC7\u8A0A"),t()()(),i(22,"div",15),d(23,"app-passengers",16),t(),i(24,"div",17)(25,"div",18)(26,"div",19),r(27,"\u7E3D\u4EBA\u6578:"),t(),i(28,"div",20),d(29,"app-people-counter",21),t()(),i(30,"div",18)(31,"div",19),r(32,"\u4FC3\u92B7\u4EE3\u78BC:"),t(),d(33,"app-promotion-tickets",22),t()(),i(34,"div",23)(35,"button",24),u("click",function(){f(e);let a=s();return b(a.onSubmit())}),r(36,"\u78BA\u8A8D"),t(),i(37,"button",25),u("click",function(){f(e);let a=s();return b(a.back.emit())}),r(38,"\u91CD\u65B0\u9078\u64C7\u8ECA\u6B21"),t()()()}if(l&2){let e=n,o=s(),a=j(0);p(),m("trip",e),p(4),m("order",a)("isShort",!0)("hasCheckbox",!1)("mode",o.seatMode.change),p(6),m("value",e.pickUpInfo.personalId),p(5),m("value",e.pickUpInfo.phoneNumber),p(),m("readonly",!0)("personalId",e.membership.personalId)("coperateId",e.membership.coperateId)("rowStyle",!1),p(6),m("roundTrip",a.roundTrip())("passengers",e.passengers)("promotion",a.selectedPromotion())("editing",!1)("readonly",!1)("disabled",!0),p(6),m("order",a),p(4),m("promotionTickets",a.promotionTickets()),p(2),m("disabled",!a.seatTaken())}}var be=class l{confirm=g();back=g();order=E();seatMode=je;apiService=C(I);onSeatChange(n){this.order().trip.set(n)}onSubmit(){this.apiService.loading||this.apiService.execute(this.apiService.changeTripConfirm(),n=>{this.confirm.emit(n.data.trip)})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step5"]],inputs:{order:[1,"order"]},outputs:{confirm:"confirm",back:"back"},decls:2,vars:2,consts:[[1,"d-flex","flex-column","h-100","py-2"],[3,"trip"],[1,"d-flex","align-items-center","mb-1"],[1,"me-2"],[3,"order","isShort","hasCheckbox","mode"],[1,"w-100","d-flex","align-items-center","flex-wrap"],[1,"d-flex","flex-column","justify-content-start"],["for","pickUpInfoPersonalId",1,"text-nowrap","m-1"],[1,"m-1"],["id","pickUpInfoPersonalId","name","pickUpInfoPersonalId","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],["for","pickUpInfoPhoneNumber",1,"text-nowrap","m-1"],["id","pickUpInfoPhoneNumber","name","pickUpInfoPhoneNumber","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],[3,"readonly","personalId","coperateId","rowStyle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"mt-1","overflow-auto"],[3,"roundTrip","passengers","promotion","editing","readonly","disabled"],[1,"d-flex","mt-1"],[1,"d-flex","w-50"],[1,"me-5"],[1,"d-flex","gap-2"],[3,"order"],[1,"flex-1",3,"promotionTickets"],[1,"d-flex","gap-3","justify-content-center","mt-1"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(e,o){if(e&1&&(O(0),S(1,xt,39,20,"div",0)),e&2){let a,c=$(o.order());p(),h((a=c.trip())?1:-1,a)}},dependencies:[W,H,V,R,z,q],encapsulation:2})};function yt(l,n){if(l&1){let e=y();i(0,"div",0),d(1,"app-ticket-info",1),i(2,"div",2)(3,"div",3),r(4,"\u5217\u8ECA\u8CC7\u8A0A"),t()(),d(5,"app-bound",4),i(6,"div",5)(7,"div",6)(8,"label",7),r(9,"\u53D6\u7968\u4EBA\u8EAB\u4EFD\u8B49\u865F"),t(),i(10,"div",8),d(11,"input",9),t()(),i(12,"div",6)(13,"label",10),r(14,"\u806F\u7D61\u96FB\u8A71"),t(),i(15,"div",8),d(16,"input",11),t()(),d(17,"app-member-code",12),t(),i(18,"div",13)(19,"div",14)(20,"div",3),r(21,"\u4E58\u5BA2\u8CC7\u8A0A"),t()()(),i(22,"div",15),d(23,"app-passengers",16),t(),i(24,"div",17)(25,"div",18)(26,"div",19),r(27,"\u7E3D\u4EBA\u6578:"),t(),i(28,"div",20),d(29,"app-people-counter",21),t()(),i(30,"div",18)(31,"div",19),r(32,"\u539F\u7968\u50F9:"),t(),i(33,"div"),r(34,"NT$4470"),t()()(),i(35,"div",17)(36,"div",18)(37,"div",19),r(38,"\u4FC3\u92B7\u4EE3\u78BC:"),t(),d(39,"app-promotion-tickets",22),t(),i(40,"div",18)(41,"div",19),r(42,"\u65B0\u7968\u50F9:"),t(),i(43,"div"),r(44,"NT$4470"),t()()(),i(45,"div",17)(46,"div",18)(47,"div",19),r(48,"\u624B\u7E8C\u8CBB:"),t(),i(49,"div"),r(50,"NT$0"),t()(),i(51,"div",18)(52,"div",19),r(53,"\u50F9\u5DEE:"),t(),i(54,"div"),r(55,"NT$0"),t()()(),i(56,"div",23)(57,"button",24),u("click",function(){f(e);let a=s();return b(a.onSubmit())}),r(58,"\u78BA\u8A8D"),t()()()}if(l&2){let e=n;s();let o=j(0);p(),m("trip",e),p(4),m("order",o)("isShort",!0)("hasCheckbox",!1)("seatSelectable",!1),p(6),m("value",e.pickUpInfo.personalId),p(5),m("value",e.pickUpInfo.phoneNumber),p(),m("readonly",!0)("personalId",e.membership.personalId)("coperateId",e.membership.coperateId)("rowStyle",!1),p(6),m("roundTrip",o.roundTrip())("passengers",e.passengers)("promotion",o.selectedPromotion())("editing",!1)("showMark",!0)("readonly",!1)("disabled",!0),p(6),m("order",o),p(10),m("promotionTickets",o.promotionTickets())}}var Ce=class l{confirm=g();order=E();onSubmit(){this.confirm.emit()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-step6"]],inputs:{order:[1,"order"]},outputs:{confirm:"confirm"},decls:2,vars:2,consts:[[1,"d-flex","flex-column","h-100","py-2"],[3,"trip"],[1,"d-flex","align-items-center","mb-1"],[1,"me-2"],[3,"order","isShort","hasCheckbox","seatSelectable"],[1,"w-100","d-flex","align-items-center","flex-wrap"],[1,"d-flex","flex-column","justify-content-start"],["for","pickUpInfoPersonalId",1,"text-nowrap","m-1"],[1,"m-1"],["id","pickUpInfoPersonalId","name","pickUpInfoPersonalId","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],["for","pickUpInfoPhoneNumber",1,"text-nowrap","m-1"],["id","pickUpInfoPhoneNumber","name","pickUpInfoPhoneNumber","type","text","disabled","",1,"form-control","form-control-sm",3,"value"],[3,"readonly","personalId","coperateId","rowStyle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"mt-1","overflow-auto"],[3,"roundTrip","passengers","promotion","editing","showMark","readonly","disabled"],[1,"d-flex","mt-1"],[1,"d-flex","w-50"],[1,"me-5"],[1,"d-flex","gap-2"],[3,"order"],[1,"flex-1",3,"promotionTickets"],[1,"d-flex","gap-3","justify-content-center","mt-1"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){if(e&1&&(O(0),S(1,yt,59,20,"div",0)),e&2){let a,c=$(o.order());p(),h((a=c.trip())?1:-1,a)}},dependencies:[W,H,V,R,z,q],encapsulation:2})};var ve=class l{step=k(1);personId=k("");fromStep1Result=k(!1);bookingRecords=k([]);trainChangeData=k(null);changeTripQueryRequest=k(null);queryTrainResponse=k(null);order=new Ue;mmiService=C(Me);router=C(Ae);constructor(){this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8F38\u5165\u8A02\u4F4D\u8CC7\u8A0A\u6216\u9000\u7968\u5F35\u6578"])}onStep1Confirm(n,e=!1){this.fromStep1Result.set(e),this.order.trip.set(n),this.step.set(2),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8F38\u5165\u8A02\u4F4D\u8CC7\u8A0A\u6216\u9000\u7968\u5F35\u6578","\u700F\u89BD/\u4FEE\u6539\u8A02\u4F4D\u7D00\u9304"])}onStep1Result(n){this.bookingRecords.set(n[1]),this.personId.set(n[0]),this.step.set(12),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8F38\u5165\u8A02\u4F4D\u8CC7\u8A0A\u6216\u9000\u7968\u5F35\u6578","\u700F\u89BD/\u4FEE\u6539\u8A02\u4F4D\u7D00\u9304"])}onTrainChange(n){this.trainChangeData.set(n),this.step.set(3),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8B8A\u66F4\u884C\u7A0B"])}onStep3Confirm(n){this.changeTripQueryRequest.set(n[0]),this.queryTrainResponse.set(n[1]),this.step.set(4),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8B8A\u66F4\u884C\u7A0B","\u9078\u64C7\u8ECA\u6B21"])}onStep4Confirm(n){this.order.trip.set(n),this.step.set(5),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8B8A\u66F4\u884C\u7A0B","\u9078\u64C7\u8ECA\u6B21","\u9078\u64C7\u5EA7\u4F4D"])}onStep5Confirm(n){this.order.trip.set(n),this.step.set(6),this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8B8A\u66F4\u884C\u7A0B","\u9078\u64C7\u8ECA\u6B21","\u9078\u64C7\u5EA7\u4F4D","\u8B8A\u66F4\u5B8C\u6210"])}onStep6Confirm(){this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u8A02\u4F4D\u7D00\u9304\u4FEE\u6539/\u53D6\u7968","\u8B8A\u66F4\u884C\u7A0B","\u9078\u64C7\u8ECA\u6B21","\u9078\u64C7\u5EA7\u4F4D","\u8B8A\u66F4\u5B8C\u6210","\u4ED8\u6B3E"]),this.router.navigate(["/mmi/main/payment"])}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-edit"]],decls:8,vars:24,consts:[[3,"confirm","result"],[3,"confirm","personId","records"],[3,"back","trainChange","order","fromResult"],[3,"confirm","order","data"],[3,"confirm","back","data","query"],[3,"confirm","back","order"],[3,"confirm","order"]],template:function(e,o){e&1&&(d(0,"app-errors"),i(1,"app-step1",0),u("confirm",function(c){return o.onStep1Confirm(c)})("result",function(c){return o.onStep1Result(c)}),t(),i(2,"app-step1-result",1),u("confirm",function(c){return o.onStep1Confirm(c,!0)}),t(),i(3,"app-step2",2),u("back",function(){return o.step.set(12)})("trainChange",function(c){return o.onTrainChange(c)}),t(),i(4,"app-step3",3),u("confirm",function(c){return o.onStep3Confirm(c)}),t(),i(5,"app-step4",4),u("confirm",function(c){return o.onStep4Confirm(c)})("back",function(){return o.step.set(3)}),t(),i(6,"app-step5",5),u("confirm",function(c){return o.onStep5Confirm(c)})("back",function(){return o.step.set(4)}),t(),i(7,"app-step6",6),u("confirm",function(){return o.onStep6Confirm()}),t()),e&2&&(p(),x("d-none",o.step()!==1),p(),x("d-none",o.step()!==12),m("personId",o.personId())("records",o.bookingRecords()),p(),x("d-none",o.step()!==2),m("order",o.order)("fromResult",o.fromStep1Result()),p(),x("d-none",o.step()!==3),m("order",o.order)("data",o.trainChangeData()),p(),x("d-none",o.step()!==4),m("data",o.queryTrainResponse())("query",o.changeTripQueryRequest()),p(),x("d-none",o.step()!==5),m("order",o.order),p(),x("d-none",o.step()!==6),m("order",o.order))},dependencies:[me,ce,ue,se,fe,be,Ce,We],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};var Tt=[{path:"",component:ve}],Ke=class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=De({type:l});static \u0275inj=Ie({imports:[w,Fe.forChild(Tt)]})};export{Ke as EditModule};
