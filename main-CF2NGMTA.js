import{$ as ne,A as l,B as b,E as q,F as D,I as A,J as F,K as z,L as x,R as $,S as X,Y as Q,Z as ee,_ as te,a as j,b as B,ba as re,c as H,ca as oe,d,e as V,ea as E,f as c,fa as O,g as W,h as w,i as R,j as M,k as g,l as h,m as u,n as _,o as J,p as y,q as U,r as N,t as G,u as P,v as Z,w as K,x as Y,y as C}from"./chunk-LLPUQC3E.js";var I=class t{constructor(n){this.dataService=n}static \u0275fac=function(e){return new(e||t)(l(O))};static \u0275cmp=b({type:t,selectors:[["app-message"]],decls:6,vars:0,consts:[[1,"messageLayout"],[1,"messageBox"],[1,"messageEn"],[1,"messageZh"]],template:function(e,a){e&1&&(A(0,"div",0)(1,"div",1)(2,"div",2),x(3,"\u6B61\u8FCE\u5149\u81E8"),F(),A(4,"div",3),x(5,"Welcome"),F()()())},dependencies:[E],styles:[".messageLayout[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#fff}.messageLayout[_ngcontent-%COMP%]   .messageBox[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.messageLayout[_ngcontent-%COMP%]   .messageBox[_ngcontent-%COMP%]   .messageEn[_ngcontent-%COMP%]{font-weight:700;font-size:60px;color:#e45914}.messageLayout[_ngcontent-%COMP%]   .messageBox[_ngcontent-%COMP%]   .messageZh[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#313131}"]})};var ie=[{path:"main",loadChildren:()=>import("./chunk-2MT4S2I2.js").then(t=>t.MainModule)},{path:"message",component:I}];var se={station:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},lastPassStation:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},useStation:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},tripSection:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},departStation:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},arrivalStation:{1:"Nangang",2:"Taipei",3:"Banqiao",4:"Taoyuan",5:"Hsinchu",6:"Miaoli",7:"Taichung",8:"Changhua",9:"Yunlin",10:"Chiayi",11:"Tainan",12:"Zuoying"},profileType:{0:"Adult",1:"Senior",2:"CouponFree",3:"Handicapped",4:"Teenager",5:"CouponHalf",6:"Student",7:"Child"},paymentType:{0:"CSH",1:"CRD",2:"BNK",3:"CSC",6:"UCD"},tripType:{1:"One-way",2:"Round-trip",3:"Round-trip",4:"Group",5:"Tour",6:"Reserved",7:"Platform",8:"Stored-value",9:"Multi-re",10:"Periodic",11:"Exit"},ticketType:{1:"One-way",2:"Round-trip",3:"Round-trip",4:"Group",5:"Tour",6:"Reserved",7:"Platform",8:"Stored-value",9:"Multi-re",10:"Periodic",11:"Exit"},cardType:{1:"One-way",2:"Round-trip",3:"Round-trip",4:"Group",5:"Tour",6:"Reserved",7:"Platform",8:"Stored-value",9:"Multi-re",10:"Periodic",11:"Exit"},reasonCode:{1:"No Entry",2:"No Exit",3:"Overstaying",4:"Overtravel",31:"Stored value too low",35:"BLACKLISTED",43:"Ticket not val yet",44:"Ticket is expired",61:"No remaining rides",107:"BLOCKED",108:"Ticket status is incorrect",109:"ENTRY NOT DONE",110:"EXIT NOT DONE",129:"Give the ticket back to customer.",130:"Entry/exit mismatch",159:"EXCESS TRIP TIME",163:"Ticket is expired",173:"Ticket is no more valid",174:"OVERTRAVEL",175:"Give the ticket back to customer and send him to the right station",176:"Give the ticket back to customer and send him to the right station",177:"Give the ticket back to customer and send him to the right station",178:"Give the ticket back to customer. Customer can wait or buy a reserved ticket",179:"Give the ticket back to customer. Customer can wait or buy a free seating ticket",180:"Give the ticket back to customer. Customer has to wait.",181:"Give the ticket back to customer. Propose a ticket exchange.",182:"Keep the ticket.",199:"Keep the ticket.",200:"Keep the ticket.",205:"Give the ticket back to customer. Customer has to wait.",214:"Rollback"},ticketClass:{1:"Standard Class",2:"Business Class",3:"Non-Reserved",4:"Business Class",5:"Non-Reserved"},trainClass:{1:"Standard Class",2:"Business Class",3:"Non-Reserved",4:"Business Class",5:"Non-Reserved"},ticketStatus:{0:"For entry",1:"For exit"},trainType:{1:"Outbound",2:"Inbound"},reserveTripType:{1:"One way",2:"Round Trip",3:"Group One Way",4:"Group RoundTrip"},language:{CH:"Chinese",EN:"English"},memberType:{1:"Personal Member",2:"Corporate Member"},refundType:{1:"Free exchange coupon",2:"Half price exchange coupon",3:"Refund",4:"Others"},"(Valid)":"(Valid)","(Invalid)":"(Invalid)",describation:"n/a","Member Account":"Member Account","Company Tax No.":"Company Tax No.","Member Information":"Member Information","Ticket Sale Information":"Ticket Sale Information","Ticket Type":"Ticket Type",From:"From",To:"To",Profile:"Profile","No.":"No.",Price:"Price",Discount:"Discount",Fare:"Fare",Total:"Total","Outbound Train Timetable":"Outbound Train Timetable","Departure Date":"Departure Date","From/To":"From/To","One-Way":"One-Way","Standard Class":"Standard Class",Departure:"Departure",Arrival:"Arrival",Duration:"Duration",Fastest:"Fastest","EarlyBird 50% Off":"EarlyBird 50% Off","College 25% Off":"College 25% Off","Teenager 50% Off":"Teenager 50% Off","Company 12% Off":"Company 12% Off","TGo SP 12% Off":"TGo SP 12% Off","Holiday 12% Off":"Holiday 12% Off","*Discount: : YP2":"*Discount: : YP2","Reservation Information":"Reservation Information","Reservation No":"Reservation No",Trip:"Trip",Date:"Date","Train No.":"Train No.","Fare Calculation after Modification":"Fare Calculation after Modification","Total Amount":"Total Amount","Payment Info.":"Payment Info.","Payment Method":"Payment Method","Amount To Paid":"Amount To Paid","Amount Paid":"Amount Paid",Change:"Change","Magnetic Ticket Information":"Magnetic Ticket Information","Ticket No.":"Ticket No.",Car:"Car",Seat:"Seat","Expiry Date":"Expiry Date","Last Transaction":"Last Transaction","Entry/Exit Station":"Entry/Exit Station","Last Entry/Exit Status":"Last Entry/Exit Status","Card Information":"Card Information",Specification:"Specification","Rides Left":"Rides Left","Card Fee":"Card Fee","Value Left":"Value Left","Date/Time":"Date/Time",Station:"Station","Add Value":"Add Value","Add-Value History":"Add-Value History","Usage History":"Usage History","Ticket Adjustment Information":"Ticket Adjustment Information","Adjustment Reason":"Adjustment Reason","Fare Difference":"Fare Difference","Service Charge":"Service Charge","Refund Payment Info.":"Refund Payment Info.","Fare to Refund":"Fare to Refund","*Refund Payment Method":"*Refund Payment Method","Ticket(s):":"Ticket(s):","Ticket(s)":"Ticket(s)","Reservation No.":"Reservation No.",Outbound:"Outbound",Inbound:"Inbound",Subtotal:"Subtotal","Outbound Fare":"Outbound Fare","-day":"-day"};var ce={station:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},lastPassStation:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},useStation:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},tripSection:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},departStation:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},arrivalStation:{1:"\u5357\u6E2F",2:"\u53F0\u5317",3:"\u677F\u6A4B",4:"\u6843\u5712",5:"\u65B0\u7AF9",6:"\u82D7\u6817",7:"\u53F0\u4E2D",8:"\u5F70\u5316",9:"\u96F2\u6797",10:"\u5609\u7FA9",11:"\u53F0\u5357",12:"\u5DE6\u71DF"},profileType:{0:"\u6210\u4EBA",1:"\u656C\u8001",2:"\u7279\u60E0\u5168",3:"\u611B\u5FC3",4:"\u5C11\u5E74",5:"\u7279\u60E0\u534A",6:"\u5B78\u751F",7:"\u5B69\u7AE5"},paymentType:{0:"\u73FE\u91D1",1:"\u4FE1\u7528\u5361",2:"\u91D1\u878D\u5361",3:"\u5132\u503C\u5361",6:"\u9280\u806F\u5361"},tripType:{1:"\u4ECA\u65E5\u55AE\u7A0B\u7968",2:"\u4ECA\u65E5\u53BB\u56DE\u7968",3:"\u53BB\u56DE\u7968",4:"\u5718\u9AD4\u7968",5:"\u65C5\u904A\u7968",6:"\u8A02\u4F4D\u7968",7:"\u6708\u53F0\u7968",8:"\u5132\u503C\u7968",9:"\u56DE\u6578\u7968",10:"\u5B9A\u671F\u7968",11:"\u88DC\u50F9\u7968"},ticketType:{1:"\u4ECA\u65E5\u55AE\u7A0B\u7968",2:"\u4ECA\u65E5\u53BB\u56DE\u7968",3:"\u53BB\u56DE\u7968",4:"\u5718\u9AD4\u7968",5:"\u65C5\u904A\u7968",6:"\u8A02\u4F4D\u7968",7:"\u6708\u53F0\u7968",8:"\u5132\u503C\u7968",9:"\u56DE\u6578\u7968",10:"\u5B9A\u671F\u7968",11:"\u88DC\u50F9\u7968"},cardType:{1:"\u4ECA\u65E5\u55AE\u7A0B\u7968",2:"\u4ECA\u65E5\u53BB\u56DE\u7968",3:"\u53BB\u56DE\u7968",4:"\u5718\u9AD4\u7968",5:"\u65C5\u904A\u7968",6:"\u8A02\u4F4D\u7968",7:"\u6708\u53F0\u7968",8:"\u5132\u503C\u7968",9:"\u56DE\u6578\u7968",10:"\u5B9A\u671F\u7968",11:"\u88DC\u50F9\u7968"},reasonCode:{1:"\u4E0D\u53EF\u9032\u7AD9",2:"\u4E0D\u53EF\u51FA\u7AD9",3:"\u903E\u6642\u505C\u7559",4:"\u903E\u7AD9",31:"\u52A0\u503C\u91D1\u984D\u904E\u4F4E",35:"\u6B64\u5F35\u7968\u5DF2\u7D93\u52A0\u5165\u9ED1\u540D\u55AE",43:"\u7968\u5361\u5C1A\u672A\u903E\u671F",44:"\u7968\u5361\u904E\u671F",61:"\u7121\u5269\u9918\u6B21\u6578",107:"\u9396\u5361",108:"\u7968\u5361\u72C0\u614B\u4E0D\u6B63\u78BA",109:"\u5C1A\u672A\u9032\u7AD9",110:"\u5C1A\u672A\u51FA\u7AD9",129:"\u6B78\u9084\u9867\u5BA2\u7968\u5361.",130:"\u9032\u51FA\u7AD9\u4E0D\u7B26\u800C\u88DC\u7968",159:"\u903E\u6642",163:"\u7968\u5361\u904E\u671F",173:"\u5DF2\u4F7F\u7528\u6216\u4E0D\u5408\u6CD5\u7684\u7968\u5361",174:"\u903E\u7AD9",175:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2\u4E26\u4F7F\u4ED6\u9032\u5165\u6B63\u78BA\u7684\u8ECA\u7AD9",176:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2\u4E26\u4F7F\u4ED6\u9032\u5165\u6B63\u78BA\u7684\u8ECA\u7AD9",177:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2\u4E26\u4F7F\u4ED6\u9032\u5165\u6B63\u78BA\u7684\u8ECA\u7AD9",178:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2. \u9867\u5BA2\u53EF\u7B49\u5F85\u6216\u8CB7\u5F35\u8A02\u4F4D\u7968",179:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2. \u9867\u5BA2\u53EF\u7B49\u5F85\u6216\u8CB7\u5F35\u81EA\u7531\u5E2D\u7684\u7968",180:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2. \u9867\u5BA2\u5FC5\u9808\u7B49\u5F85.",181:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2. \u5EFA\u8B70\u9867\u5BA2\u63DB\u5F35\u7968.",182:"\u4FDD\u7559\u7968\u5361.",199:"\u4FDD\u7559\u7968\u5361.",200:"\u4FDD\u7559\u7968\u5361.",205:"\u6B78\u9084\u7968\u5361\u7D66\u9867\u5BA2. \u9867\u5BA2\u5FC5\u9808\u7B49\u5F85.",214:"\u6B21\u6578\u8FD4\u9084"},ticketClass:{1:"\u6A19\u6E96\u8ECA\u5EC2",2:"\u5546\u52D9\u8ECA\u5EC2",3:"\u81EA\u7531\u5EA7(\u6307\u5B9A\u8ECA\u6B21)",4:"\u5546\u52D9\u5347\u7B49",5:"\u81EA\u7531\u5EA7"},trainClass:{1:"\u6A19\u6E96\u8ECA\u5EC2",2:"\u5546\u52D9\u8ECA\u5EC2",3:"\u81EA\u7531\u5EA7(\u6307\u5B9A\u8ECA\u6B21)",4:"\u5546\u52D9\u5347\u7B49",5:"\u81EA\u7531\u5EA7"},ticketStatus:{0:"\u672A\u9032\u7AD9",1:"\u5DF2\u9032\u7AD9"},trainType:{1:"\u53BB\u7A0B",2:"\u56DE\u7A0B"},reserveTripType:{1:"\u55AE\u7A0B\u7968",2:"\u53BB\u56DE\u7968",3:"\u5718\u9AD4\u7968/\u55AE\u7A0B\u7968",4:"\u5718\u9AD4\u7968/\u53BB\u56DE\u7968"},language:{CH:"\u4E2D\u6587",EN:"\u82F1\u6587"},memberType:{1:"\u500B\u4EBA\u6703\u54E1",2:"\u4F01\u696D\u6703\u54E1"},refundType:{1:"\u514D\u8CBB\u514C\u63DB\u5238",2:"\u534A\u50F9\u514C\u63DB\u5238",3:"\u9000\u6B3E",4:"\u5176\u4ED6"},"(Valid)":"(\u6709\u6548\u6703\u54E1)","(Invalid)":"(\u975E\u6703\u54E1)",describation:"\u7121","Member Account":"\u6703\u54E1","Company Tax No.":"\u4F01\u696D\u6703\u54E1","Member Information":"\u6703\u54E1\u8CC7\u8A0A","Ticket Sale Information":"\u552E\u7968\u8CC7\u8A0A","Ticket Type":"\u7968\u7A2E",From:"\u51FA\u767C\u7AD9",To:"\u5230\u9054\u7AD9",Profile:"\u8EAB\u5206\u5225","No.":"\u4EBA\u6578",Price:"\u7968\u50F9",Discount:"\u512A\u60E0",Fare:"\u5C0F\u8A08",Total:"\u7E3D\u8A08","Train Timetable":"\u5217\u8ECA\u6642\u523B\u8868","Departure Date":"\u51FA\u767C\u65E5\u671F","From/To":"\u8D77\u8A16\u7AD9","One-Way":"\u55AE\u7A0B\u7968","Standard Class":"\u6A19\u6E96\u8ECA\u5EC2",Departure:"\u51FA\u767C\u6642\u9593",Arrival:"\u5230\u9054\u6642\u9593",Duration:"\u884C\u8ECA\u6642\u9593",Fastest:"\u6700\u77ED\u6642\u7A0B","EarlyBird 50% Off":"\u65E9\u9CE5 5 \u6298","College 25% Off":"\u5B78\u751F 75 \u6298","Teenager 50% Off":"\u5C11\u5E74 5 \u6298","Company 12% Off":"\u4F01\u5E73 88 \u6298","TGo SP 12% Off":"\u6307\u5B9A 82 \u6298","Holiday 12% Off":"\u65C5\u904A 88 \u6298","Reservation Information":"\u8A02\u4F4D\u8CC7\u8A0A","Reservation No":"\u8A02\u4F4D\u4EE3\u865F",Trip:"\u65C5\u7A0B",Date:"\u65E5\u671F","Train No.":"\u8ECA\u6B21",\u7E3D\u5F35\u6578:"Ticket(s)",\u5F35:"Ticket(s)","Fare Calculation after Modification":"\u7968\u50F9\u8A08\u7B97","Total Amount":"\u7E3D\u7968\u50F9/\u5DEE\u984D","Payment Info.":"\u4ED8\u6B3E\u8CC7\u8A0A","Payment Method":"\u4ED8\u6B3E\u65B9\u5F0F","Amount To Paid":"\u61C9\u4ED8\u91D1\u984D","Amount Paid":"\u5DF2\u4ED8\u91D1\u984D",Change:"\u627E\u96F6\u91D1\u984D","Magnetic Ticket Information":"\u8ECA\u7968\u8CC7\u8A0A","Ticket No.":"\u7968\u865F",Car:"\u8ECA\u5EC2",Seat:"\u5EA7\u4F4D","Expiry Date":"\u6709\u6548\u671F\u9650","Last Transaction":"\u6700\u5F8C\u4EA4\u6613\u6642\u9593","Entry/Exit Station":"\u6700\u5F8C\u9032/\u51FA\u8ECA\u7AD9","Last Entry/Exit Status":"\u9032/\u51FA\u7AD9\u72C0\u614B","Card Information":"\u7968\u5361\u8CC7\u8A0A",Specification:"\u7522\u54C1\u898F\u683C","Rides Left":"\u5269\u9918\u6B21\u6578","Card Fee":"\u88FD\u5361\u8CBB/\u62BC\u91D1","Value Left":"\u5361\u7247\u9918\u984D","Date/Time":"\u65E5\u671F/\u6642\u9593",Station:"\u8ECA\u7AD9","Add Value":"\u52A0\u503C\u91D1\u984D","Add-Value History":"\u52A0\u503C\u7D00\u9304","Usage History":"\u4F7F\u7528\u7D00\u9304","Ticket Adjustment Information":"\u8ECA\u7968\u8ABF\u6574\u8CC7\u8A0A","Adjustment Reason":"\u8ABF\u6574\u539F\u56E0","Fare Difference":"\u7968\u50F9\u5DEE\u984D","Service Charge":"\u624B\u7E8C\u8CBB","Refund Payment Info.":"\u9000\u6B3E\u8CC7\u8A0A","Fare to Refund":"\u9000\u6B3E\u91D1\u984D","*Refund Payment Method":"*\u9000\u6B3E\u65B9\u5F0F","Ticket(s):":"\u7E3D\u5F35\u6578:","Ticket(s)":"\u5F35","Reservation No.":"\u8A02\u4F4D\u4EE3\u865F",Outbound:"\u53BB\u7A0B",Inbound:"\u56DE\u7A0B",Subtotal:"\u5C0F\u8A08","Outbound Fare":"\u53BB\u7A0B\u7968\u50F9/\u5DEE\u984D","-day":"\u5929"};var ue={en:se,"zh-TW":ce};var v="Service workers are disabled or not supported by this browser";function he(t){return w(()=>V(new Error(t)))}var m=class{serviceWorker;worker;registration;events;constructor(n){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=he(v);else{let a=R(n,"controllerchange").pipe(c(()=>n.controller)),r=w(()=>d(n.controller)),i=W(r,a);this.worker=i.pipe(h(p=>!!p)),this.registration=this.worker.pipe(y(()=>n.getRegistration()));let S=R(n,"message").pipe(c(p=>p.data)).pipe(h(p=>p&&p.type)).pipe(J());S.connect(),this.events=S}}postMessage(n,e){return this.worker.pipe(u(1),U(a=>{a.postMessage(j({action:n},e))})).toPromise().then(()=>{})}postMessageWithOperation(n,e,a){let r=this.waitForOperationCompleted(a),i=this.postMessage(n,e);return Promise.all([i,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=a=>a.type===n:e=a=>n.includes(a.type),this.events.pipe(h(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(u(1))}waitForOperationCompleted(n){return this.eventsOfType("OPERATION_COMPLETED").pipe(h(e=>e.nonce===n),u(1),c(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},ye=(()=>{class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new B;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=g,this.notificationClicks=g,this.subscription=g;return}this.messages=this.sw.eventsOfType("PUSH").pipe(c(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(c(r=>r.data)),this.pushManager=this.sw.registration.pipe(c(r=>r.pushManager));let a=this.pushManager.pipe(y(r=>r.getSubscription()));this.subscription=M(a,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(v));let a={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return a.applicationServerKey=i,this.pushManager.pipe(y(o=>o.subscribe(a)),u(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let e=a=>{if(a===null)throw new Error("Not subscribed to push notifications.");return a.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(u(1),y(e)).toPromise()}decodeBase64(e){return atob(e)}static \u0275fac=function(a){return new(a||t)(P(m))};static \u0275prov=N({token:t,factory:t.\u0275fac})}return t})(),Te=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=g,this.unrecoverable=g;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(a){return new(a||t)(P(m))};static \u0275prov=N({token:t,factory:t.\u0275fac})}return t})();var le=new G("");function ve(t,n,e){return()=>{if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let a=t.get(C),r=t.get(D);a.runOutsideAngular(()=>{let o=navigator.serviceWorker,s=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",s),r.onDestroy(()=>{o.removeEventListener("controllerchange",s)})});let i;if(typeof e.registrationStrategy=="function")i=e.registrationStrategy();else{let[o,...s]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=d(null);break;case"registerWithDelay":i=pe(+s[0]||0);break;case"registerWhenStable":let f=H(t.get(D).whenStable());i=s[0]?M(f,pe(+s[0])):f;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}a.runOutsideAngular(()=>i.pipe(u(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:e.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function pe(t){return d(null).pipe(_(t))}function Se(t){return new m(t.enabled!==!1?navigator.serviceWorker:void 0)}var T=class{enabled;scope;registrationStrategy};function de(t,n={}){return Z([ye,Te,{provide:le,useValue:t},{provide:T,useValue:n},{provide:m,useFactory:Se,deps:[T]},{provide:q,useFactory:ve,deps:[Y,le,T],multi:!0}])}var L=class{getTranslation(n){return console.log(n),d(ue[n]||{})}};function Ce(){return new L}var ge={providers:[$({eventCoalescing:!0}),ne(ie),K([E.forRoot({defaultLanguage:"en",loader:{provide:re,useFactory:Ce}})]),de("ngsw-worker.js",{enabled:!X(),registrationStrategy:"registerWhenStable:30000"})]};var k=class t{constructor(n,e,a,r){this.translateService=n;this.dataService=e;this.router=a;this.ngZone=r;window.onClientSideMessage=this.onClientSideMessage.bind(this)}title="thsr";onClientSideMessage(n){let e;try{e=JSON.parse(n)}catch(o){console.error("onClientSideMessage JSON parse error:",o);return}let r={adjustInformation:"/main/adjustInformation",memberId:"/main/member-info",saleInformation:"/main/ticket-info",trainList:"/main/train-schedule",paymentInformation:"/main/pay-info",cardInformation:"/main/card-information",message:"message"}[e.method]||`/${e.method}`,i="zh-TW";try{let o=localStorage.getItem("languageSwitch");o&&(i=JSON.parse(o))}catch(o){console.error("Failed to parse languageSwitch:",o)}if(e.method==="bookingResult")r=e.parameter?.tripInformation?.length>=2?"/main/booking-info-details":"/main/booking-info",localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));else if(e.method==="messageRequest")r="/message",localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));else if(e.method==="refundInformation")r="/main/refund-information",localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));else if(e.method==="saleInformation")r="/main/ticket-info",localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));else if(e.method==="ticketInformation")r="/main/ticketInformation",localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));else if(e.method==="languageSwitch"){i=e.parameter?.language==="CH"?"zh-TW":"en",localStorage.setItem("languageSwitch",JSON.stringify(i));try{let o=localStorage.getItem("targetPage"),s=localStorage.getItem("targetRoute"),f=o?JSON.parse(o):null,S=s?JSON.parse(s):null;this.router.navigate([S||"/"]),this.ngZone.run(()=>{this.dataService.parameter=f.parameter,this.translateService.use(i).subscribe()})}catch(o){console.error("Failed to parse targetPage or targetRoute:",o)}return}else localStorage.setItem("targetPage",JSON.stringify(e)),localStorage.setItem("targetRoute",JSON.stringify(r));this.router.navigate([r]),this.ngZone.run(()=>{this.dataService.parameter=e.parameter,this.translateService.use(i).subscribe()})}static \u0275fac=function(e){return new(e||t)(l(oe),l(O),l(te),l(C))};static \u0275cmp=b({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,a){e&1&&z(0,"router-outlet")},dependencies:[ee],encapsulation:2})};Q(k,ge).catch(t=>console.error(t));
