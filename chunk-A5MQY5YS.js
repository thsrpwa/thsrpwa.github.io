import{a as v}from"./chunk-M5BYIZWR.js";import{A as Ce,B as be,a as ae,b as B,c as me,d as F,e as N,f as le,g as pe,h as I,i as ce,k as se,n as ue,o as de,p as fe,q as ye,s as he,t as h,u as ge,v as ve,w as W,z as g}from"./chunk-EGXCMO7B.js";import{a as y}from"./chunk-E3FUK4UT.js";import{$ as G,Aa as _,Ba as e,Bb as f,Ca as n,Da as c,Ea as T,Fa as u,Ga as A,Hb as D,I as K,Ib as ie,Jb as M,Kb as oe,L as m,Nb as re,R as C,Ra as r,S as b,Sa as $,Ta as q,V as Q,Va as Z,Wa as ee,Xa as te,ab as ne,ba as l,ha as d,ia as X,j as x,m as J,ma as w,ob as H,ra as s,wa as k,xa as Y,y as E,ya as O,za as S}from"./chunk-6URDJDZ6.js";var P=class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-main"]],decls:1,vars:0,template:function(i,a){i&1&&c(0,"router-outlet")},dependencies:[ie],encapsulation:2})};function xe(o,t){o&1&&(e(0,"div",11),r(1,"\u66AB\u505C\u4E2D"),n())}var L=class o{isPaused=!1;mmiService=m(y);router=m(M);activatedRoute=m(D);loadingService=m(g);constructor(){this.mmiService.breadcrumb.set(["\u8ACB\u51FA\u793A\u5DE5\u4F5C\u8B49"]);let{mode:t}=this.activatedRoute.snapshot.queryParams;this.isPaused=t==="pause"}onSubmit(){this.loadingService.loading||(this.loadingService.start(),x(!0).pipe(E(100)).subscribe(()=>{this.loadingService.stop(),this.router.navigate(["/mmi/main/inventory"])}))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-sign-in"]],decls:19,vars:2,consts:[[3,"confirm","enabledConfirm"],[1,"d-flex","justify-content-center","align-items-center","m-auto","h-100"],[1,"p-5",3,"ngSubmit"],[1,"text-center","mb-4"],["src","/images/logo.png","alt","Logo","width","110","height","67"],[1,"form-floating","mb-3"],["type","email","id","account","placeholder","12345678",1,"form-control"],["for","account"],["type","password","id","password","placeholder","\u5BC6\u78BC",1,"form-control"],["for","password"],[1,"text-danger","small"],[1,"text-center","text-danger","small"],["type","submit",1,"btn","btn-primary","w-100","mt-3"]],template:function(i,a){i&1&&(e(0,"app-main-head-buttons",0),u("confirm",function(){return a.onSubmit()}),n(),e(1,"main")(2,"div",1)(3,"form",2),u("ngSubmit",function(){return a.onSubmit()}),e(4,"div",3),c(5,"img",4),n(),e(6,"div",5),c(7,"input",6),e(8,"label",7),r(9,"\u54E1\u5DE5\u7DE8\u865F"),n()(),e(10,"div",5),c(11,"input",8),e(12,"label",9),r(13,"\u5BC6\u78BC"),n()(),e(14,"div",10),r(15,"* \u8ACB\u78BA\u8A8D\u5DF2\u65BC F&R \u5B8C\u6210\u627E\u96F6\u91D1\u9818\u7528\u767B\u9304"),n(),w(16,xe,2,0,"div",11),e(17,"button",12),r(18,"\u767B\u5165"),n()()()()),i&2&&(s("enabledConfirm",!0),l(16),k(a.isPaused?16:-1))},dependencies:[v,h,I,N,le],styles:["form[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:10px}"]})};function Ee(o,t){if(o&1){let i=T();e(0,"tr")(1,"th",5),r(2),n(),e(3,"td",6),r(4),n(),e(5,"td",6)(6,"input",7),te("ngModelChange",function(p){let z=C(i).$implicit;return ee(z.check,p)||(z.check=p),b(p)}),n()()()}if(o&2){let i=t.$implicit;l(2),q(" ",i.title," "),l(2),q(" ",i.theory," "),l(2),Z("ngModel",i.check)}}var V=class o{stockList=[{title:"\u73FE\u91D1  \u91D1\u984D",theory:0,check:0},{title:"\u4FE1\u7528\u5361  \u91D1\u984D",theory:0,check:0},{title:"\u91D1\u878D\u5361  \u91D1\u984D",theory:0,check:0},{title:"\u5132\u503C\u5361  \u91D1\u984D",theory:0,check:0},{title:"\u7D19\u7968  \u5EAB\u5B58",theory:0,check:0},{title:"\u78C1\u7968\u5361 \u5361\u7247\u5EAB\u5B58 1",theory:0,check:0},{title:"\u78C1\u7968\u5361 \u5831\u5EE2\u6578\u91CF",theory:0,check:0},{title:"CSC \u5361\u7247\u5EAB\u5B58",theory:0,check:0},{title:"\u78C1\u7968\u5361 \u5361\u7247\u5EAB\u5B58 2",theory:0,check:0},{title:"\u786C\u5E63 1",theory:0,check:0},{title:"\u786C\u5E63 5",theory:0,check:0},{title:"\u786C\u5E63 10",theory:0,check:0},{title:"\u786C\u5E63 20",theory:0,check:0},{title:"\u786C\u5E63 50",theory:0,check:0},{title:"\u7D19\u9214 100",theory:0,check:0},{title:"\u7D19\u9214 200",theory:0,check:0},{title:"\u7D19\u9214 500",theory:0,check:0},{title:"\u7D19\u9214 1000",theory:0,check:0},{title:"\u7D19\u9214 2000",theory:0,check:0}];mmiService=m(y);router=m(M);activatedRoute=m(D);loadingService=m(g);constructor(){this.mmiService.breadcrumb.set(["\u7763\u5BDF\u503C\u73ED"])}onSubmit(){this.loadingService.loading||(this.loadingService.start(),x(!0).pipe(E(100)).subscribe(()=>{this.loadingService.stop();let{mode:t}=this.activatedRoute.snapshot.queryParams;t==="pause"||t==="exit"?this.router.navigate(["/mmi/main/sign-in"],{queryParams:{mode:t}}):this.router.navigate(["/mmi/main/base"])}))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-inventory"]],decls:13,vars:1,consts:[[3,"confirm","enabledConfirm"],[1,"px-3","py-2"],[1,"table","table-sm","table-striped","table-hover","table-bordered","rounded-3","w-100","m-0","table-layout-fixed"],[1,"table-warning"],[1,"text-center"],[1,"p-0","text-center","table-warning","text-primary"],[1,"p-0","text-center"],["type","text",1,"form-control","p-0","rounded-0","text-center","bg-transparent",3,"ngModelChange","ngModel"]],template:function(i,a){i&1&&(e(0,"app-main-head-buttons",0),u("confirm",function(){return a.onSubmit()}),n(),e(1,"main",1)(2,"table",2)(3,"thead",3)(4,"tr"),c(5,"th"),e(6,"th",4),r(7,"\u7406\u8AD6\u5B58\u91CF"),n(),e(8,"th",4),r(9,"\u78BA\u8A8D\u5B58\u91CF"),n()()(),e(10,"tbody"),S(11,Ee,7,3,"tr",null,Y),n()()()),i&2&&(s("enabledConfirm",!0),l(11),_(a.stockList))},dependencies:[v,f,h,B,F,pe],styles:["input[_ngcontent-%COMP%]{border-color:transparent}"]})};var we=()=>["/mmi/main/base"];function ke(o,t){if(o&1&&(e(0,"option",16),r(1),n()),o&2){let i=t.$implicit,a=t.$index;s("value",a),l(),$(i)}}function Te(o,t){if(o&1&&(e(0,"option",16),r(1),n()),o&2){let i=t.$implicit,a=t.$index;s("value",a),l(),$(i)}}function Ae(o,t){if(o&1){let i=T();e(0,"form",3),u("ngSubmit",function(){C(i);let p=A();return b(p.onSubmit())}),e(1,"div",4)(2,"div",5)(3,"div",6),r(4,"\u8A08\u7B97\u7968\u50F9"),n()(),e(5,"div",7)(6,"div",8)(7,"span",9),r(8,"\u4EA4\u6613\u91D1\u984D\u7E3D\u8A08"),n(),c(9,"input",10),e(10,"div",9),r(11,"\u53F0\u5E63"),n()()()(),e(12,"div",11)(13,"div",5)(14,"div",6),r(15,"\u4ED8\u6B3E"),n()(),e(16,"div",12)(17,"div",13)(18,"label",14),r(19,"\u4ED8\u6B3E\u65B9\u5F0F"),n(),e(20,"select",15),S(21,ke,2,2,"option",16,O),n()(),e(23,"div",13)(24,"div",17),c(25,"input",18),e(26,"label",19),r(27,"\u570B\u6C11\u65C5\u904A\u5361\u9810\u8CFC\u578B\u4EA4\u6613\u8CC7\u6599\u767B\u9304"),n()()(),e(28,"div",20)(29,"a",21),r(30,"\u5176\u4ED6"),n()()(),e(31,"div",12)(32,"div",13)(33,"label",22),r(34,"\u4ED8\u6B3E\u91D1\u984D"),n(),e(35,"div",23),c(36,"input",24),e(37,"span"),r(38,"\u53F0\u5E63"),n()()(),e(39,"div",13)(40,"label",25),r(41,"\u5176\u4ED6\u8A3B\u8A18"),n(),e(42,"select",26),S(43,Te,2,2,"option",16,O),n()(),e(45,"div",27)(46,"div",17),c(47,"input",28),e(48,"label",29),r(49,"\u907A\u5931\u518D\u8CFC"),n()()()(),e(50,"div",30)(51,"div",31)(52,"div",32),r(53,"\u627E\u96F6\u91D1\u984D"),n(),e(54,"div",23),c(55,"input",33),e(56,"span"),r(57,"\u53F0\u5E63"),n()()(),e(58,"div",34)(59,"button",35),u("click",function(){C(i);let p=A();return b(p.calculateChange())}),r(60," \u8A08\u7B97 "),n()()(),e(61,"div",36)(62,"button",37),r(63,"\u4ED8\u6B3E\u6210\u529F"),n()()()()}if(o&2){let i=t,a=A();s("formGroup",a.form),l(9),s("value",i.price),l(12),_(i.paymentType),l(8),s("routerLink",ne(5,we)),l(14),_(i.lastOtherMarkList),l(12),s("value",a.changeAmount()),l(4),s("disabled",a.paymentType()!=="1")}}var j=class o{data=G(null);form;paymentAmount;paymentType;changeAmount=G(0);formBuilder=m(he);mmiService=m(y);loadingService=m(g);apiService=m(Ce);messageService=m(be);destroyRef=m(Q);constructor(){this.mmiService.breadcrumb.set(["\u7AD9\u52D9\u54E1\u503C\u73ED","\u4E00\u822C\u8A02\u4F4D","\u67E5\u8A62\u65C5\u7A0B\u73ED\u6B21","\u9078\u64C7\u8ECA\u6B21","\u9078\u64C7\u5EA7\u4F4D/\u586B\u5BEB\u4E58\u5BA2\u8CC7\u6599","\u8A02\u4F4D\u5B8C\u6210","\u4ED8\u6B3E"]),this.form=this.formBuilder.group({paymentType:["0"],paymentAmount:[0,[me.required]],isTaiwanTravelCard:[!1],otherRemark:["0"],isLostAndRepurchas:[!1]}),this.paymentType=W(this.form.get("paymentType").valueChanges,{initialValue:"0"}),this.paymentAmount=W(this.form.get("paymentAmount").valueChanges.pipe(J(t=>parseInt(t,10))),{initialValue:0}),H(()=>{let t=this.data();t&&this.form.patchValue({paymentAmount:t.price})}),H(()=>{let t=this.paymentType();t==="2"?this.form.get("isTaiwanTravelCard")?.enable():this.form.get("isTaiwanTravelCard")?.disable(),t==="0"||t==="1"?this.form.get("paymentAmount")?.enable():this.form.get("paymentAmount")?.disable()}),this.apiService.gotoPayment().pipe(ve(this.destroyRef)).subscribe({next:t=>{this.loadingService.stop(),this.data.set(t.data)},error:t=>{this.loadingService.stop(),this.messageService.handleError(t)},complete:()=>{this.loadingService.stop()}})}onSubmit(){console.log(this.form.value)}onCancel(){console.log("cancel")}calculateChange(){this.changeAmount.set(this.paymentAmount()-(this.data()?.price||0))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=d({type:o,selectors:[["app-payment"]],decls:3,vars:4,consts:[[3,"cancel","confirm","enabledCancel","enabledConfirm","enabledLanguage"],[1,"container"],[1,"py-2",3,"formGroup"],[1,"py-2",3,"ngSubmit","formGroup"],[1,"border","rounded","p-3","shadow-sm","bg-white","fs-6","m-0","w-100"],[1,"row","mb-2","align-items-center","w-100"],[1,"col-auto","text-warning","fw-bold"],[1,"w-100","d-flex","justify-content-end"],[1,"w-25","d-flex","justify-content-end","align-items-center"],[1,"text-nowrap"],["type","text","disabled","",1,"form-control","form-control-sm","fs-6","ms-1","me-1",3,"value"],[1,"border","rounded","p-3","shadow-sm","bg-white","fs-6","m-0","w-100","mt-2"],[1,"row","mb-3"],[1,"col-md-4","mb-2","d-flex","align-items-center"],["for","paymentType",1,"form-div","text-nowrap"],["id","paymentType","formControlName","paymentType",1,"form-select","m-2"],[3,"value"],[1,"form-check"],["type","checkbox","id","isTaiwanTravelCard","formControlName","isTaiwanTravelCard",1,"form-check-input"],["for","isTaiwanTravelCard",1,"form-check-label"],[1,"col-md-4","text-end"],[1,"btn","btn-secondary","px-4",3,"routerLink"],["for","paymentAmount",1,"form-div","text-nowrap","m-1"],[1,"input-group","align-items-center"],["id","paymentAmount","type","number","formControlName","paymentAmount",1,"rounded","fs-6","form-control","form-control-sm","flex-grow-1","m-1"],["for","otherRemark",1,"form-div","text-nowrap","m-1"],["id","otherRemark","formControlName","otherRemark",1,"form-select","m-1"],[1,"col-md-2","mb-2","d-flex","align-items-center"],["type","checkbox","id","isLostAndRepurchas","formControlName","isLostAndRepurchas",1,"form-check-input","me-1","fs-6","flex-grow-1"],["for","isLostAndRepurchas",1,"form-check-label"],[1,"row","mb-3","d-flex","align-items-center"],[1,"col-md-4","d-flex","align-items-center"],[1,"form-div","text-nowrap"],["type","text","readonly","","disabled","",1,"rounded","fs-6","form-control","form-control-sm","flex-grow-1","m-1","text-danger",3,"value"],[1,"col-md-2","d-flex","align-items-center"],["type","button",1,"btn","btn-warning","w-100",3,"click","disabled"],[1,"d-flex","align-items-center","gap-2","fs-6","w-100","justify-content-end","mt-2"],[1,"btn","bg-primary","text-white","px-4"]],template:function(i,a){if(i&1&&(e(0,"app-main-head-buttons",0),u("cancel",function(){return a.onCancel()})("confirm",function(){return a.onSubmit()}),n(),e(1,"main",1),w(2,Ae,64,6,"form",2),n()),i&2){let p;s("enabledCancel",!0)("enabledConfirm",!0)("enabledLanguage",!0),l(2),k((p=a.data())?2:-1,p)}},dependencies:[f,h,I,fe,ye,B,ce,ae,de,F,N,ge,se,ue,oe,v],encapsulation:2})};var De=[{path:"",component:P,children:[{path:"sign-in",component:L},{path:"inventory",component:V},{path:"payment",component:j},{path:"base",loadChildren:()=>import("./chunk-IDJGNCXS.js").then(o=>o.BaseModule)},{path:"**",redirectTo:"sign-in"}]}],_e=class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=X({type:o});static \u0275inj=K({imports:[f,re.forChild(De)]})};export{_e as MainModule};
